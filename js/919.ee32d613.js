(self["webpackChunk_zazuko_rdf_sketch"]=self["webpackChunk_zazuko_rdf_sketch"]||[]).push([[919],{82919:function(e,t,i){const s=i(34509),r=i(61605);class n extends r{constructor(e){super(s,e)}}e.exports=n},34509:function(e,t,i){const s=i(77686),r=i(68825),{finished:n}=i(88473),a=i(96650);class u extends a{constructor(e,{baseIRI:t="",factory:i=r}={}){const a=new s.StreamParser({baseIRI:t,factory:i});super(a,{objectMode:!0}),a.on("prefix",((e,t)=>{this.emit("prefix",e,t)})),a.on("error",(e=>{this.destroy(e)})),n(this,(()=>{a.end()})),e.pipe(a)}}e.exports=u},61605:function(e){class t{constructor(e,t){this.Impl=e,this.options=t}import(e,t){const i=new this.Impl(e,Object.assign({},this.options,t));return e.on("end",(()=>{i.readable||i.emit("end")})),e.on("error",(e=>{i.emit("error",e)})),i}}e.exports=t},77686:function(e,t,i){"use strict";i.r(t),i.d(t,{BlankNode:function(){return B},DataFactory:function(){return E},DefaultGraph:function(){return A},Lexer:function(){return g},Literal:function(){return L},NamedNode:function(){return C},Parser:function(){return X},Quad:function(){return G},Store:function(){return oe},StreamParser:function(){return pe},StreamWriter:function(){return be},Term:function(){return F},Triple:function(){return G},Util:function(){return s},Variable:function(){return Q},Writer:function(){return he},default:function(){return ge},termFromId:function(){return D},termToId:function(){return q}});var s={};i.r(s),i.d(s,{inDefaultGraph:function(){return I},isBlankNode:function(){return m},isDefaultGraph:function(){return k},isLiteral:function(){return j},isNamedNode:function(){return x},isVariable:function(){return y},prefix:function(){return v},prefixes:function(){return w}});const r="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n="http://www.w3.org/2001/XMLSchema#",a="http://www.w3.org/2000/10/swap/";var u={xsd:{decimal:`${n}decimal`,boolean:`${n}boolean`,double:`${n}double`,integer:`${n}integer`,string:`${n}string`},rdf:{type:`${r}type`,nil:`${r}nil`,first:`${r}first`,rest:`${r}rest`,langString:`${r}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${a}reify#forSome`,forAll:`${a}reify#forAll`},log:{implies:`${a}log#implies`}},h=i(54375),c=i.n(h),l=i(48764)["Buffer"];const{xsd:d}=u,o=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,_={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},f=/[\x00-\x20<>\\"\{\}\|\^\`]/,p={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},b=/$0^/;class g{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const e in this)!(e in p)&&this[e]instanceof RegExp&&(this[e]=b)}else this._n3Mode=!1!==e.n3;this._comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,t){let i=this._input,s=i.length;while(1){let e,a;while(e=this._newline.exec(i))this._comments&&(a=this._comment.exec(e[0]))&&r("comment",a[1],"",this._line,e[0].length),i=i.substr(e[0].length,i.length),s=i.length,this._line++;if(!e&&(e=this._whitespace.exec(i))&&(i=i.substr(e[0].length,i.length)),this._endOfFile.test(i))return t&&(this._comments&&(a=this._comment.exec(i))&&r("comment",a[1],"",this._line,i.length),i=null,r("eof","","",this._line,0)),this._input=i;const u=this._line,h=i[0];let c="",l="",o="",_=null,p=0,b=!1;switch(h){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(p=1,c="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){b=!0;break}case"<":if(_=this._unescapedIri.exec(i))c="IRI",l=_[1];else if(_=this._iri.exec(i)){if(l=this._unescape(_[1]),null===l||f.test(l))return n(this);c="IRI"}else i.length>1&&"<"===i[1]?(c="<<",p=2):this._n3Mode&&i.length>1&&"="===i[1]&&(c="inverse",p=2,l=">");break;case">":i.length>1&&">"===i[1]&&(c=">>",p=2);break;case"_":((_=this._blank.exec(i))||t&&(_=this._blank.exec(`${i} `)))&&(c="blank",o="_",l=_[1]);break;case'"':if(_=this._simpleQuotedString.exec(i))l=_[1];else if(({value:l,matchLength:p}=this._parseLiteral(i)),null===l)return n(this);null===_&&0===p||(c="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(_=this._simpleApostropheString.exec(i))l=_[1];else if(({value:l,matchLength:p}=this._parseLiteral(i)),null===l)return n(this);null===_&&0===p||(c="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(_=this._variable.exec(i))&&(c="var",l=_[0]);break;case"@":"literal"===this._previousMarker&&(_=this._langcode.exec(i))?(c="langcode",l=_[1]):(_=this._keyword.exec(i))&&(c=_[0]);break;case".":if(1===i.length?t:i[1]<"0"||i[1]>"9"){c=".",p=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(_=this._number.exec(i)||t&&(_=this._number.exec(`${i} `)))&&(c="literal",l=_[0],o="string"===typeof _[1]?d.double:"string"===typeof _[2]?d.decimal:d.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(_=this._sparqlKeyword.exec(i))?c=_[0].toUpperCase():b=!0;break;case"f":case"t":(_=this._boolean.exec(i))?(c="literal",l=_[0],o=d.boolean):b=!0;break;case"a":(_=this._shortPredicates.exec(i))?(c="abbreviation",l="a"):b=!0;break;case"=":this._n3Mode&&i.length>1&&(c="abbreviation",">"!==i[1]?(p=1,l="="):(p=2,l=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(p=1,c=h);break;default:b=!0}if(b&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(_=this._prefix.exec(i))?((_=this._prefixed.exec(i))||t&&(_=this._prefixed.exec(`${i} `)))&&(c="prefixed",o=_[1]||"",l=this._unescape(_[2])):(c="prefix",l=_[1]||"")),"^^"===this._previousMarker)switch(c){case"prefixed":c="type";break;case"IRI":c="typeIRI";break;default:c=""}if(!c)return t||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?n(this):this._input=i;const g=p||_[0].length,x=r(c,l,o,u,g);this.previousToken=x,this._previousMarker=c,i=i.substr(g,i.length)}function r(t,r,n,a,u){const h=i?s-i.length:s,c=h+u,l={type:t,value:r,prefix:n,line:a,start:h,end:c};return e(null,l),l}function n(t){e(t._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(e){let t=!1;const i=e.replace(o,((e,i,s,r)=>{if("string"===typeof i)return String.fromCharCode(Number.parseInt(i,16));if("string"===typeof s){let e=Number.parseInt(s,16);return e<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((e-=65536)>>10),56320+(1023&e))}return r in _?_[r]:(t=!0,"")}));return t?null:i}_parseLiteral(e){if(e.length>=3){const t=e.match(/^(?:"""|"|'''|'|)/)[0],i=t.length;let s=Math.max(this._literalClosingPos,i);while((s=e.indexOf(t,s))>0){let t=0;while("\\"===e[s-t-1])t++;if(t%2===0){const t=e.substring(i,s),r=t.split(/\r\n|\r|\n/).length-1,n=s+i;if(1===i&&0!==r||3===i&&this._lineMode)break;return this._line+=r,{value:this._unescape(t),matchLength:n}}s++}this._literalClosingPos=e.length-i+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const t=new Error(`Unexpected "${e}" on line ${this._line}.`);return t.context={token:void 0,line:this._line,previousToken:this.previousToken},t}_readStartingBom(e){return e.startsWith("\ufeff")?e.substr(1):e}tokenize(e,t){if(this._line=1,"string"===typeof e){if(this._input=this._readStartingBom(e),"function"!==typeof t){const e=[];let t;if(this._tokenizeToEnd(((i,s)=>i?t=i:e.push(s)),!0),t)throw t;return e}c()((()=>this._tokenizeToEnd(t,!0)))}else this._pendingBuffer=null,"function"===typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",(e=>{null!==this._input&&0!==e.length&&(this._pendingBuffer&&(e=l.concat([this._pendingBuffer,e]),this._pendingBuffer=null),128&e[e.length-1]?this._pendingBuffer=e:("undefined"===typeof this._input?this._input=this._readStartingBom("string"===typeof e?e:e.toString()):this._input+=e,this._tokenizeToEnd(t,!1)))})),e.on("end",(()=>{"string"===typeof this._input&&this._tokenizeToEnd(t,!0)})),e.on("error",t)}}function x(e){return!!e&&"NamedNode"===e.termType}function m(e){return!!e&&"BlankNode"===e.termType}function j(e){return!!e&&"Literal"===e.termType}function y(e){return!!e&&"Variable"===e.termType}function k(e){return!!e&&"DefaultGraph"===e.termType}function I(e){return k(e.graph)}function v(e,t){return w({"":e},t)("")}function w(e,t){const i=Object.create(null);for(const r in e)s(r,e[r]);function s(e,s){if("string"===typeof s){const r=Object.create(null);i[e]=e=>r[e]||(r[e]=t.namedNode(s+e))}else if(!(e in i))throw new Error(`Unknown prefix: ${e}`);return i[e]}return t=t||E,s}const{rdf:R,xsd:S}=u;let N,$=0;const P=/^"(.*".*)(?="[^"]*$)/,T=/^<<("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ("(?:""|[^"])*"[^ ]*|[^ ]+) ?("(?:""|[^"])*"[^ ]*|[^ ]+)?>>$/,O={namedNode:U,blankNode:H,variable:V,literal:K,defaultGraph:Z,quad:W,triple:W};var E=O;class F{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof F?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class C extends F{get termType(){return"NamedNode"}}class L extends F{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let t=e.lastIndexOf('"')+1;return t<e.length&&"@"===e[t++]?e.substr(t).toLowerCase():""}get datatype(){return new C(this.datatypeString)}get datatypeString(){const e=this.id,t=e.lastIndexOf('"')+1,i=t<e.length?e[t]:"";return"^"===i?e.substr(t+2):"@"!==i?S.string:R.langString}equals(e){return e instanceof L?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class B extends F{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Q extends F{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}class A extends F{constructor(){return super(""),N||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}}function D(e,t){if(t=t||O,!e)return t.defaultGraph();switch(e[0]){case"?":return t.variable(e.substr(1));case"_":return t.blankNode(e.substr(2));case'"':if(t===O)return new L(e);if('"'===e[e.length-1])return t.literal(e.substr(1,e.length-2));const i=e.lastIndexOf('"',e.length-1);return t.literal(e.substr(1,i-1),"@"===e[i+1]?e.substr(i+2):t.namedNode(e.substr(i+3)));case"<":const s=T.exec(e);return t.quad(D(z(s[1]),t),D(z(s[2]),t),D(z(s[3]),t),s[4]&&D(z(s[4]),t));default:return t.namedNode(e)}}function q(e){if("string"===typeof e)return e;if(e instanceof F&&"Quad"!==e.termType)return e.id;if(!e)return N.id;switch(e.termType){case"NamedNode":return e.value;case"BlankNode":return`_:${e.value}`;case"Variable":return`?${e.value}`;case"DefaultGraph":return"";case"Literal":return`"${e.value}"${e.language?`@${e.language}`:e.datatype&&e.datatype.value!==S.string?`^^${e.datatype.value}`:""}`;case"Quad":return`<<${M(q(e.subject))} ${M(q(e.predicate))} ${M(q(e.object))}${k(e.graph)?"":` ${q(e.graph)}`}>>`;default:throw new Error(`Unexpected termType: ${e.termType}`)}}N=new A;class G extends F{constructor(e,t,i,s){super(""),this._subject=e,this._predicate=t,this._object=i,this._graph=s||N}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}}function M(e){return e.replace(P,((e,t)=>`"${t.replace(/"/g,'""')}`))}function z(e){return e.replace(P,((e,t)=>`"${t.replace(/""/g,'"')}`))}function U(e){return new C(e)}function H(e){return new B(e||"n3-"+$++)}function K(e,t){if("string"===typeof t)return new L(`"${e}"@${t.toLowerCase()}`);let i=t?t.value:"";return""===i&&("boolean"===typeof e?i=S.boolean:"number"===typeof e&&(Number.isFinite(e)?i=Number.isInteger(e)?S.integer:S.double:(i=S.double,Number.isNaN(e)||(e=e>0?"INF":"-INF")))),""===i||i===S.string?new L(`"${e}"`):new L(`"${e}"^^${i}`)}function V(e){return new Q(e)}function Z(){return N}function W(e,t,i,s){return new G(e,t,i,s)}let J=0;class X{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&ee(this,e.factory);const t="string"===typeof e.format?e.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(t),s=/trig/.test(t),r=/triple/.test(t),n=/quad/.test(t),a=this._n3Mode=/n3/.test(t),u=r||n;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||s||r||a),this._supportsRDFStar=""===t||/star|\*$/.test(t),u&&(this._resolveRelativeIRI=e=>null),this._blankNodePrefix="string"!==typeof e.blankNodePrefix?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new g({lineMode:u,n3:a}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){J=0}_setBase(e){if(e){const t=e.indexOf("#");t>=0&&(e=e.substr(0,t)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}else this._base="",this._basePath=""}_saveContext(e,t,i,s,r){const n=this._n3Mode;this._contextStack.push({subject:i,predicate:s,object:r,graph:t,type:e,inverse:!!n&&this._inversePredicate,blankPrefix:n?this._prefixes._:"",quantified:n?this._quantified:null}),n&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(){const e=this._contextStack.pop(),t=this._n3Mode;this._subject=e.subject,this._predicate=e.predicate,this._object=e.object,this._graph=e.graph,t&&(this._inversePredicate=e.inverse,this._prefixes._=e.blankPrefix,this._quantified=e.quantified)}_readInTopContext(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,t){let i;switch(e.type){case"IRI":case"typeIRI":const t=this._resolveIRI(e.value);if(null===t)return this._error("Invalid IRI",e);i=this._namedNode(t);break;case"type":case"prefixed":const s=this._prefixes[e.prefix];if(void 0===s)return this._error(`Undefined prefix "${e.prefix}:"`,e);i=this._namedNode(s+e.value);break;case"blank":i=this._blankNode(this._prefixes[e.prefix]+e.value);break;case"var":i=this._variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!t&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(0===e.prefix.length)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._literal(e.value,this._namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._subject=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const t=e.type;switch(t){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${t}`,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if(void 0===(this._predicate=this._readEntity(e)))return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(0===e.prefix.length)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._literal(e.value,this._namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",e);default:if(void 0===(this._object=this._readEntity(e)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return"{"!==e.type?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const t=null===this._predicate;return this._restoreContext(),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:t?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let t=null,i=null,s=this._readListItem;const r=this._subject,n=this._contextStack,a=n[n.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=t=this._blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext(),0!==n.length&&"list"===n[n.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;i=this.RDF_NIL;break;case"literal":0===e.prefix.length?(this._literalValue=e.value,s=this._readListItemDataTypeOrLang):(t=this._literal(e.value,this._namedNode(e.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if(void 0===(t=this._readEntity(e)))return}if(null===i&&(this._subject=i=this._blankNode()),null===r?null===a.predicate?a.subject=i:a.object=i:this._emit(r,this.RDF_REST,i,this._graph),null!==t){if(this._n3Mode&&("IRI"===e.type||"prefixed"===e.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,t),this._subject=t,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,t,this._graph)}return s}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let t=this._literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const i=this._readEntity(e);if(void 0===i)return;t=this._literal(this._literalValue,i),e=null;break;case"langcode":t=this._literal(this._literalValue,e.value),e=null;break}return{token:e,literal:t}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,t){const i=this._completeLiteral(e);if(i)return this._object=i.literal,t&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(e){return"}"!==e.type?this._readPunctuation(e):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext(),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let t,i=this._graph;const s=this._subject,r=this._inversePredicate;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,t=this._contextStack.length?this._readSubject:this._readInTopContext,r&&(this._inversePredicate=!1);break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(e))){t=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(null!==s){const e=this._predicate,t=this._object;r?this._emit(t,e,s,i):this._emit(s,e,t,i)}return t}_readBlankNodePunctuation(e){let t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),t}_readQuadPunctuation(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if("IRI"!==e.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const t=this._readEntity(e);return this._prefixes[this._prefix]=t.value,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation}_readBaseIRI(e){const t="IRI"===e.type&&this._resolveIRI(e.value);return t?(this._setBase(t),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let t;switch(e.type){case"IRI":case"prefixed":if(void 0!==(t=this._readEntity(e,!0)))break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,t,this.QUANTIFIERS_GRAPH)):this._quantified[t.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return","===e.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const t=this._contextStack,i=t.length&&t[t.length-1];if(i&&"item"===i.type){const e=this._subject;this._restoreContext(),this._emit(this._subject,this.RDF_FIRST,e,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let t,i;const s=this._blankNode();if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(t=this._subject,this._subject=s):(t=this._object,this._object=s),this._emit(t,i,s,this._graph),this._readPath}_readBackwardPath(e){const t=this._blankNode();let i,s;if(void 0!==(i=this._readEntity(e)))return null===this._predicate?(s=this._subject,this._subject=t):(s=this._object,this._object=t),this._emit(t,i,s,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return">>"!==e.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(e))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(">>"!==e.type)return this._error(`Expected >> but got ${e.type}`,e);const t=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext(),null===this._subject?(this._subject=t,this._readPredicate):(this._object=t,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,t,i,s){this._callback(null,this._quad(e,t,i,s||this.DEFAULTGRAPH))}_error(e,t){const i=new Error(`${e} on line ${t.line}.`);i.context={token:t,line:t.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=Y}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return("/"===e[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const t=e.length;let i="",s=-1,r=-1,n=0,a="/";while(s<t){switch(a){case":":if(r<0&&"/"===e[++s]&&"/"===e[++s])while((r=s+1)<t&&"/"!==e[r])s=r;break;case"?":case"#":s=t;break;case"/":if("."===e[s+1])switch(a=e[1+ ++s],a){case"/":i+=e.substring(n,s-1),n=s+1;break;case void 0:case"?":case"#":return i+e.substring(n,s)+e.substr(s+1);case".":if(a=e[1+ ++s],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=e.substring(n,s-2),(n=i.lastIndexOf("/"))>=r&&(i=i.substr(0,n)),"/"!==a)return`${i}/${e.substr(s+1)}`;n=s+1}}}a=e[++s]}return i+e.substring(n)}parse(e,t,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${J++}_`,this._prefixCallback=i||Y,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const t=[];let i;if(this._callback=(e,s)=>{e?i=e:s&&t.push(s)},this._lexer.tokenize(e).every((e=>this._readCallback=this._readCallback(e))),i)throw i;return t}this._callback=t,this._lexer.tokenize(e,((e,t)=>{null!==e?(this._callback(e),this._callback=Y):this._readCallback&&(this._readCallback=this._readCallback(t))}))}}function Y(){}function ee(e,t){const i=t.namedNode;e._namedNode=i,e._blankNode=t.blankNode,e._literal=t.literal,e._variable=t.variable,e._quad=t.quad,e.DEFAULTGRAPH=t.defaultGraph(),e.RDF_FIRST=i(u.rdf.first),e.RDF_REST=i(u.rdf.rest),e.RDF_NIL=i(u.rdf.nil),e.N3_FORALL=i(u.r.forAll),e.N3_FORSOME=i(u.r.forSome),e.ABBREVIATIONS={a:i(u.rdf.type),"=":i(u.owl.sameAs),">":i(u.log.implies)},e.QUANTIFIERS_GRAPH=i("urn:n3:quantifiers")}ee(X.prototype,E);const te=E.defaultGraph(),{rdf:ie,xsd:se}=u,re=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,ne=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,ae={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class ue extends F{equals(){return!1}}class he{constructor(e,t){if(this._prefixRegex=/$0^/,e&&"function"!==typeof e.write&&(t=e,e=null),t=t||{},this._lists=t.lists,e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{let e="";this._outputStream={write(t,i,s){e+=t,s&&s()},end:t=>{t&&t(null,e)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=te,this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes),t.baseIRI&&(this._baseMatcher=new RegExp(`^${le(t.baseIRI)}${t.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=t.baseIRI.length))}get _inDefaultGraph(){return te.equals(this._graph)}_write(e,t){this._outputStream.write(e,"utf8",t)}_writeQuad(e,t,i,s,r){try{s.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(te.equals(s)?"":`${this._encodeIriOrBlank(s)} {\n`)),this._graph=s,this._subject=null),e.equals(this._subject)?t.equals(this._predicate)?this._write(`, ${this._encodeObject(i)}`,r):this._write(`;\n    ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(i)}`,r):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=t)} ${this._encodeObject(i)}`,r)}catch(n){r&&r(n)}}_writeQuadLine(e,t,i,s,r){delete this._prefixMatch,this._write(this.quadToString(e,t,i,s),r)}quadToString(e,t,i,s){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(t)} ${this._encodeObject(i)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .\n`:" .\n"}`}quadsToString(e){return e.map((e=>this.quadToString(e.subject,e.predicate,e.object,e.graph))).join("")}_encodeSubject(e){return"Quad"===e.termType?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if("NamedNode"!==e.termType)return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let t=e.value;this._baseMatcher&&this._baseMatcher.test(t)&&(t=t.substr(this._baseLength)),re.test(t)&&(t=t.replace(ne,ce));const i=this._prefixRegex.exec(t);return i?i[1]?this._prefixIRIs[i[1]]+i[2]:t:`<${t}>`}_encodeLiteral(e){let t=e.value;if(re.test(t)&&(t=t.replace(ne,ce)),e.language)return`"${t}"@${e.language}`;if(this._lineMode){if(e.datatype.value===se.string)return`"${t}"`}else switch(e.datatype.value){case se.string:return`"${t}"`;case se.boolean:if("true"===t||"false"===t)return t;break;case se.integer:if(/^[+-]?\d+$/.test(t))return t;break;case se.decimal:if(/^[+-]?\d*\.\d+$/.test(t))return t;break;case se.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(t))return t;break}return`"${t}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===ie.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:t,object:i,graph:s}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(t)} ${this._encodeObject(i)}${k(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,t,i,s,r){void 0===i?this._writeQuad(e.subject,e.predicate,e.object,e.graph,t):"function"===typeof s?this._writeQuad(e,t,i,te,s):this._writeQuad(e,t,i,s||te,r)}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}addPrefix(e,t,i){const s={};s[e]=t,this.addPrefixes(s,i)}addPrefixes(e,t){if(!this._prefixIRIs)return t&&t();let i=!1;for(let s in e){let t=e[s];"string"!==typeof t&&(t=t.value),i=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[t]=s+=":",this._write(`@prefix ${s} <${t}>.\n`)}if(i){let e="",t="";for(const i in this._prefixIRIs)e+=e?`|${i}`:i,t+=(t?"|":"")+this._prefixIRIs[i];e=le(e,/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp(`^(?:${t})[^/]*$|^(${e})([a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(i?"\n":"",t)}blank(e,t){let i,s,r=e;switch(void 0===e?r=[]:e.termType?r=[{predicate:e,object:t}]:"length"in e||(r=[e]),s=r.length){case 0:return new ue("[]");case 1:if(i=r[0],!(i.object instanceof ue))return new ue(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let t="[";for(let n=0;n<s;n++)i=r[n],i.predicate.equals(e)?t+=`, ${this._encodeObject(i.object)}`:(t+=`${(n?";\n  ":"\n  ")+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,e=i.predicate);return new ue(`${t}\n]`)}}list(e){const t=e&&e.length||0,i=new Array(t);for(let s=0;s<t;s++)i[s]=this._encodeObject(e[s]);return new ue(`(${i.join(" ")})`)}end(e){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let t=e&&((i,s)=>{t=null,e(i,s)});if(this._endStream)try{return this._outputStream.end(t)}catch(i){}t&&t()}}function ce(e){let t=ae[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}function le(e){return e.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}var de=i(88473);class oe{constructor(e,t){this._size=0,this._graphs=Object.create(null),this._id=0,this._ids=Object.create(null),this._ids["><"]=0,this._entities=Object.create(null),this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),t=t||{},this._factory=t.factory||E,e&&this.addQuads(e)}get size(){let e=this._size;if(null!==e)return e;e=0;const t=this._graphs;let i,s;for(const r in t)for(const n in i=t[r].subjects)for(const t in s=i[n])e+=Object.keys(s[t]).length;return this._size=e}_addToIndex(e,t,i,s){const r=e[t]||(e[t]={}),n=r[i]||(r[i]={}),a=s in n;return a||(n[s]=null),!a}_removeFromIndex(e,t,i,s){const r=e[t],n=r[i];delete n[s];for(const a in n)return;delete r[i];for(const a in r)return;delete e[t]}_findInIndex(e,t,i,s,r,n,a,u,h,c){let l,d,o;const _=!t+!i+!s,f=_>1?Object.keys(this._ids):this._entities;t&&((l=e,e={})[t]=l[t]);for(const p in e){const t=f[p];if(d=e[p]){i&&((l=d,d={})[i]=l[i]);for(const e in d){const i=f[e];if(o=d[e]){const e=s?s in o?[s]:[]:Object.keys(o);for(let s=0;s<e.length;s++){const l={subject:null,predicate:null,object:null};l[r]=D(t,this._factory),l[n]=D(i,this._factory),l[a]=D(f[e[s]],this._factory);const d=this._factory.quad(l.subject,l.predicate,l.object,D(u,this._factory));if(c)c.push(d);else if(h(d))return!0}}}}}return c}_loop(e,t){for(const i in e)t(i)}_loopByKey0(e,t,i){let s,r;if(s=e[t])for(r in s)i(r)}_loopByKey1(e,t,i){let s,r;for(s in e)r=e[s],r[t]&&i(s)}_loopBy2Keys(e,t,i,s){let r,n,a;if((r=e[t])&&(n=r[i]))for(a in n)s(a)}_countInIndex(e,t,i,s){let r,n,a,u=0;t&&((r=e,e={})[t]=r[t]);for(const h in e)if(n=e[h]){i&&((r=n,n={})[i]=r[i]);for(const e in n)(a=n[e])&&(s?s in a&&u++:u+=Object.keys(a).length)}return u}_getGraphs(e){if(!_e(e))return this._graphs;const t={};return t[e]=this._graphs[e],t}_uniqueEntities(e){const t=Object.create(null);return i=>{i in t||(t[i]=!0,e(D(this._entities[i],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,t,i,s){t||(s=e.graph,i=e.object,t=e.predicate,e=e.subject),e=q(e),t=q(t),i=q(i),s=q(s);let r=this._graphs[s];r||(r=this._graphs[s]={subjects:{},predicates:{},objects:{}},Object.freeze(r));const n=this._ids,a=this._entities;e=n[e]||(n[a[++this._id]=e]=this._id),t=n[t]||(n[a[++this._id]=t]=this._id),i=n[i]||(n[a[++this._id]=i]=this._id);const u=this._addToIndex(r.subjects,e,t,i);return this._addToIndex(r.predicates,t,i,e),this._addToIndex(r.objects,i,e,t),this._size=null,u}addQuads(e){for(let t=0;t<e.length;t++)this.addQuad(e[t])}delete(e){return this.removeQuad(e),this}has(e){const t=this.getQuads(e.subject,e.predicate,e.object,e.graph);return 0!==t.length}import(e){return e.on("data",(e=>{this.addQuad(e)})),e}removeQuad(e,t,i,s){t||(s=e.graph,i=e.object,t=e.predicate,e=e.subject),e=q(e),t=q(t),i=q(i),s=q(s);const r=this._ids,n=this._graphs;let a,u,h;if(!(e=r[e])||!(t=r[t])||!(i=r[i])||!(a=n[s])||!(u=a.subjects[e])||!(h=u[t])||!(i in h))return!1;for(e in this._removeFromIndex(a.subjects,e,t,i),this._removeFromIndex(a.predicates,t,i,e),this._removeFromIndex(a.objects,i,e,t),null!==this._size&&this._size--,a.subjects)return!0;return delete n[s],!0}removeQuads(e){for(let t=0;t<e.length;t++)this.removeQuad(e[t])}remove(e){return e.on("data",(e=>{this.removeQuad(e)})),e}removeMatches(e,t,i,s){const r=new de.Readable({objectMode:!0});return r._read=()=>{for(const n of this.getQuads(e,t,i,s))r.push(n);r.push(null)},this.remove(r)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,t,i,s){e=e&&q(e),t=t&&q(t),i=i&&q(i),s=s&&q(s);const r=[],n=this._getGraphs(s),a=this._ids;let u,h,c,l;if(_e(e)&&!(h=a[e])||_e(t)&&!(c=a[t])||_e(i)&&!(l=a[i]))return r;for(const d in n)(u=n[d])&&(h?l?this._findInIndex(u.objects,l,h,c,"object","subject","predicate",d,null,r):this._findInIndex(u.subjects,h,c,null,"subject","predicate","object",d,null,r):c?this._findInIndex(u.predicates,c,l,null,"predicate","object","subject",d,null,r):l?this._findInIndex(u.objects,l,null,null,"object","subject","predicate",d,null,r):this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",d,null,r));return r}match(e,t,i,s){return new fe(this,e,t,i,s)}countQuads(e,t,i,s){e=e&&q(e),t=t&&q(t),i=i&&q(i),s=s&&q(s);const r=this._getGraphs(s),n=this._ids;let a,u,h,c,l=0;if(_e(e)&&!(u=n[e])||_e(t)&&!(h=n[t])||_e(i)&&!(c=n[i]))return 0;for(const d in r)(a=r[d])&&(l+=e?i?this._countInIndex(a.objects,c,u,h):this._countInIndex(a.subjects,u,h,c):t?this._countInIndex(a.predicates,h,c,u):this._countInIndex(a.objects,c,u,h));return l}forEach(e,t,i,s,r){this.some((t=>(e(t),!1)),t,i,s,r)}every(e,t,i,s,r){let n=!1;const a=!this.some((t=>(n=!0,!e(t))),t,i,s,r);return n&&a}some(e,t,i,s,r){t=t&&q(t),i=i&&q(i),s=s&&q(s),r=r&&q(r);const n=this._getGraphs(r),a=this._ids;let u,h,c,l;if(_e(t)&&!(h=a[t])||_e(i)&&!(c=a[i])||_e(s)&&!(l=a[s]))return!1;for(const d in n)if(u=n[d])if(h){if(l){if(this._findInIndex(u.objects,l,h,c,"object","subject","predicate",d,e,null))return!0}else if(this._findInIndex(u.subjects,h,c,null,"subject","predicate","object",d,e,null))return!0}else if(c){if(this._findInIndex(u.predicates,c,l,null,"predicate","object","subject",d,e,null))return!0}else if(l){if(this._findInIndex(u.objects,l,null,null,"object","subject","predicate",d,e,null))return!0}else if(this._findInIndex(u.subjects,null,null,null,"subject","predicate","object",d,e,null))return!0;return!1}getSubjects(e,t,i){const s=[];return this.forSubjects((e=>{s.push(e)}),e,t,i),s}forSubjects(e,t,i,s){t=t&&q(t),i=i&&q(i),s=s&&q(s);const r=this._ids,n=this._getGraphs(s);let a,u,h;if(e=this._uniqueEntities(e),!(_e(t)&&!(u=r[t])||_e(i)&&!(h=r[i])))for(s in n)(a=n[s])&&(u?h?this._loopBy2Keys(a.predicates,u,h,e):this._loopByKey1(a.subjects,u,e):h?this._loopByKey0(a.objects,h,e):this._loop(a.subjects,e))}getPredicates(e,t,i){const s=[];return this.forPredicates((e=>{s.push(e)}),e,t,i),s}forPredicates(e,t,i,s){t=t&&q(t),i=i&&q(i),s=s&&q(s);const r=this._ids,n=this._getGraphs(s);let a,u,h;if(e=this._uniqueEntities(e),!(_e(t)&&!(u=r[t])||_e(i)&&!(h=r[i])))for(s in n)(a=n[s])&&(u?h?this._loopBy2Keys(a.objects,h,u,e):this._loopByKey0(a.subjects,u,e):h?this._loopByKey1(a.predicates,h,e):this._loop(a.predicates,e))}getObjects(e,t,i){const s=[];return this.forObjects((e=>{s.push(e)}),e,t,i),s}forObjects(e,t,i,s){t=t&&q(t),i=i&&q(i),s=s&&q(s);const r=this._ids,n=this._getGraphs(s);let a,u,h;if(e=this._uniqueEntities(e),!(_e(t)&&!(u=r[t])||_e(i)&&!(h=r[i])))for(s in n)(a=n[s])&&(u?h?this._loopBy2Keys(a.subjects,u,h,e):this._loopByKey1(a.objects,u,e):h?this._loopByKey0(a.predicates,h,e):this._loop(a.objects,e))}getGraphs(e,t,i){const s=[];return this.forGraphs((e=>{s.push(e)}),e,t,i),s}forGraphs(e,t,i,s){for(const r in this._graphs)this.some((t=>(e(t.graph),!0)),t,i,s,r)}createBlankNode(e){let t,i;if(e){t=e=`_:${e}`,i=1;while(this._ids[t])t=e+i++}else do{t="_:b"+this._blankNodeIndex++}while(this._ids[t]);return this._ids[t]=++this._id,this._entities[this._id]=t,this._factory.blankNode(t.substr(2))}extractLists({remove:e=!1,ignoreErrors:t=!1}={}){const i={},s=t?()=>!0:(e,t)=>{throw new Error(`${e.value} ${t}`)},r=this.getQuads(null,u.rdf.rest,u.rdf.nil,null),n=e?[...r]:[];return r.forEach((t=>{const r=[];let a,h,c=!1;const l=t.graph;let d=t.subject;while(d&&!c){const e=this.getQuads(null,null,d,null),t=this.getQuads(d,null,null,null);let i,o=null,_=null,f=null;for(let r=0;r<t.length&&!c;r++)i=t[r],i.graph.equals(l)?a?c=s(d,"has non-list arcs out"):i.predicate.value===u.rdf.first?o?c=s(d,"has multiple rdf:first arcs"):n.push(o=i):i.predicate.value===u.rdf.rest?_?c=s(d,"has multiple rdf:rest arcs"):n.push(_=i):e.length?c=s(d,"can't be subject and object"):(a=i,h="subject"):c=s(d,"not confined to single graph");for(let r=0;r<e.length&&!c;++r)i=e[r],a?c=s(d,"can't have coreferences"):i.predicate.value===u.rdf.rest?f?c=s(d,"has incoming rdf:rest arcs"):f=i:(a=i,h="object");o?r.unshift(o.object):c=s(d,"has no list head"),d=f&&f.subject}c?e=!1:a&&(i[a[h].value]=r)})),e&&this.removeQuads(n),i}*[Symbol.iterator](){yield*this.getQuads()}}function _e(e){return"string"===typeof e||e instanceof String}class fe extends de.Readable{constructor(e,t,i,s,r){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:t,predicate:i,object:s,graph:r})}get filtered(){if(!this._filtered){const{n3Store:e,graph:t,object:i,predicate:s,subject:r}=this,n=e.getQuads(r,s,i,t);this._filtered=new oe(n,{factory:e._factory})}return this._filtered}get size(){return this.filtered.size}_read(){for(const e of this.filtered.getQuads())this.push(e);this.push(null)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,t,i,s){return new fe(this.filtered,e,t,i,s)}*[Symbol.iterator](){yield*this.filtered.getQuads()}}class pe extends de.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const t=new X(e);let i,s;t.parse({on:(e,t)=>{switch(e){case"data":i=t;break;case"end":s=t;break}}},((e,t)=>{e&&this.emit("error",e)||t&&this.push(t)}),((e,t)=>{this.emit("prefix",e,t)})),this._transform=(e,t,s)=>{i(e),s()},this._flush=e=>{s(),e()}}import(e){return e.on("data",(e=>{this.write(e)})),e.on("end",(()=>{this.end()})),e.on("error",(e=>{this.emit("error",e)})),this}}class be extends de.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const t=this._writer=new he({write:(e,t,i)=>{this.push(e),i&&i()},end:e=>{this.push(null),e&&e()}},e);this._transform=(e,i,s)=>{t.addQuad(e,s)},this._flush=e=>{t.end(e)}}import(e){return e.on("data",(e=>{this.write(e)})),e.on("end",(()=>{this.end()})),e.on("error",(e=>{this.emit("error",e)})),e.on("prefix",((e,t)=>{this._writer.addPrefix(e,t)})),this}}var ge={Lexer:g,Parser:X,Writer:he,Store:oe,StreamParser:pe,StreamWriter:be,Util:s,DataFactory:E,Term:F,NamedNode:C,Literal:L,BlankNode:B,Variable:Q,DefaultGraph:A,Quad:G,Triple:G,termFromId:D,termToId:q}},54375:function(e,t,i){
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
let s;e.exports="function"===typeof queueMicrotask?queueMicrotask.bind("undefined"!==typeof window?window:i.g):e=>(s||(s=Promise.resolve())).then(e).catch((e=>setTimeout((()=>{throw e}),0)))},96650:function(e,t,i){const{finished:s,Readable:r}=i(88473);function n(){return new Promise((e=>setTimeout(e,0)))}class a extends r{constructor(e,{end:t=!0,map:i,...s}={}){super({read:a.readFrom(e,{end:t,map:i}),...s})}static readFrom(e,{end:t=!0,map:i=(e=>e)}={}){let r=!1;s(e,(()=>{r=!0}));const a=async function(){while(1){const s=e.read();if(s){if(!this.push(i(s)))return!1}else{if(r&&t&&this.push(null),r)return!0;await n()}}};return a}}e.exports=a}}]);
//# sourceMappingURL=919.ee32d613.js.map