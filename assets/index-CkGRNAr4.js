import{S as Pf}from"./index-BOvYCoiN.js";import{b as be,c as dt,a as Ge,e as ct,d as Ie,s as ks,f as kf}from"./main-BG8rCUrd.js";import{r as Mf}from"./readable-BmS1kvD9.js";import{r as ao,a as Vf}from"./index-DwdYNYJQ.js";import{c as jf}from"./canonicalize-Bd8h0v92.js";var Ms={},dr={},{Buffer:ft}=be,re={},Vs=re.LEFT_BRACE=1,Ur=re.RIGHT_BRACE=2,js=re.LEFT_BRACKET=3,ki=re.RIGHT_BRACKET=4,Wr=re.COLON=5,Kr=re.COMMA=6,Fs=re.TRUE=7,Us=re.FALSE=8,Ws=re.NULL=9,Jr=re.STRING=10,Bs=re.NUMBER=11,It=re.START=17,Gs=re.STOP=18,Do=re.TRUE1=33,Lo=re.TRUE2=34,Po=re.TRUE3=35,ko=re.FALSE1=49,Mo=re.FALSE2=50,Vo=re.FALSE3=51,jo=re.FALSE4=52,Fo=re.NULL1=65,Uo=re.NULL2=66,Wo=re.NULL3=67,Bo=re.NUMBER1=81,Qn=re.NUMBER3=83,Ve=re.STRING1=97,Go=re.STRING2=98,Ho=re.STRING3=99,Ff=re.STRING4=100,Uf=re.STRING5=101,Ko=re.STRING6=102,Wt=re.VALUE=113,Zn=re.KEY=114,Cr=re.OBJECT=129,Nr=re.ARRAY=130,Wf=92,Bf=47,Gf=8,Hf=12,Kf=10,Jf=13,qf=9,so=64*1024;function Or(e){return ft.alloc?ft.alloc(e):new ft(e)}function ut(){this.tState=It,this.value=void 0,this.string=void 0,this.stringBuffer=Or(so),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=Wt,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:Or(2),3:Or(3),4:Or(4)},this.offset=-1}ut.toknam=function(e){for(var t=Object.keys(re),r=0,n=t.length;r<n;r++){var o=t[r];if(re[o]===e)return o}return e&&"0x"+e.toString(16)};var $e=ut.prototype;$e.onError=function(e){throw e};$e.charError=function(e,t){this.tState=Gs,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(e[t]))+" at position "+t+" in state "+ut.toknam(this.tState)))};$e.appendStringChar=function(e){this.stringBufferOffset>=so&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=e};$e.appendStringBuf=function(e,t,r){var n=e.length;typeof t=="number"&&(typeof r=="number"?r<0?n=e.length-t+r:n=r-t:n=e.length-t),n<0&&(n=0),this.stringBufferOffset+n>so&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),e.copy(this.stringBuffer,this.stringBufferOffset,t,r),this.stringBufferOffset+=n};$e.write=function(e){typeof e=="string"&&(e=new ft(e));for(var t,r=0,n=e.length;r<n;r++)if(this.tState===It){if(t=e[r],this.offset++,t===123)this.onToken(Vs,"{");else if(t===125)this.onToken(Ur,"}");else if(t===91)this.onToken(js,"[");else if(t===93)this.onToken(ki,"]");else if(t===58)this.onToken(Wr,":");else if(t===44)this.onToken(Kr,",");else if(t===116)this.tState=Do;else if(t===102)this.tState=ko;else if(t===110)this.tState=Fo;else if(t===34)this.string="",this.stringBufferOffset=0,this.tState=Ve;else if(t===45)this.string="-",this.tState=Bo;else if(t>=48&&t<64)this.string=String.fromCharCode(t),this.tState=Qn;else if(!(t===32||t===9||t===10||t===13))return this.charError(e,r)}else if(this.tState===Ve)if(t=e[r],this.bytes_remaining>0){for(var o=0;o<this.bytes_remaining;o++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+o]=e[o];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,r=r+o-1}else if(this.bytes_remaining===0&&t>=128){if(t<=193||t>244)return this.onError(new Error("Invalid UTF-8 character at position "+r+" in state "+ut.toknam(this.tState)));if(t>=194&&t<=223&&(this.bytes_in_sequence=2),t>=224&&t<=239&&(this.bytes_in_sequence=3),t>=240&&t<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+r>e.length){for(var a=0;a<=e.length-1-r;a++)this.temp_buffs[this.bytes_in_sequence][a]=e[r+a];this.bytes_remaining=r+this.bytes_in_sequence-e.length,r=e.length-1}else this.appendStringBuf(e,r,r+this.bytes_in_sequence),r=r+this.bytes_in_sequence-1}else if(t===34)this.tState=It,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(Jr,this.string),this.offset+=ft.byteLength(this.string,"utf8")+1,this.string=void 0;else if(t===92)this.tState=Go;else if(t>=32)this.appendStringChar(t);else return this.charError(e,r);else if(this.tState===Go)if(t=e[r],t===34)this.appendStringChar(t),this.tState=Ve;else if(t===92)this.appendStringChar(Wf),this.tState=Ve;else if(t===47)this.appendStringChar(Bf),this.tState=Ve;else if(t===98)this.appendStringChar(Gf),this.tState=Ve;else if(t===102)this.appendStringChar(Hf),this.tState=Ve;else if(t===110)this.appendStringChar(Kf),this.tState=Ve;else if(t===114)this.appendStringChar(Jf),this.tState=Ve;else if(t===116)this.appendStringChar(qf),this.tState=Ve;else if(t===117)this.unicode="",this.tState=Ho;else return this.charError(e,r);else if(this.tState===Ho||this.tState===Ff||this.tState===Uf||this.tState===Ko)if(t=e[r],t>=48&&t<64||t>64&&t<=70||t>96&&t<=102){if(this.unicode+=String.fromCharCode(t),this.tState++===Ko){var i=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&i>=56320&&i<57344?(this.appendStringBuf(new ft(String.fromCharCode(this.highSurrogate,i))),this.highSurrogate=void 0):this.highSurrogate===void 0&&i>=55296&&i<56320?this.highSurrogate=i:(this.highSurrogate!==void 0&&(this.appendStringBuf(new ft(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new ft(String.fromCharCode(i)))),this.tState=Ve}}else return this.charError(e,r);else if(this.tState===Bo||this.tState===Qn)switch(t=e[r],t){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(t),this.tState=Qn;break;default:this.tState=It;var l=this.numberReviver(this.string,e,r);if(l)return l;this.offset+=this.string.length-1,this.string=void 0,r--;break}else if(this.tState===Do)if(e[r]===114)this.tState=Lo;else return this.charError(e,r);else if(this.tState===Lo)if(e[r]===117)this.tState=Po;else return this.charError(e,r);else if(this.tState===Po)if(e[r]===101)this.tState=It,this.onToken(Fs,!0),this.offset+=3;else return this.charError(e,r);else if(this.tState===ko)if(e[r]===97)this.tState=Mo;else return this.charError(e,r);else if(this.tState===Mo)if(e[r]===108)this.tState=Vo;else return this.charError(e,r);else if(this.tState===Vo)if(e[r]===115)this.tState=jo;else return this.charError(e,r);else if(this.tState===jo)if(e[r]===101)this.tState=It,this.onToken(Us,!1),this.offset+=4;else return this.charError(e,r);else if(this.tState===Fo)if(e[r]===117)this.tState=Uo;else return this.charError(e,r);else if(this.tState===Uo)if(e[r]===108)this.tState=Wo;else return this.charError(e,r);else if(this.tState===Wo)if(e[r]===108)this.tState=It,this.onToken(Ws,null),this.offset+=3;else return this.charError(e,r)};$e.onToken=function(e,t){};$e.parseError=function(e,t){this.tState=Gs,this.onError(new Error("Unexpected "+ut.toknam(e)+(t?"("+JSON.stringify(t)+")":"")+" in state "+ut.toknam(this.state)))};$e.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})};$e.pop=function(){var e=this.value,t=this.stack.pop();this.value=t.value,this.key=t.key,this.mode=t.mode,this.emit(e),this.mode||(this.state=Wt)};$e.emit=function(e){this.mode&&(this.state=Kr),this.onValue(e)};$e.onValue=function(e){};$e.onToken=function(e,t){if(this.state===Wt)if(e===Jr||e===Bs||e===Fs||e===Us||e===Ws)this.value&&(this.value[this.key]=t),this.emit(t);else if(e===Vs)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=Zn,this.mode=Cr;else if(e===js)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=Nr,this.state=Wt;else if(e===Ur)if(this.mode===Cr)this.pop();else return this.parseError(e,t);else if(e===ki)if(this.mode===Nr)this.pop();else return this.parseError(e,t);else return this.parseError(e,t);else if(this.state===Zn)if(e===Jr)this.key=t,this.state=Wr;else if(e===Ur)this.pop();else return this.parseError(e,t);else if(this.state===Wr)if(e===Wr)this.state=Wt;else return this.parseError(e,t);else if(this.state===Kr)if(e===Kr)this.mode===Nr?(this.key++,this.state=Wt):this.mode===Cr&&(this.state=Zn);else if(e===ki&&this.mode===Nr||e===Ur&&this.mode===Cr)this.pop();else return this.parseError(e,t);else return this.parseError(e,t)};$e.numberReviver=function(e,t,r){var n=Number(e);if(isNaN(n))return this.charError(t,r);e.match(/[0-9]+/)==e&&n.toString()!=e?this.onToken(Jr,e):this.onToken(Bs,n)};ut.C=re;var Yf=ut,Se={},en={},Jt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_CODES=e.ErrorCoded=void 0;class t extends Error{constructor(n,o){super(n),this.code=o}}e.ErrorCoded=t,function(r){r.COLLIDING_KEYWORDS="colliding keywords",r.CONFLICTING_INDEXES="conflicting indexes",r.CYCLIC_IRI_MAPPING="cyclic IRI mapping",r.INVALID_ID_VALUE="invalid @id value",r.INVALID_INDEX_VALUE="invalid @index value",r.INVALID_NEST_VALUE="invalid @nest value",r.INVALID_PREFIX_VALUE="invalid @prefix value",r.INVALID_PROPAGATE_VALUE="invalid @propagate value",r.INVALID_REVERSE_VALUE="invalid @reverse value",r.INVALID_IMPORT_VALUE="invalid @import value",r.INVALID_VERSION_VALUE="invalid @version value",r.INVALID_BASE_IRI="invalid base IRI",r.INVALID_CONTAINER_MAPPING="invalid container mapping",r.INVALID_CONTEXT_ENTRY="invalid context entry",r.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",r.INVALID_DEFAULT_LANGUAGE="invalid default language",r.INVALID_INCLUDED_VALUE="invalid @included value",r.INVALID_IRI_MAPPING="invalid IRI mapping",r.INVALID_JSON_LITERAL="invalid JSON literal",r.INVALID_KEYWORD_ALIAS="invalid keyword alias",r.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",r.INVALID_LANGUAGE_MAPPING="invalid language mapping",r.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",r.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",r.INVALID_LOCAL_CONTEXT="invalid local context",r.INVALID_REMOTE_CONTEXT="invalid remote context",r.INVALID_REVERSE_PROPERTY="invalid reverse property",r.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",r.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",r.INVALID_SCOPED_CONTEXT="invalid scoped context",r.INVALID_SCRIPT_ELEMENT="invalid script element",r.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",r.INVALID_TERM_DEFINITION="invalid term definition",r.INVALID_TYPE_MAPPING="invalid type mapping",r.INVALID_TYPE_VALUE="invalid type value",r.INVALID_TYPED_VALUE="invalid typed value",r.INVALID_VALUE_OBJECT="invalid value object",r.INVALID_VALUE_OBJECT_VALUE="invalid value object value",r.INVALID_VOCAB_MAPPING="invalid vocab mapping",r.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",r.KEYWORD_REDEFINITION="keyword redefinition",r.LOADING_DOCUMENT_FAILED="loading document failed",r.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",r.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",r.PROCESSING_MODE_CONFLICT="processing mode conflict",r.PROTECTED_TERM_REDEFINITION="protected term redefinition",r.CONTEXT_OVERFLOW="context overflow",r.INVALID_BASE_DIRECTION="invalid base direction",r.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",r.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",r.INVALID_EMBEDDED_NODE="invalid embedded node",r.INVALID_ANNOTATION="invalid annotation"}(e.ERROR_CODES||(e.ERROR_CODES={}))})(Jt);var Ar={},zf=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,Xf=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Qf=/\s|\uFEFF|\xA0/,Zf=/\r?\n[\x20\x09]+/g,ed=/[;,"]/,td=/[;,"]|\s/,rd=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,Xe={IDLE:1,URI:2,ATTR:4};function Jo(e){return e.replace(Xf,"")}function Br(e){return Qf.test(e)}function nd(e,t){for(;Br(e[t]);)t++;return t}function qo(e){return td.test(e)||!rd.test(e)}function id(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(r=>r in t&&e[r]===t[r])}class ae{constructor(t){this.refs=[],t&&this.parse(t)}rel(t){for(var r=[],n=t.toLowerCase(),o=0;o<this.refs.length;o++)typeof this.refs[o].rel=="string"&&this.refs[o].rel.toLowerCase()===n&&r.push(this.refs[o]);return r}get(t,r){t=t.toLowerCase(),r=r.toLowerCase();for(var n=[],o=0;o<this.refs.length;o++)typeof this.refs[o][t]=="string"&&this.refs[o][t].toLowerCase()===r&&n.push(this.refs[o]);return n}set(t){return this.refs.push(t),this}setUnique(t){return this.refs.some(r=>id(r,t))||this.refs.push(t),this}has(t,r){t=t.toLowerCase(),r=r.toLowerCase();for(var n=0;n<this.refs.length;n++)if(typeof this.refs[n][t]=="string"&&this.refs[n][t].toLowerCase()===r)return!0;return!1}parse(t,a){a=a||0,t=a?t.slice(a):t,t=Jo(t).replace(Zf,"");for(var n=Xe.IDLE,o=t.length,a=0,i=null;a<o;)if(n===Xe.IDLE){if(Br(t[a])){a++;continue}else if(t[a]==="<"){i!=null&&(i.rel!=null?this.refs.push(...ae.expandRelations(i)):this.refs.push(i));var l=t.indexOf(">",a);if(l===-1)throw new Error("Expected end of URI delimiter at offset "+a);i={uri:t.slice(a+1,l)},a=l,n=Xe.URI}else throw new Error('Unexpected character "'+t[a]+'" at offset '+a);a++}else if(n===Xe.URI)if(Br(t[a])){a++;continue}else if(t[a]===";")n=Xe.ATTR,a++;else if(t[a]===",")n=Xe.IDLE,a++;else throw new Error('Unexpected character "'+t[a]+'" at offset '+a);else if(n===Xe.ATTR){if(t[a]===";"||Br(t[a])){a++;continue}var l=t.indexOf("=",a);l===-1&&(l=t.indexOf(";",a)),l===-1&&(l=t.length);var d=Jo(t.slice(a,l)).toLowerCase(),u="";if(a=l+1,a=nd(t,a),t[a]==='"')for(a++;a<o;){if(t[a]==='"'){a++;break}t[a]==="\\"&&a++,u+=t[a],a++}else{for(var l=a+1;!ed.test(t[l])&&l<o;)l++;u=t.slice(a,l),a=l}switch(i[d]&&ae.isSingleOccurenceAttr(d)||(d[d.length-1]==="*"?i[d]=ae.parseExtendedValue(u):(u=d==="type"?u.toLowerCase():u,i[d]!=null?Array.isArray(i[d])?i[d].push(u):i[d]=[i[d],u]:i[d]=u)),t[a]){case",":n=Xe.IDLE;break;case";":n=Xe.ATTR;break}a++}else throw new Error('Unknown parser state "'+n+'"');return i!=null&&(i.rel!=null?this.refs.push(...ae.expandRelations(i)):this.refs.push(i)),i=null,this}toString(){for(var t=[],r="",n=null,o=0;o<this.refs.length;o++)n=this.refs[o],r=Object.keys(this.refs[o]).reduce(function(a,i){return i==="uri"?a:a+"; "+ae.formatAttribute(i,n[i])},"<"+n.uri+">"),t.push(r);return t.join(", ")}}ae.isCompatibleEncoding=function(e){return zf.test(e)};ae.parse=function(e,t){return new ae().parse(e,t)};ae.isSingleOccurenceAttr=function(e){return e==="rel"||e==="type"||e==="media"||e==="title"||e==="title*"};ae.isTokenAttr=function(e){return e==="rel"||e==="type"||e==="anchor"};ae.escapeQuotes=function(e){return e.replace(/"/g,'\\"')};ae.expandRelations=function(e){var t=e.rel.split(" ");return t.map(function(r){var n=Object.assign({},e);return n.rel=r,n})};ae.parseExtendedValue=function(e){var t=/([^']+)?(?:'([^']*)')?(.+)/.exec(e);return{language:t[2].toLowerCase(),encoding:ae.isCompatibleEncoding(t[1])?null:t[1].toLowerCase(),value:ae.isCompatibleEncoding(t[1])?decodeURIComponent(t[3]):t[3]}};ae.formatExtendedAttribute=function(e,t){var r=(t.encoding||"utf-8").toUpperCase(),n=t.language||"en",o="";return be.Buffer.isBuffer(t.value)&&ae.isCompatibleEncoding(r)?o=t.value.toString(r):be.Buffer.isBuffer(t.value)?o=t.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):o=encodeURIComponent(t.value),e+"="+r+"'"+n+"'"+o};ae.formatAttribute=function(e,t){return Array.isArray(t)?t.map(r=>ae.formatAttribute(e,r)).join("; "):e[e.length-1]==="*"||typeof t!="string"?ae.formatExtendedAttribute(e,t):(ae.isTokenAttr(e)?t=qo(t)?'"'+ae.escapeQuotes(t)+'"':ae.escapeQuotes(t):qo(t)&&(t=encodeURIComponent(t),t=t.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),t='"'+t+'"'),e+"="+t)};var Hs=ae;Object.defineProperty(Ar,"__esModule",{value:!0});Ar.FetchDocumentLoader=void 0;const Yo=Jt,od=Hs,ad=ao;class sd{constructor(t){this.fetcher=t}async load(t){const r=await(this.fetcher||fetch)(t,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let n=r.headers.get("Content-Type");if(n){const o=n.indexOf(";");o>0&&(n=n.substr(0,o))}if(n==="application/ld+json")return await r.json();if(r.headers.has("Link")){let o;if(r.headers.forEach((a,i)=>{if(i==="link"){const l=(0,od.parse)(a);for(const d of l.get("type","application/ld+json"))if(d.rel==="alternate"){if(o)throw new Error("Multiple JSON-LD alternate links were found on "+t);o=(0,ad.resolve)(d.uri,t)}}}),o)return this.load(o)}throw new Yo.ErrorCoded(`Unsupported JSON-LD media type ${n}`,Yo.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}}Ar.FetchDocumentLoader=sd;var lo={},qt={};Object.defineProperty(qt,"__esModule",{value:!0});qt.Util=void 0;let xe=class Qe{static isCompactIri(t){return t.indexOf(":")>0&&!(t&&t[0]==="#")}static getPrefix(t,r){if(t&&t[0]==="#")return null;const n=t.indexOf(":");if(n>=0){if(t.length>n+1&&t.charAt(n+1)==="/"&&t.charAt(n+2)==="/")return null;const o=t.substr(0,n);if(o==="_")return null;if(r[o])return o}return null}static getContextValueId(t){if(t===null||typeof t=="string")return t;const r=t["@id"];return r||null}static isSimpleTermDefinitionPrefix(t,r){return!Qe.isPotentialKeyword(t)&&(r.allowPrefixNonGenDelims||typeof t=="string"&&(t[0]==="_"||Qe.isPrefixIriEndingWithGenDelim(t)))}static isPotentialKeyword(t){return typeof t=="string"&&Qe.KEYWORD_REGEX.test(t)}static isPrefixIriEndingWithGenDelim(t){return Qe.ENDS_WITH_GEN_DELIM.test(t)}static isPrefixValue(t){return t&&(typeof t=="string"||t&&typeof t=="object")}static isValidIri(t){return!!(t&&Qe.IRI_REGEX.test(t))}static isValidIriWeak(t){return!!t&&t[0]!==":"&&Qe.IRI_REGEX_WEAK.test(t)}static isValidKeyword(t){return Qe.VALID_KEYWORDS[t]}static isTermProtected(t,r){const n=t[r];return typeof n!="string"&&n&&n["@protected"]}static hasProtectedTerms(t){for(const r of Object.keys(t))if(Qe.isTermProtected(t,r))return!0;return!1}static isReservedInternalKeyword(t){return t.startsWith("@__")}static deepEqual(t,r){const n=Object.keys(t),o=Object.keys(r);return n.length!==o.length?!1:n.every(a=>{const i=t[a],l=r[a];return i===l||i!==null&&l!==null&&typeof i=="object"&&typeof l=="object"&&this.deepEqual(i,l)})}};xe.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/;xe.IRI_REGEX_WEAK=/(?::[^:])|\//;xe.KEYWORD_REGEX=/^@[a-z]+$/i;xe.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/;xe.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/;xe.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/;xe.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0};xe.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"];xe.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"];xe.ALIAS_RANGE_BLACKLIST=["@context","@preserve"];xe.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"];xe.CONTAINERS_1_0=["@list","@set","@index"];qt.Util=xe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultExpandOptions=e.JsonLdContextNormalized=void 0;const t=ao,r=Jt,n=qt;class o{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,l,d=e.defaultExpandOptions){const u=this.contextRaw[i];if(u===null||u&&u["@id"]===null)return null;let h=!0;if(u&&l){const S=n.Util.getContextValueId(u);if(S&&S!==i)if(typeof S!="string"||!n.Util.isValidIri(S)&&!n.Util.isValidKeyword(S))n.Util.isPotentialKeyword(S)||(h=!1);else return S}const _=n.Util.getPrefix(i,this.contextRaw),b=this.contextRaw["@vocab"],c=(!!b||b==="")&&b.indexOf(":")<0,E=this.contextRaw["@base"],g=n.Util.isPotentialKeyword(i);if(_){const S=this.contextRaw[_],T=n.Util.getContextValueId(S);if(T){if(typeof S=="string"||!d.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(T,d))return i}else if(T[0]!=="_"&&!g&&!S["@prefix"]&&!(i in this.contextRaw))return i;return T+i.substr(_.length+1)}}else if(l&&(b||b===""||d.allowVocabRelativeToBase&&E&&c)&&!g&&!n.Util.isCompactIri(i))if(c){if(d.allowVocabRelativeToBase)return(b||E?(0,t.resolve)(b,E):"")+i;throw new r.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${b}' is not allowed.`,r.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return b+i;else if(!l&&E&&!g&&!n.Util.isCompactIri(i))return(0,t.resolve)(i,E);if(h)return i;throw new r.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(u)}'`,r.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,l){if(l&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!l&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const d={prefix:"",suffix:i};for(const u in this.contextRaw){const h=this.contextRaw[u];if(h&&!n.Util.isPotentialKeyword(u)){const _=n.Util.getContextValueId(h);if(i.startsWith(_)){const b=i.substr(_.length);if(b)b.length<d.suffix.length&&(d.prefix=u,d.suffix=b);else if(l)return u}}}return d.prefix?d.prefix+":"+d.suffix:i}}e.JsonLdContextNormalized=o,e.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(lo);Object.defineProperty(en,"__esModule",{value:!0});en.ContextParser=void 0;const zo=ao,D=Jt,ld=Ar,je=lo,q=qt;class Ze{constructor(t){t=t||{},this.documentLoader=t.documentLoader||new ld.FetchDocumentLoader,this.documentCache={},this.validateContext=!t.skipValidation,this.expandContentTypeToBase=!!t.expandContentTypeToBase,this.remoteContextsDepthLimit=t.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in t?!!t.redirectSchemaOrgHttps:!0}static validateLanguage(t,r,n){if(typeof t!="string")throw new D.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(t)}'`,n);if(!q.Util.REGEX_LANGUAGE_TAG.test(t)){if(r)throw new D.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(t)}'`,n);return!1}return!0}static validateDirection(t,r){if(typeof t!="string")throw new D.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(t)}'`,D.ERROR_CODES.INVALID_BASE_DIRECTION);if(!q.Util.REGEX_DIRECTION_TAG.test(t)){if(r)throw new D.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(t)}'`,D.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(t){for(const r of Object.keys(t)){let n=t[r];if(n&&typeof n=="object"&&n["@reverse"]&&!n["@id"]){if(typeof n["@reverse"]!="string"||q.Util.isValidKeyword(n["@reverse"]))throw new D.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${n["@reverse"]}'`,D.ERROR_CODES.INVALID_IRI_MAPPING);n=t[r]=Object.assign(Object.assign({},n),{"@id":n["@reverse"]}),n["@id"]=n["@reverse"],q.Util.isPotentialKeyword(n["@reverse"])?delete n["@reverse"]:n["@reverse"]=!0}}return t}expandPrefixedTerms(t,r,n){const o=t.getContextRaw();for(const a of n||Object.keys(o))if(q.Util.EXPAND_KEYS_BLACKLIST.indexOf(a)<0&&!q.Util.isReservedInternalKeyword(a)){const i=o[a];if(q.Util.isPotentialKeyword(a)&&q.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(a)>=0&&(a!=="@type"||typeof o[a]=="object"&&!(o[a]["@protected"]||o[a]["@container"]==="@set")))throw new D.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${a} to ${JSON.stringify(i)}`,D.ERROR_CODES.KEYWORD_REDEFINITION);if(q.Util.ALIAS_RANGE_BLACKLIST.indexOf(q.Util.getContextValueId(i))>=0)throw new D.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${a} to ${JSON.stringify(i)}`,D.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(i&&q.Util.isPotentialKeyword(q.Util.getContextValueId(i))&&i["@prefix"]===!0)throw new D.ErrorCoded(`Tried to use keyword aliases as prefix: '${a}': '${JSON.stringify(i)}'`,D.ERROR_CODES.INVALID_TERM_DEFINITION);for(;q.Util.isPrefixValue(o[a]);){const l=o[a];let d=!1;if(typeof l=="string")o[a]=t.expandTerm(l,!0),d=d||l!==o[a];else{const u=l["@id"],h=l["@type"],_=!("@prefix"in l)||q.Util.isValidIri(a);if("@id"in l)u!=null&&typeof u=="string"&&(o[a]=Object.assign(Object.assign({},o[a]),{"@id":t.expandTerm(u,!0)}),d=d||u!==o[a]["@id"]);else if(!q.Util.isPotentialKeyword(a)&&_){const b=t.expandTerm(a,!0);b!==a&&(o[a]=Object.assign(Object.assign({},o[a]),{"@id":b}),d=!0)}if(h&&typeof h=="string"&&h!=="@vocab"&&(!l["@container"]||!l["@container"]["@type"])&&_){let b=t.expandTerm(h,!0);r&&h===b&&(b=t.expandTerm(h,!1)),b!==h&&(d=!0,o[a]=Object.assign(Object.assign({},o[a]),{"@type":b}))}}if(!d)break}}}normalize(t,{processingMode:r,normalizeLanguageTags:n}){if(n||r===1)for(const o of Object.keys(t))if(o==="@language"&&typeof t[o]=="string")t[o]=t[o].toLowerCase();else{const a=t[o];if(a&&typeof a=="object"&&typeof a["@language"]=="string"){const i=a["@language"].toLowerCase();i!==a["@language"]&&(t[o]=Object.assign(Object.assign({},a),{"@language":i}))}}}containersToHash(t){for(const r of Object.keys(t)){const n=t[r];if(n&&typeof n=="object"){if(typeof n["@container"]=="string")t[r]=Object.assign(Object.assign({},n),{"@container":{[n["@container"]]:!0}});else if(Array.isArray(n["@container"])){const o={};for(const a of n["@container"])o[a]=!0;t[r]=Object.assign(Object.assign({},n),{"@container":o})}}}}applyScopedProtected(t,{processingMode:r},n){if(r&&r>=1.1&&t["@protected"]){for(const o of Object.keys(t))if(!q.Util.isReservedInternalKeyword(o)&&!q.Util.isPotentialKeyword(o)&&!q.Util.isTermProtected(t,o)){const a=t[o];a&&typeof a=="object"?"@protected"in t[o]||(t[o]=Object.assign(Object.assign({},t[o]),{"@protected":!0})):(t[o]={"@id":a,"@protected":!0},q.Util.isSimpleTermDefinitionPrefix(a,n)&&(t[o]=Object.assign(Object.assign({},t[o]),{"@prefix":!0})))}delete t["@protected"]}}validateKeywordRedefinitions(t,r,n,o){for(const a of o??Object.keys(r))if(q.Util.isTermProtected(t,a)&&(typeof r[a]=="string"?r[a]={"@id":r[a],"@protected":!0}:r[a]=Object.assign(Object.assign({},r[a]),{"@protected":!0}),!q.Util.deepEqual(t[a],r[a])))throw new D.ErrorCoded(`Attempted to override the protected keyword ${a} from ${JSON.stringify(q.Util.getContextValueId(t[a]))} to ${JSON.stringify(q.Util.getContextValueId(r[a]))}`,D.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(t,{processingMode:r}){for(const n of Object.keys(t)){if(q.Util.isReservedInternalKeyword(n))continue;if(n==="")throw new D.ErrorCoded(`The empty term is not allowed, got: '${n}': '${JSON.stringify(t[n])}'`,D.ERROR_CODES.INVALID_TERM_DEFINITION);const o=t[n],a=typeof o;if(q.Util.isPotentialKeyword(n)){switch(n.substr(1)){case"vocab":if(o!==null&&a!=="string")throw new D.ErrorCoded(`Found an invalid @vocab IRI: ${o}`,D.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(o!==null&&a!=="string")throw new D.ErrorCoded(`Found an invalid @base IRI: ${t[n]}`,D.ERROR_CODES.INVALID_BASE_IRI);break;case"language":o!==null&&Ze.validateLanguage(o,!0,D.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(o!==null&&a!=="number")throw new D.ErrorCoded(`Found an invalid @version number: ${o}`,D.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":o!==null&&Ze.validateDirection(o,!0);break;case"propagate":if(r===1)throw new D.ErrorCoded(`Found an illegal @propagate keyword: ${o}`,D.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(o!==null&&a!=="boolean")throw new D.ErrorCoded(`Found an invalid @propagate value: ${o}`,D.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(q.Util.isValidKeyword(n)&&q.Util.isValidKeyword(q.Util.getContextValueId(o)))throw new D.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${q.Util.getContextValueId(o)}'`,D.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(o!==null)switch(a){case"string":if(q.Util.getPrefix(o,t)===n)throw new D.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.CYCLIC_IRI_MAPPING);if(q.Util.isValidIriWeak(n)){if(o==="@type")throw new D.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${o}'`,D.ERROR_CODES.INVALID_IRI_MAPPING);if(q.Util.isValidIri(o)&&o!==new je.JsonLdContextNormalized(t).expandTerm(n))throw new D.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${o}'`,D.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!q.Util.isCompactIri(n)&&!("@id"in o)&&(o["@type"]==="@id"?!t["@base"]:!t["@vocab"]))throw new D.ErrorCoded(`Missing @id in context entry: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_IRI_MAPPING);for(const i of Object.keys(o)){const l=o[i];if(l)switch(i){case"@id":if(q.Util.isValidKeyword(l)&&l!=="@type"&&l!=="@id"&&l!=="@graph"&&l!=="@nest")throw new D.ErrorCoded(`Illegal keyword alias in term value, found: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_IRI_MAPPING);if(q.Util.isValidIriWeak(n)){if(l==="@type")throw new D.ErrorCoded(`IRIs can not be mapped to @type, found: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_IRI_MAPPING);if(q.Util.isValidIri(l)&&l!==new je.JsonLdContextNormalized(t).expandTerm(n))throw new D.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof l!="string")throw new D.ErrorCoded(`Detected non-string @id in context entry: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_IRI_MAPPING);if(q.Util.getPrefix(l,t)===n)throw new D.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(o["@container"]==="@type"&&l!=="@id"&&l!=="@vocab")throw new D.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${n}': '${l}'`,D.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof l!="string")throw new D.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(a)}'`,D.ERROR_CODES.INVALID_TYPE_MAPPING);if(l!=="@id"&&l!=="@vocab"&&(r===1||l!=="@json")&&(r===1||l!=="@none")&&(l[0]==="_"||!q.Util.isValidIri(l)))throw new D.ErrorCoded(`A context @type must be an absolute IRI, found: '${n}': '${l}'`,D.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof l=="string"&&o["@id"]&&o["@id"]!==l)throw new D.ErrorCoded(`Found non-matching @id and @reverse term values in '${n}':'${l}' and '${o["@id"]}'`,D.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in o)throw new D.ErrorCoded(`@nest is not allowed in the reverse property '${n}'`,D.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(r===1&&(Object.keys(l).length>1||q.Util.CONTAINERS_1_0.indexOf(Object.keys(l)[0])<0))throw new D.ErrorCoded(`Invalid term @container for '${n}' ('${Object.keys(l)}') in 1.0, must be only one of ${q.Util.CONTAINERS_1_0.join(", ")}`,D.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const d of Object.keys(l)){if(d==="@list"&&o["@reverse"])throw new D.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${n}'`,D.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(q.Util.CONTAINERS.indexOf(d)<0)throw new D.ErrorCoded(`Invalid term @container for '${n}' ('${d}'), must be one of ${q.Util.CONTAINERS.join(", ")}`,D.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":Ze.validateLanguage(l,!0,D.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":Ze.validateDirection(l,!0);break;case"@prefix":if(l!==null&&typeof l!="boolean")throw new D.ErrorCoded(`Found an invalid term @prefix boolean in: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in o)&&!q.Util.isValidIri(n))throw new D.ErrorCoded(`Invalid @prefix definition for '${n}' ('${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(r===1||!o["@container"]||!o["@container"]["@index"])throw new D.ErrorCoded(`Attempt to add illegal key to value object: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(q.Util.isPotentialKeyword(l)&&l!=="@nest")throw new D.ErrorCoded(`Found an invalid term @nest value in: '${n}': '${JSON.stringify(o)}'`,D.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new D.ErrorCoded(`Found an invalid term value: '${n}': '${o}'`,D.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(t,r,n){return typeof t=="string"||(n&&!("@base"in t)&&r.parentContext&&typeof r.parentContext=="object"&&"@base"in r.parentContext&&(t["@base"]=r.parentContext["@base"],r.parentContext["@__baseDocument"]&&(t["@__baseDocument"]=!0)),r.baseIRI&&!r.external&&("@base"in t?t["@base"]!==null&&typeof t["@base"]=="string"&&!q.Util.isValidIri(t["@base"])&&(t["@base"]=(0,zo.resolve)(t["@base"],r.parentContext&&r.parentContext["@base"]||r.baseIRI)):(t["@base"]=r.baseIRI,t["@__baseDocument"]=!0))),t}normalizeContextIri(t,r){if(!q.Util.isValidIri(t))try{t=(0,zo.resolve)(t,r)}catch{throw new Error(`Invalid context IRI: ${t}`)}return this.redirectSchemaOrgHttps&&t.startsWith("http://schema.org")&&(t="https://schema.org/"),t}async parseInnerContexts(t,r,n){for(const o of n??Object.keys(t)){const a=t[o];if(a&&typeof a=="object"&&"@context"in a&&a["@context"]!==null&&!r.ignoreScopedContexts){if(this.validateContext)try{const i=Object.assign(Object.assign({},t),{[o]:Object.assign({},t[o])});delete i[o]["@context"],await this.parse(a["@context"],Object.assign(Object.assign({},r),{external:!1,parentContext:i,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(i){throw new D.ErrorCoded(i.message,D.ERROR_CODES.INVALID_SCOPED_CONTEXT)}t[o]=Object.assign(Object.assign({},a),{"@context":(await this.parse(a["@context"],Object.assign(Object.assign({},r),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:t}))).getContextRaw()})}}return t}async parse(t,r={},n={}){const{baseIRI:o,parentContext:a,external:i,processingMode:l=Ze.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:d,ignoreProtection:u,minimalProcessing:h}=r,_=r.remoteContexts||{};if(Object.keys(_).length>=this.remoteContextsDepthLimit)throw new D.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(_),D.ERROR_CODES.CONTEXT_OVERFLOW);if(t==null){if(!u&&a&&q.Util.hasProtectedTerms(a))throw new D.ErrorCoded("Illegal context nullification when terms are protected",D.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new je.JsonLdContextNormalized(this.applyBaseEntry({},r,!1))}else if(typeof t=="string"){const b=this.normalizeContextIri(t,o),c=this.getOverriddenLoad(b,r);if(c)return new je.JsonLdContextNormalized(c);const E=await this.parse(await this.load(b),Object.assign(Object.assign({},r),{baseIRI:b,external:!0,remoteContexts:Object.assign(Object.assign({},_),{[b]:!0})}));return this.applyBaseEntry(E.getContextRaw(),r,!0),E}else if(Array.isArray(t)){const b=[],c=await Promise.all(t.map((g,S)=>{if(typeof g=="string"){const T=this.normalizeContextIri(g,o);b[S]=T;const $=this.getOverriddenLoad(T,r);return $||this.load(T)}else return g}));if(h)return new je.JsonLdContextNormalized(c);const E=await c.reduce((g,S,T)=>g.then($=>this.parse(S,Object.assign(Object.assign({},r),{baseIRI:b[T]||r.baseIRI,external:!!b[T]||r.external,parentContext:$.getContextRaw(),remoteContexts:b[T]?Object.assign(Object.assign({},_),{[b[T]]:!0}):_}),{skipValidation:T<c.length-1})),Promise.resolve(new je.JsonLdContextNormalized(a||{})));return this.applyBaseEntry(E.getContextRaw(),r,!0),E}else if(typeof t=="object"){if("@context"in t)return await this.parse(t["@context"],r);if(t=Object.assign({},t),i&&delete t["@base"],this.applyBaseEntry(t,r,!0),this.containersToHash(t),h)return new je.JsonLdContextNormalized(t);let b={};if("@import"in t)if(l>=1.1){if(typeof t["@import"]!="string")throw new D.ErrorCoded("An @import value must be a string, but got "+typeof t["@import"],D.ERROR_CODES.INVALID_IMPORT_VALUE);b=await this.loadImportContext(this.normalizeContextIri(t["@import"],o)),delete t["@import"]}else throw new D.ErrorCoded("Context importing is not supported in JSON-LD 1.0",D.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(b,{processingMode:l},je.defaultExpandOptions);const c=Object.assign(b,t);this.idifyReverseTerms(c),this.normalize(c,{processingMode:l,normalizeLanguageTags:d}),this.applyScopedProtected(c,{processingMode:l},je.defaultExpandOptions);const E=Object.keys(c),g=[];if(typeof a=="object")for(const T in a)T in c?g.push(T):c[T]=a[T];await this.parseInnerContexts(c,r,E);const S=new je.JsonLdContextNormalized(c);return(c&&c["@version"]||Ze.DEFAULT_PROCESSING_MODE)>=1.1&&(t["@vocab"]&&typeof t["@vocab"]=="string"||t["@vocab"]==="")&&(a&&"@vocab"in a&&t["@vocab"].indexOf(":")<0?c["@vocab"]=a["@vocab"]+t["@vocab"]:(q.Util.isCompactIri(t["@vocab"])||t["@vocab"]in c)&&(c["@vocab"]=S.expandTerm(t["@vocab"],!0))),this.expandPrefixedTerms(S,this.expandContentTypeToBase,E),!u&&a&&l>=1.1&&this.validateKeywordRedefinitions(a,c,je.defaultExpandOptions,g),this.validateContext&&!n.skipValidation&&this.validate(c,{processingMode:l}),S}else throw new D.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${t}`,D.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(t){const r=this.documentCache[t];if(r)return r;let n;try{n=await this.documentLoader.load(t)}catch(o){throw new D.ErrorCoded(`Failed to load remote context ${t}: ${o.message}`,D.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in n))throw new D.ErrorCoded(`Missing @context in remote context at ${t}`,D.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[t]=n["@context"]}getOverriddenLoad(t,r){if(t in(r.remoteContexts||{})){if(r.ignoreRemoteScopedContexts)return t;throw new D.ErrorCoded("Detected a cyclic context inclusion of "+t,D.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(t){let r=await this.load(t);if(typeof r!="object"||Array.isArray(r))throw new D.ErrorCoded("An imported context must be a single object: "+t,D.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in r)throw new D.ErrorCoded("An imported context can not import another context: "+t,D.ERROR_CODES.INVALID_CONTEXT_ENTRY);return r=Object.assign({},r),this.containersToHash(r),r}}Ze.DEFAULT_PROCESSING_MODE=1.1;en.ContextParser=Ze;var Ks={};Object.defineProperty(Ks,"__esModule",{value:!0});var Js={};Object.defineProperty(Js,"__esModule",{value:!0});(function(e){var t=dt&&dt.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(n,i,l)}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=dt&&dt.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(en,e),r(Jt,e),r(Ar,e),r(Ks,e),r(Js,e),r(lo,e),r(qt,e)})(Se);var qs={exports:{}},ei={exports:{}},se={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},Ys={exports:{}};(function(e){const t=be,{kResistStopPropagation:r,SymbolDispose:n}=se,o=globalThis.AbortSignal||Ge().AbortSignal,a=globalThis.AbortController||Ge().AbortController,i=Object.getPrototypeOf(async function(){}).constructor,l=globalThis.Blob||t.Blob,d=typeof l<"u"?function(c){return c instanceof l}:function(c){return!1},u=(b,c)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new ERR_INVALID_ARG_TYPE(c,"AbortSignal",b)},h=(b,c)=>{if(typeof b!="function")throw new ERR_INVALID_ARG_TYPE(c,"Function",b)};class _ extends Error{constructor(c){if(!Array.isArray(c))throw new TypeError(`Expected input to be an Array, got ${typeof c}`);let E="";for(let g=0;g<c.length;g++)E+=`    ${c[g].stack}
`;super(E),this.name="AggregateError",this.errors=c}}e.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(b){let c=!1;return function(...E){c||(c=!0,b.apply(this,E))}},createDeferredPromise:function(){let b,c;return{promise:new Promise((g,S)=>{b=g,c=S}),resolve:b,reject:c}},promisify(b){return new Promise((c,E)=>{b((g,...S)=>g?E(g):c(...S))})},debuglog(){return function(){}},format(b,...c){return b.replace(/%([sdifj])/g,function(...[E,g]){const S=c.shift();return g==="f"?S.toFixed(6):g==="j"?JSON.stringify(S):g==="s"&&typeof S=="object"?`${S.constructor!==Object?S.constructor.name:""} {}`.trim():S.toString()})},inspect(b){switch(typeof b){case"string":if(b.includes("'"))if(b.includes('"')){if(!b.includes("`")&&!b.includes("${"))return`\`${b}\``}else return`"${b}"`;return`'${b}'`;case"number":return isNaN(b)?"NaN":Object.is(b,-0)?String(b):b;case"bigint":return`${String(b)}n`;case"boolean":case"undefined":return String(b);case"object":return"{}"}},types:{isAsyncFunction(b){return b instanceof i},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:d,deprecate(b,c){return b},addAbortListener:ct.addAbortListener||function(c,E){if(c===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",c);u(c,"signal"),h(E,"listener");let g;return c.aborted?queueMicrotask(()=>E()):(c.addEventListener("abort",E,{__proto__:null,once:!0,[r]:!0}),g=()=>{c.removeEventListener("abort",E)}),{__proto__:null,[n](){var S;(S=g)===null||S===void 0||S()}}},AbortSignalAny:o.any||function(c){if(c.length===1)return c[0];const E=new a,g=()=>E.abort();return c.forEach(S=>{u(S,"signals"),S.addEventListener("abort",g,{once:!0})}),E.signal.addEventListener("abort",()=>{c.forEach(S=>S.removeEventListener("abort",g))},{once:!0}),E.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Ys);var Re=Ys.exports,fo={};const{format:fd,inspect:qr,AggregateError:dd}=Re,ud=globalThis.AggregateError||dd,cd=Symbol("kIsNodeError"),hd=["string","function","number","object","Function","Object","boolean","bigint","symbol"],bd=/^([A-Z][a-z0-9]*)+$/,pd="__node_internal_",tn={};function Tt(e,t){if(!e)throw new tn.ERR_INTERNAL_ASSERTION(t)}function Xo(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function yd(e,t,r){if(typeof t=="function")return Tt(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return Tt(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:fd(t,...r)}function pe(e,t,r){r||(r=Error);class n extends r{constructor(...a){super(yd(e,t,a))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[cd]=!0,tn[e]=n}function Qo(e){const t=pd+e.name;return Object.defineProperty(e,"name",{value:t}),e}function gd(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new ud([t,e],t.message);return r.code=t.code,r}return e||t}let _d=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new tn.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};pe("ERR_ASSERTION","%s",Error);pe("ERR_INVALID_ARG_TYPE",(e,t,r)=>{Tt(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],a=[],i=[];for(const d of t)Tt(typeof d=="string","All expected entries have to be of type string"),hd.includes(d)?o.push(d.toLowerCase()):bd.test(d)?a.push(d):(Tt(d!=="object",'The value "object" should be written as "Object"'),i.push(d));if(a.length>0){const d=o.indexOf("object");d!==-1&&(o.splice(o,d,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const d=o.pop();n+=`one of type ${o.join(", ")}, or ${d}`}}(a.length>0||i.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const d=a.pop();n+=`an instance of ${a.join(", ")}, or ${d}`}}i.length>0&&(n+=" or ")}switch(i.length){case 0:break;case 1:i[0].toLowerCase()!==i[0]&&(n+="an "),n+=`${i[0]}`;break;case 2:n+=`one of ${i[0]} or ${i[1]}`;break;default:{const d=i.pop();n+=`one of ${i.join(", ")}, or ${d}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var l;if((l=r.constructor)!==null&&l!==void 0&&l.name)n+=`. Received an instance of ${r.constructor.name}`;else{const d=qr(r,{depth:-1});n+=`. Received ${d}`}}else{let d=qr(r,{colors:!1});d.length>25&&(d=`${d.slice(0,25)}...`),n+=`. Received type ${typeof r} (${d})`}return n},TypeError);pe("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=qr(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);pe("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const o=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${o}.`},TypeError);pe("ERR_MISSING_ARGS",(...e)=>{Tt(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);pe("ERR_OUT_OF_RANGE",(e,t,r)=>{Tt(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Xo(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Xo(n)),n+="n"):n=qr(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);pe("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);pe("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);pe("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);pe("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);pe("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);pe("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);pe("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);pe("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);pe("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);pe("ERR_STREAM_WRITE_AFTER_END","write after end",Error);pe("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var me={AbortError:_d,aggregateTwoErrors:Qo(gd),hideStackFrames:Qo,codes:tn};const{ArrayIsArray:uo,ArrayPrototypeIncludes:zs,ArrayPrototypeJoin:Xs,ArrayPrototypeMap:wd,NumberIsInteger:co,NumberIsNaN:Ed,NumberMAX_SAFE_INTEGER:Sd,NumberMIN_SAFE_INTEGER:Rd,NumberParseInt:Ad,ObjectPrototypeHasOwnProperty:Id,RegExpPrototypeExec:Qs,String:md,StringPrototypeToUpperCase:vd,StringPrototypeTrim:Td}=se,{hideStackFrames:De,codes:{ERR_SOCKET_BAD_PORT:Cd,ERR_INVALID_ARG_TYPE:ge,ERR_INVALID_ARG_VALUE:Yt,ERR_OUT_OF_RANGE:Nt,ERR_UNKNOWN_SIGNAL:Zo}}=me,{normalizeEncoding:Nd}=Re,{isAsyncFunction:Od,isArrayBufferView:$d}=Re.types,ea={};function xd(e){return e===(e|0)}function Dd(e){return e===e>>>0}const Ld=/^[0-7]+$/,Pd="must be a 32-bit unsigned integer or an octal string";function kd(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(Qs(Ld,e)===null)throw new Yt(t,e,Pd);e=Ad(e,8)}return Zs(e,t),e}const Md=De((e,t,r=Rd,n=Sd)=>{if(typeof e!="number")throw new ge(t,"number",e);if(!co(e))throw new Nt(t,"an integer",e);if(e<r||e>n)throw new Nt(t,`>= ${r} && <= ${n}`,e)}),Vd=De((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new ge(t,"number",e);if(!co(e))throw new Nt(t,"an integer",e);if(e<r||e>n)throw new Nt(t,`>= ${r} && <= ${n}`,e)}),Zs=De((e,t,r=!1)=>{if(typeof e!="number")throw new ge(t,"number",e);if(!co(e))throw new Nt(t,"an integer",e);const n=r?1:0,o=4294967295;if(e<n||e>o)throw new Nt(t,`>= ${n} && <= ${o}`,e)});function ho(e,t){if(typeof e!="string")throw new ge(t,"string",e)}function jd(e,t,r=void 0,n){if(typeof e!="number")throw new ge(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&Ed(e))throw new Nt(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}const Fd=De((e,t,r)=>{if(!zs(r,e)){const o="must be one of: "+Xs(wd(r,a=>typeof a=="string"?`'${a}'`:md(a)),", ");throw new Yt(t,e,o)}});function el(e,t){if(typeof e!="boolean")throw new ge(t,"boolean",e)}function ti(e,t,r){return e==null||!Id(e,t)?r:e[t]}const Ud=De((e,t,r=null)=>{const n=ti(r,"allowArray",!1),o=ti(r,"allowFunction",!1);if(!ti(r,"nullable",!1)&&e===null||!n&&uo(e)||typeof e!="object"&&(!o||typeof e!="function"))throw new ge(t,"Object",e)}),Wd=De((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new ge(t,"a dictionary",e)}),rn=De((e,t,r=0)=>{if(!uo(e))throw new ge(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new Yt(t,e,n)}});function Bd(e,t){rn(e,t);for(let r=0;r<e.length;r++)ho(e[r],`${t}[${r}]`)}function Gd(e,t){rn(e,t);for(let r=0;r<e.length;r++)el(e[r],`${t}[${r}]`)}function Hd(e,t){rn(e,t);for(let r=0;r<e.length;r++){const n=e[r],o=`${t}[${r}]`;if(n==null)throw new ge(o,"AbortSignal",n);tl(n,o)}}function Kd(e,t="signal"){if(ho(e,t),ea[e]===void 0)throw ea[vd(e)]!==void 0?new Zo(e+" (signals must use all capital letters)"):new Zo(e)}const Jd=De((e,t="buffer")=>{if(!$d(e))throw new ge(t,["Buffer","TypedArray","DataView"],e)});function qd(e,t){const r=Nd(t),n=e.length;if(r==="hex"&&n%2!==0)throw new Yt("encoding",t,`is invalid for data of length ${n}`)}function Yd(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&Td(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new Cd(t,e,r);return e|0}const tl=De((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new ge(t,"AbortSignal",e)}),zd=De((e,t)=>{if(typeof e!="function")throw new ge(t,"Function",e)}),Xd=De((e,t)=>{if(typeof e!="function"||Od(e))throw new ge(t,"Function",e)}),Qd=De((e,t)=>{if(e!==void 0)throw new ge(t,"undefined",e)});function Zd(e,t,r){if(!zs(r,e))throw new ge(t,`('${Xs(r,"|")}')`,e)}const eu=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ta(e,t){if(typeof e>"u"||!Qs(eu,e))throw new Yt(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function tu(e){if(typeof e=="string")return ta(e,"hints"),e;if(uo(e)){const t=e.length;let r="";if(t===0)return r;for(let n=0;n<t;n++){const o=e[n];ta(o,"hints"),r+=o,n!==t-1&&(r+=", ")}return r}throw new Yt("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var Ir={isInt32:xd,isUint32:Dd,parseFileMode:kd,validateArray:rn,validateStringArray:Bd,validateBooleanArray:Gd,validateAbortSignalArray:Hd,validateBoolean:el,validateBuffer:Jd,validateDictionary:Wd,validateEncoding:qd,validateFunction:zd,validateInt32:Vd,validateInteger:Md,validateNumber:jd,validateObject:Ud,validateOneOf:Fd,validatePlainFunction:Xd,validatePort:Yd,validateSignalName:Kd,validateString:ho,validateUint32:Zs,validateUndefined:Qd,validateUnion:Zd,validateAbortSignal:tl,validateLinkHeaderValue:tu},bo={exports:{}};const{SymbolAsyncIterator:ra,SymbolIterator:na,SymbolFor:$t}=se,rl=$t("nodejs.stream.destroyed"),nl=$t("nodejs.stream.errored"),Mi=$t("nodejs.stream.readable"),Vi=$t("nodejs.stream.writable"),il=$t("nodejs.stream.disturbed"),ru=$t("nodejs.webstream.isClosedPromise"),nu=$t("nodejs.webstream.controllerErrorFunction");function nn(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function on(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function iu(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function Je(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function ol(e){return!!(e&&!Je(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function al(e){return!!(e&&!Je(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function sl(e){return!!(e&&!Je(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function ou(e){return ol(e)||al(e)||sl(e)}function au(e,t){return e==null?!1:t===!0?typeof e[ra]=="function":t===!1?typeof e[na]=="function":typeof e[ra]=="function"||typeof e[na]=="function"}function an(e){if(!Je(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[rl]||n!=null&&n.destroyed)}function ll(e){if(!on(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function su(e,t){if(!on(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function lu(e){if(!nn(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function fl(e,t){if(!nn(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function dl(e){return e&&e[Mi]!=null?e[Mi]:typeof(e==null?void 0:e.readable)!="boolean"?null:an(e)?!1:nn(e)&&e.readable&&!fl(e)}function ul(e){return e&&e[Vi]!=null?e[Vi]:typeof(e==null?void 0:e.writable)!="boolean"?null:an(e)?!1:on(e)&&e.writable&&!ll(e)}function fu(e,t){return Je(e)?an(e)?!0:!((t==null?void 0:t.readable)!==!1&&dl(e)||(t==null?void 0:t.writable)!==!1&&ul(e)):null}function du(e){var t,r;return Je(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function uu(e){var t,r;return Je(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function cu(e){if(!Je(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&cl(e)?e._closed:null}function cl(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function hl(e){return typeof e._sent100=="boolean"&&cl(e)}function hu(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function bu(e){if(!Je(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&hl(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function pu(e){var t;return!!(e&&((t=e[il])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function yu(e){var t,r,n,o,a,i,l,d,u,h;return!!(e&&((t=(r=(n=(o=(a=(i=e[nl])!==null&&i!==void 0?i:e.readableErrored)!==null&&a!==void 0?a:e.writableErrored)!==null&&o!==void 0?o:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(d=e._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((h=e._writableState)===null||h===void 0)&&h.errored))}var it={isDestroyed:an,kIsDestroyed:rl,isDisturbed:pu,kIsDisturbed:il,isErrored:yu,kIsErrored:nl,isReadable:dl,kIsReadable:Mi,kIsClosedPromise:ru,kControllerErrorFunction:nu,kIsWritable:Vi,isClosed:cu,isDuplexNodeStream:iu,isFinished:fu,isIterable:au,isReadableNodeStream:nn,isReadableStream:ol,isReadableEnded:lu,isReadableFinished:fl,isReadableErrored:uu,isNodeStream:Je,isWebStream:ou,isWritable:ul,isWritableNodeStream:on,isWritableStream:al,isWritableEnded:ll,isWritableFinished:su,isWritableErrored:du,isServerRequest:hu,isServerResponse:hl,willEmitClose:bu,isTransformStream:sl};const st=Ie,{AbortError:bl,codes:gu}=me,{ERR_INVALID_ARG_TYPE:_u,ERR_STREAM_PREMATURE_CLOSE:ia}=gu,{kEmptyObject:ji,once:Fi}=Re,{validateAbortSignal:wu,validateFunction:Eu,validateObject:Su,validateBoolean:Ru}=Ir,{Promise:Au,PromisePrototypeThen:Iu,SymbolDispose:pl}=se,{isClosed:mu,isReadable:oa,isReadableNodeStream:ri,isReadableStream:vu,isReadableFinished:aa,isReadableErrored:sa,isWritable:la,isWritableNodeStream:fa,isWritableStream:Tu,isWritableFinished:da,isWritableErrored:ua,isNodeStream:Cu,willEmitClose:Nu,kIsClosedPromise:Ou}=it;let Bt;function $u(e){return e.setHeader&&typeof e.abort=="function"}const Ui=()=>{};function yl(e,t,r){var n,o;if(arguments.length===2?(r=t,t=ji):t==null?t=ji:Su(t,"options"),Eu(r,"callback"),wu(t.signal,"options.signal"),r=Fi(r),vu(e)||Tu(e))return xu(e,t,r);if(!Cu(e))throw new _u("stream",["ReadableStream","WritableStream","Stream"],e);const a=(n=t.readable)!==null&&n!==void 0?n:ri(e),i=(o=t.writable)!==null&&o!==void 0?o:fa(e),l=e._writableState,d=e._readableState,u=()=>{e.writable||b()};let h=Nu(e)&&ri(e)===a&&fa(e)===i,_=da(e,!1);const b=()=>{_=!0,e.destroyed&&(h=!1),!(h&&(!e.readable||a))&&(!a||c)&&r.call(e)};let c=aa(e,!1);const E=()=>{c=!0,e.destroyed&&(h=!1),!(h&&(!e.writable||i))&&(!i||_)&&r.call(e)},g=v=>{r.call(e,v)};let S=mu(e);const T=()=>{S=!0;const v=ua(e)||sa(e);if(v&&typeof v!="boolean")return r.call(e,v);if(a&&!c&&ri(e,!0)&&!aa(e,!1))return r.call(e,new ia);if(i&&!_&&!da(e,!1))return r.call(e,new ia);r.call(e)},$=()=>{S=!0;const v=ua(e)||sa(e);if(v&&typeof v!="boolean")return r.call(e,v);r.call(e)},w=()=>{e.req.on("finish",b)};$u(e)?(e.on("complete",b),h||e.on("abort",T),e.req?w():e.on("request",w)):i&&!l&&(e.on("end",u),e.on("close",u)),!h&&typeof e.aborted=="boolean"&&e.on("aborted",T),e.on("end",E),e.on("finish",b),t.error!==!1&&e.on("error",g),e.on("close",T),S?st.nextTick(T):l!=null&&l.errorEmitted||d!=null&&d.errorEmitted?h||st.nextTick($):(!a&&(!h||oa(e))&&(_||la(e)===!1)||!i&&(!h||la(e))&&(c||oa(e)===!1)||d&&e.req&&e.aborted)&&st.nextTick($);const B=()=>{r=Ui,e.removeListener("aborted",T),e.removeListener("complete",b),e.removeListener("abort",T),e.removeListener("request",w),e.req&&e.req.removeListener("finish",b),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",b),e.removeListener("end",E),e.removeListener("error",g),e.removeListener("close",T)};if(t.signal&&!S){const v=()=>{const x=r;B(),x.call(e,new bl(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)st.nextTick(v);else{Bt=Bt||Re.addAbortListener;const x=Bt(t.signal,v),U=r;r=Fi((...F)=>{x[pl](),U.apply(e,F)})}}return B}function xu(e,t,r){let n=!1,o=Ui;if(t.signal)if(o=()=>{n=!0,r.call(e,new bl(void 0,{cause:t.signal.reason}))},t.signal.aborted)st.nextTick(o);else{Bt=Bt||Re.addAbortListener;const i=Bt(t.signal,o),l=r;r=Fi((...d)=>{i[pl](),l.apply(e,d)})}const a=(...i)=>{n||st.nextTick(()=>r.apply(e,i))};return Iu(e[Ou].promise,a,a),Ui}function Du(e,t){var r;let n=!1;return t===null&&(t=ji),(r=t)!==null&&r!==void 0&&r.cleanup&&(Ru(t.cleanup,"cleanup"),n=t.cleanup),new Au((o,a)=>{const i=yl(e,t,l=>{n&&i(),l?a(l):o()})})}bo.exports=yl;bo.exports.finished=Du;var ht=bo.exports;const We=Ie,{aggregateTwoErrors:Lu,codes:{ERR_MULTIPLE_CALLBACK:Pu},AbortError:ku}=me,{Symbol:gl}=se,{kIsDestroyed:Mu,isDestroyed:Vu,isFinished:ju,isServerRequest:Fu}=it,_l=gl("kDestroy"),Wi=gl("kConstruct");function wl(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function Uu(e,t){const r=this._readableState,n=this._writableState,o=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(wl(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?ca(this,e,t):this.once(_l,function(a){ca(this,Lu(a,e),t)}),this)}function ca(e,t,r){let n=!1;function o(a){if(n)return;n=!0;const i=e._readableState,l=e._writableState;wl(a,l,i),l&&(l.closed=!0),i&&(i.closed=!0),typeof r=="function"&&r(a),a?We.nextTick(Wu,e,a):We.nextTick(El,e)}try{e._destroy(t||null,o)}catch(a){o(a)}}function Wu(e,t){Bi(e,t),El(e)}function El(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function Bi(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function Bu(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function Gi(e,t,r){const n=e._readableState,o=e._writableState;if(o!=null&&o.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||o!=null&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),n&&!n.errored&&(n.errored=t),r?We.nextTick(Bi,e,t):Bi(e,t))}function Gu(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(Wi,t),!(e.listenerCount(Wi)>1)&&We.nextTick(Hu,e)}function Hu(e){let t=!1;function r(n){if(t){Gi(e,n??new Pu);return}t=!0;const o=e._readableState,a=e._writableState,i=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),i.destroyed?e.emit(_l,n):n?Gi(e,n,!0):We.nextTick(Ku,e)}try{e._construct(n=>{We.nextTick(r,n)})}catch(n){We.nextTick(r,n)}}function Ku(e){e.emit(Wi)}function ha(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function Sl(e){e.emit("close")}function Ju(e,t){e.emit("error",t),We.nextTick(Sl,e)}function qu(e,t){!e||Vu(e)||(!t&&!ju(e)&&(t=new ku),Fu(e)?(e.socket=null,e.destroy(t)):ha(e)?e.abort():ha(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?We.nextTick(Ju,e,t):We.nextTick(Sl,e),e.destroyed||(e[Mu]=!0))}var zt={construct:Gu,destroyer:qu,destroy:Uu,undestroy:Bu,errorOrDestroy:Gi};const{ArrayIsArray:Yu,ObjectSetPrototypeOf:Rl}=se,{EventEmitter:sn}=ct;function ln(e){sn.call(this,e)}Rl(ln.prototype,sn.prototype);Rl(ln,sn);ln.prototype.pipe=function(e,t){const r=this;function n(h){e.writable&&e.write(h)===!1&&r.pause&&r.pause()}r.on("data",n);function o(){r.readable&&r.resume&&r.resume()}e.on("drain",o),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",i),r.on("close",l));let a=!1;function i(){a||(a=!0,e.end())}function l(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function d(h){u(),sn.listenerCount(this,"error")===0&&this.emit("error",h)}Hi(r,"error",d),Hi(e,"error",d);function u(){r.removeListener("data",n),e.removeListener("drain",o),r.removeListener("end",i),r.removeListener("close",l),r.removeListener("error",d),e.removeListener("error",d),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e};function Hi(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Yu(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var po={Stream:ln,prependListener:Hi},Al={exports:{}};(function(e){const{SymbolDispose:t}=se,{AbortError:r,codes:n}=me,{isNodeStream:o,isWebStream:a,kControllerErrorFunction:i}=it,l=ht,{ERR_INVALID_ARG_TYPE:d}=n;let u;const h=(_,b)=>{if(typeof _!="object"||!("aborted"in _))throw new d(b,"AbortSignal",_)};e.exports.addAbortSignal=function(b,c){if(h(b,"signal"),!o(c)&&!a(c))throw new d("stream",["ReadableStream","WritableStream","Stream"],c);return e.exports.addAbortSignalNoValidate(b,c)},e.exports.addAbortSignalNoValidate=function(_,b){if(typeof _!="object"||!("aborted"in _))return b;const c=o(b)?()=>{b.destroy(new r(void 0,{cause:_.reason}))}:()=>{b[i](new r(void 0,{cause:_.reason}))};if(_.aborted)c();else{u=u||Re.addAbortListener;const E=u(_,c);l(b,E[t])}return b}})(Al);var fn=Al.exports;const{StringPrototypeSlice:ba,SymbolIterator:zu,TypedArrayPrototypeSet:$r,Uint8Array:Xu}=se,{Buffer:ni}=be,{inspect:Qu}=Re;var Zu=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return ni.alloc(0);const r=ni.allocUnsafe(t>>>0);let n=this.head,o=0;for(;n;)$r(r,n.data,o),o+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const o=n.slice(0,t);return this.head.data=n.slice(t),o}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[zu](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,o=0;do{const a=n.data;if(t>a.length)r+=a,t-=a.length;else{t===a.length?(r+=a,++o,n.next?this.head=n.next:this.head=this.tail=null):(r+=ba(a,0,t),this.head=n,n.data=ba(a,t));break}++o}while((n=n.next)!==null);return this.length-=o,r}_getBuffer(t){const r=ni.allocUnsafe(t),n=t;let o=this.head,a=0;do{const i=o.data;if(t>i.length)$r(r,i,n-t),t-=i.length;else{t===i.length?($r(r,i,n-t),++a,o.next?this.head=o.next:this.head=this.tail=null):($r(r,new Xu(i.buffer,i.byteOffset,t),n-t),this.head=o,o.data=i.slice(t));break}++a}while((o=o.next)!==null);return this.length-=a,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return Qu(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:ec,NumberIsInteger:tc}=se,{validateInteger:rc}=Ir,{ERR_INVALID_ARG_VALUE:nc}=me.codes;let Il=16*1024,ml=16;function ic(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function vl(e){return e?ml:Il}function oc(e,t){rc(t,"value",0),e?ml=t:Il=t}function ac(e,t,r,n){const o=ic(t,n,r);if(o!=null){if(!tc(o)||o<0){const a=n?`options.${r}`:"options.highWaterMark";throw new nc(a,o)}return ec(o)}return vl(e.objectMode)}var dn={getHighWaterMark:ac,getDefaultHighWaterMark:vl,setDefaultHighWaterMark:oc};const pa=Ie,{PromisePrototypeThen:sc,SymbolAsyncIterator:ya,SymbolIterator:ga}=se,{Buffer:lc}=be,{ERR_INVALID_ARG_TYPE:fc,ERR_STREAM_NULL_VALUES:dc}=me.codes;function uc(e,t,r){let n;if(typeof t=="string"||t instanceof lc)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let o;if(t&&t[ya])o=!0,n=t[ya]();else if(t&&t[ga])o=!1,n=t[ga]();else throw new fc("iterable",["Iterable"],t);const a=new e({objectMode:!0,highWaterMark:1,...r});let i=!1;a._read=function(){i||(i=!0,d())},a._destroy=function(u,h){sc(l(u),()=>pa.nextTick(h,u),_=>pa.nextTick(h,_||u))};async function l(u){const h=u!=null,_=typeof n.throw=="function";if(h&&_){const{value:b,done:c}=await n.throw(u);if(await b,c)return}if(typeof n.return=="function"){const{value:b}=await n.return();await b}}async function d(){for(;;){try{const{value:u,done:h}=o?await n.next():n.next();if(h)a.push(null);else{const _=u&&typeof u.then=="function"?await u:u;if(_===null)throw i=!1,new dc;if(a.push(_))continue;i=!1}}catch(u){a.destroy(u)}break}}return a}var Tl=uc,ii,_a;function un(){if(_a)return ii;_a=1;const e=Ie,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:a,ObjectKeys:i,ObjectSetPrototypeOf:l,Promise:d,SafeSet:u,SymbolAsyncDispose:h,SymbolAsyncIterator:_,Symbol:b}=se;ii=P,P.ReadableState=ue;const{EventEmitter:c}=ct,{Stream:E,prependListener:g}=po,{Buffer:S}=be,{addAbortSignal:T}=fn,$=ht;let w=Re.debuglog("stream",s=>{w=s});const B=Zu,v=zt,{getHighWaterMark:x,getDefaultHighWaterMark:U}=dn,{aggregateTwoErrors:F,codes:{ERR_INVALID_ARG_TYPE:W,ERR_METHOD_NOT_IMPLEMENTED:ee,ERR_OUT_OF_RANGE:J,ERR_STREAM_PUSH_AFTER_EOF:k,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:R},AbortError:V}=me,{validateObject:M}=Ir,j=b("kPaused"),{StringDecoder:X}=ks,Q=Tl;l(P.prototype,E.prototype),l(P,E);const z=()=>{},{errorOrDestroy:Z}=v,G=1,de=2,L=4,te=8,fe=16,Te=32,Ce=64,Ne=128,Pe=256,pt=512,ke=1024,Oe=2048,p=4096,y=8192,A=16384,N=32768,O=65536,K=1<<17,Y=1<<18;function H(s){return{enumerable:!1,get(){return(this.state&s)!==0},set(f){f?this.state|=s:this.state&=~s}}}a(ue.prototype,{objectMode:H(G),ended:H(de),endEmitted:H(L),reading:H(te),constructed:H(fe),sync:H(Te),needReadable:H(Ce),emittedReadable:H(Ne),readableListening:H(Pe),resumeScheduled:H(pt),errorEmitted:H(ke),emitClose:H(Oe),autoDestroy:H(p),destroyed:H(y),closed:H(A),closeEmitted:H(N),multiAwaitDrain:H(O),readingMore:H(K),dataEmitted:H(Y)});function ue(s,f,I){typeof I!="boolean"&&(I=f instanceof et()),this.state=Oe|p|fe|Te,s&&s.objectMode&&(this.state|=G),I&&s&&s.readableObjectMode&&(this.state|=G),this.highWaterMark=s?x(this,s,"readableHighWaterMark",I):U(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[j]=null,s&&s.emitClose===!1&&(this.state&=~Oe),s&&s.autoDestroy===!1&&(this.state&=~p),this.errored=null,this.defaultEncoding=s&&s.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,s&&s.encoding&&(this.decoder=new X(s.encoding),this.encoding=s.encoding)}function P(s){if(!(this instanceof P))return new P(s);const f=this instanceof et();this._readableState=new ue(s,this,f),s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy),typeof s.construct=="function"&&(this._construct=s.construct),s.signal&&!f&&T(s.signal,this)),E.call(this,s),v.construct(this,()=>{this._readableState.needReadable&&ze(this,this._readableState)})}P.prototype.destroy=v.destroy,P.prototype._undestroy=v.undestroy,P.prototype._destroy=function(s,f){f(s)},P.prototype[c.captureRejectionSymbol]=function(s){this.destroy(s)},P.prototype[h]=function(){let s;return this.destroyed||(s=this.readableEnded?null:new V,this.destroy(s)),new d((f,I)=>$(this,m=>m&&m!==s?I(m):f(null)))},P.prototype.push=function(s,f){return he(this,s,f,!1)},P.prototype.unshift=function(s,f){return he(this,s,f,!0)};function he(s,f,I,m){w("readableAddChunk",f);const C=s._readableState;let ne;if(C.state&G||(typeof f=="string"?(I=I||C.defaultEncoding,C.encoding!==I&&(m&&C.encoding?f=S.from(f,I).toString(C.encoding):(f=S.from(f,I),I=""))):f instanceof S?I="":E._isUint8Array(f)?(f=E._uint8ArrayToBuffer(f),I=""):f!=null&&(ne=new W("chunk",["string","Buffer","Uint8Array"],f))),ne)Z(s,ne);else if(f===null)C.state&=~te,Wn(s,C);else if(C.state&G||f&&f.length>0)if(m)if(C.state&L)Z(s,new R);else{if(C.destroyed||C.errored)return!1;yt(s,C,f,!0)}else if(C.ended)Z(s,new k);else{if(C.destroyed||C.errored)return!1;C.state&=~te,C.decoder&&!I?(f=C.decoder.write(f),C.objectMode||f.length!==0?yt(s,C,f,!1):ze(s,C)):yt(s,C,f,!1)}else m||(C.state&=~te,ze(s,C));return!C.ended&&(C.length<C.highWaterMark||C.length===0)}function yt(s,f,I,m){f.flowing&&f.length===0&&!f.sync&&s.listenerCount("data")>0?(f.state&O?f.awaitDrainWriters.clear():f.awaitDrainWriters=null,f.dataEmitted=!0,s.emit("data",I)):(f.length+=f.objectMode?1:I.length,m?f.buffer.unshift(I):f.buffer.push(I),f.state&Ce&&Ye(s)),ze(s,f)}P.prototype.isPaused=function(){const s=this._readableState;return s[j]===!0||s.flowing===!1},P.prototype.setEncoding=function(s){const f=new X(s);this._readableState.decoder=f,this._readableState.encoding=this._readableState.decoder.encoding;const I=this._readableState.buffer;let m="";for(const C of I)m+=f.write(C);return I.clear(),m!==""&&I.push(m),this._readableState.length=m.length,this};const Fn=1073741824;function Un(s){if(s>Fn)throw new J("size","<= 1GiB",s);return s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++,s}function Zt(s,f){return s<=0||f.length===0&&f.ended?0:f.state&G?1:n(s)?f.flowing&&f.length?f.buffer.first().length:f.length:s<=f.length?s:f.ended?f.length:0}P.prototype.read=function(s){w("read",s),s===void 0?s=NaN:r(s)||(s=o(s,10));const f=this._readableState,I=s;if(s>f.highWaterMark&&(f.highWaterMark=Un(s)),s!==0&&(f.state&=~Ne),s===0&&f.needReadable&&((f.highWaterMark!==0?f.length>=f.highWaterMark:f.length>0)||f.ended))return w("read: emitReadable",f.length,f.ended),f.length===0&&f.ended?gt(this):Ye(this),null;if(s=Zt(s,f),s===0&&f.ended)return f.length===0&&gt(this),null;let m=(f.state&Ce)!==0;if(w("need readable",m),(f.length===0||f.length-s<f.highWaterMark)&&(m=!0,w("length less than watermark",m)),f.ended||f.reading||f.destroyed||f.errored||!f.constructed)m=!1,w("reading, ended or constructing",m);else if(m){w("do read"),f.state|=te|Te,f.length===0&&(f.state|=Ce);try{this._read(f.highWaterMark)}catch(ne){Z(this,ne)}f.state&=~Te,f.reading||(s=Zt(I,f))}let C;return s>0?C=ir(s,f):C=null,C===null?(f.needReadable=f.length<=f.highWaterMark,s=0):(f.length-=s,f.multiAwaitDrain?f.awaitDrainWriters.clear():f.awaitDrainWriters=null),f.length===0&&(f.ended||(f.needReadable=!0),I!==s&&f.ended&&gt(this)),C!==null&&!f.errorEmitted&&!f.closeEmitted&&(f.dataEmitted=!0,this.emit("data",C)),C};function Wn(s,f){if(w("onEofChunk"),!f.ended){if(f.decoder){const I=f.decoder.end();I&&I.length&&(f.buffer.push(I),f.length+=f.objectMode?1:I.length)}f.ended=!0,f.sync?Ye(s):(f.needReadable=!1,f.emittedReadable=!0,er(s))}}function Ye(s){const f=s._readableState;w("emitReadable",f.needReadable,f.emittedReadable),f.needReadable=!1,f.emittedReadable||(w("emitReadable",f.flowing),f.emittedReadable=!0,e.nextTick(er,s))}function er(s){const f=s._readableState;w("emitReadable_",f.destroyed,f.length,f.ended),!f.destroyed&&!f.errored&&(f.length||f.ended)&&(s.emit("readable"),f.emittedReadable=!1),f.needReadable=!f.flowing&&!f.ended&&f.length<=f.highWaterMark,rr(s)}function ze(s,f){!f.readingMore&&f.constructed&&(f.readingMore=!0,e.nextTick(Bn,s,f))}function Bn(s,f){for(;!f.reading&&!f.ended&&(f.length<f.highWaterMark||f.flowing&&f.length===0);){const I=f.length;if(w("maybeReadMore read 0"),s.read(0),I===f.length)break}f.readingMore=!1}P.prototype._read=function(s){throw new ee("_read()")},P.prototype.pipe=function(s,f){const I=this,m=this._readableState;m.pipes.length===1&&(m.multiAwaitDrain||(m.multiAwaitDrain=!0,m.awaitDrainWriters=new u(m.awaitDrainWriters?[m.awaitDrainWriters]:[]))),m.pipes.push(s),w("pipe count=%d opts=%j",m.pipes.length,f);const ne=(!f||f.end!==!1)&&s!==e.stdout&&s!==e.stderr?ar:Me;m.endEmitted?e.nextTick(ne):I.once("end",ne),s.on("unpipe",oe);function oe(Ee,ce){w("onunpipe"),Ee===I&&ce&&ce.hasUnpiped===!1&&(ce.hasUnpiped=!0,Xn())}function ar(){w("onend"),s.end()}let we,sr=!1;function Xn(){w("cleanup"),s.removeListener("close",Et),s.removeListener("finish",St),we&&s.removeListener("drain",we),s.removeListener("error",wt),s.removeListener("unpipe",oe),I.removeListener("end",ar),I.removeListener("end",Me),I.removeListener("data",fr),sr=!0,we&&m.awaitDrainWriters&&(!s._writableState||s._writableState.needDrain)&&we()}function lr(){sr||(m.pipes.length===1&&m.pipes[0]===s?(w("false write response, pause",0),m.awaitDrainWriters=s,m.multiAwaitDrain=!1):m.pipes.length>1&&m.pipes.includes(s)&&(w("false write response, pause",m.awaitDrainWriters.size),m.awaitDrainWriters.add(s)),I.pause()),we||(we=Gn(I,s),s.on("drain",we))}I.on("data",fr);function fr(Ee){w("ondata");const ce=s.write(Ee);w("dest.write",ce),ce===!1&&lr()}function wt(Ee){if(w("onerror",Ee),Me(),s.removeListener("error",wt),s.listenerCount("error")===0){const ce=s._writableState||s._readableState;ce&&!ce.errorEmitted?Z(s,Ee):s.emit("error",Ee)}}g(s,"error",wt);function Et(){s.removeListener("finish",St),Me()}s.once("close",Et);function St(){w("onfinish"),s.removeListener("close",Et),Me()}s.once("finish",St);function Me(){w("unpipe"),I.unpipe(s)}return s.emit("pipe",I),s.writableNeedDrain===!0?lr():m.flowing||(w("pipe resume"),I.resume()),s};function Gn(s,f){return function(){const m=s._readableState;m.awaitDrainWriters===f?(w("pipeOnDrain",1),m.awaitDrainWriters=null):m.multiAwaitDrain&&(w("pipeOnDrain",m.awaitDrainWriters.size),m.awaitDrainWriters.delete(f)),(!m.awaitDrainWriters||m.awaitDrainWriters.size===0)&&s.listenerCount("data")&&s.resume()}}P.prototype.unpipe=function(s){const f=this._readableState,I={hasUnpiped:!1};if(f.pipes.length===0)return this;if(!s){const C=f.pipes;f.pipes=[],this.pause();for(let ne=0;ne<C.length;ne++)C[ne].emit("unpipe",this,{hasUnpiped:!1});return this}const m=t(f.pipes,s);return m===-1?this:(f.pipes.splice(m,1),f.pipes.length===0&&this.pause(),s.emit("unpipe",this,I),this)},P.prototype.on=function(s,f){const I=E.prototype.on.call(this,s,f),m=this._readableState;return s==="data"?(m.readableListening=this.listenerCount("readable")>0,m.flowing!==!1&&this.resume()):s==="readable"&&!m.endEmitted&&!m.readableListening&&(m.readableListening=m.needReadable=!0,m.flowing=!1,m.emittedReadable=!1,w("on readable",m.length,m.reading),m.length?Ye(this):m.reading||e.nextTick(Hn,this)),I},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(s,f){const I=E.prototype.removeListener.call(this,s,f);return s==="readable"&&e.nextTick(tr,this),I},P.prototype.off=P.prototype.removeListener,P.prototype.removeAllListeners=function(s){const f=E.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&e.nextTick(tr,this),f};function tr(s){const f=s._readableState;f.readableListening=s.listenerCount("readable")>0,f.resumeScheduled&&f[j]===!1?f.flowing=!0:s.listenerCount("data")>0?s.resume():f.readableListening||(f.flowing=null)}function Hn(s){w("readable nexttick read 0"),s.read(0)}P.prototype.resume=function(){const s=this._readableState;return s.flowing||(w("resume"),s.flowing=!s.readableListening,Kn(this,s)),s[j]=!1,this};function Kn(s,f){f.resumeScheduled||(f.resumeScheduled=!0,e.nextTick(Jn,s,f))}function Jn(s,f){w("resume",f.reading),f.reading||s.read(0),f.resumeScheduled=!1,s.emit("resume"),rr(s),f.flowing&&!f.reading&&s.read(0)}P.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[j]=!0,this};function rr(s){const f=s._readableState;for(w("flow",f.flowing);f.flowing&&s.read()!==null;);}P.prototype.wrap=function(s){let f=!1;s.on("data",m=>{!this.push(m)&&s.pause&&(f=!0,s.pause())}),s.on("end",()=>{this.push(null)}),s.on("error",m=>{Z(this,m)}),s.on("close",()=>{this.destroy()}),s.on("destroy",()=>{this.destroy()}),this._read=()=>{f&&s.resume&&(f=!1,s.resume())};const I=i(s);for(let m=1;m<I.length;m++){const C=I[m];this[C]===void 0&&typeof s[C]=="function"&&(this[C]=s[C].bind(s))}return this},P.prototype[_]=function(){return nr(this)},P.prototype.iterator=function(s){return s!==void 0&&M(s,"options"),nr(this,s)};function nr(s,f){typeof s.read!="function"&&(s=P.wrap(s,{objectMode:!0}));const I=qn(s,f);return I.stream=s,I}async function*qn(s,f){let I=z;function m(oe){this===s?(I(),I=z):I=oe}s.on("readable",m);let C;const ne=$(s,{writable:!1},oe=>{C=oe?F(C,oe):null,I(),I=z});try{for(;;){const oe=s.destroyed?null:s.read();if(oe!==null)yield oe;else{if(C)throw C;if(C===null)return;await new d(m)}}}catch(oe){throw C=F(C,oe),C}finally{(C||(f==null?void 0:f.destroyOnReturn)!==!1)&&(C===void 0||s._readableState.autoDestroy)?v.destroyer(s,null):(s.off("readable",m),ne())}}a(P.prototype,{readable:{__proto__:null,get(){const s=this._readableState;return!!s&&s.readable!==!1&&!s.destroyed&&!s.errorEmitted&&!s.endEmitted},set(s){this._readableState&&(this._readableState.readable=!!s)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(s){this._readableState&&(this._readableState.flowing=s)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(s){this._readableState&&(this._readableState.destroyed=s)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(ue.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[j]!==!1},set(s){this[j]=!!s}}}),P._fromList=ir;function ir(s,f){if(f.length===0)return null;let I;return f.objectMode?I=f.buffer.shift():!s||s>=f.length?(f.decoder?I=f.buffer.join(""):f.buffer.length===1?I=f.buffer.first():I=f.buffer.concat(f.length),f.buffer.clear()):I=f.buffer.consume(s,f.decoder),I}function gt(s){const f=s._readableState;w("endReadable",f.endEmitted),f.endEmitted||(f.ended=!0,e.nextTick(Yn,f,s))}function Yn(s,f){if(w("endReadableNT",s.endEmitted,s.length),!s.errored&&!s.closeEmitted&&!s.endEmitted&&s.length===0){if(s.endEmitted=!0,f.emit("end"),f.writable&&f.allowHalfOpen===!1)e.nextTick(zn,f);else if(s.autoDestroy){const I=f._writableState;(!I||I.autoDestroy&&(I.finished||I.writable===!1))&&f.destroy()}}}function zn(s){s.writable&&!s.writableEnded&&!s.destroyed&&s.end()}P.from=function(s,f){return Q(P,s,f)};let _t;function or(){return _t===void 0&&(_t={}),_t}return P.fromWeb=function(s,f){return or().newStreamReadableFromReadableStream(s,f)},P.toWeb=function(s,f){return or().newReadableStreamFromStreamReadable(s,f)},P.wrap=function(s,f){var I,m;return new P({objectMode:(I=(m=s.readableObjectMode)!==null&&m!==void 0?m:s.objectMode)!==null&&I!==void 0?I:!0,...f,destroy(C,ne){v.destroyer(s,C),ne(C)}}).wrap(s)},ii}var oi,wa;function yo(){if(wa)return oi;wa=1;const e=Ie,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:a,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:l,Symbol:d,SymbolHasInstance:u}=se;oi=M,M.WritableState=R;const{EventEmitter:h}=ct,_=po.Stream,{Buffer:b}=be,c=zt,{addAbortSignal:E}=fn,{getHighWaterMark:g,getDefaultHighWaterMark:S}=dn,{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:v,ERR_STREAM_ALREADY_FINISHED:x,ERR_STREAM_NULL_VALUES:U,ERR_STREAM_WRITE_AFTER_END:F,ERR_UNKNOWN_ENCODING:W}=me.codes,{errorOrDestroy:ee}=c;i(M.prototype,_.prototype),i(M,_);function J(){}const k=d("kOnFinished");function R(p,y,A){typeof A!="boolean"&&(A=y instanceof et()),this.objectMode=!!(p&&p.objectMode),A&&(this.objectMode=this.objectMode||!!(p&&p.writableObjectMode)),this.highWaterMark=p?g(this,p,"writableHighWaterMark",A):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const N=!!(p&&p.decodeStrings===!1);this.decodeStrings=!N,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Z.bind(void 0,y),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!p||p.emitClose!==!1,this.autoDestroy=!p||p.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function V(p){p.buffered=[],p.bufferedIndex=0,p.allBuffers=!0,p.allNoop=!0}R.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},o(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function M(p){const y=this instanceof et();if(!y&&!n(M,this))return new M(p);this._writableState=new R(p,this,y),p&&(typeof p.write=="function"&&(this._write=p.write),typeof p.writev=="function"&&(this._writev=p.writev),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.final=="function"&&(this._final=p.final),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&E(p.signal,this)),_.call(this,p),c.construct(this,()=>{const A=this._writableState;A.writing||te(this,A),Ne(this,A)})}o(M,u,{__proto__:null,value:function(p){return n(this,p)?!0:this!==M?!1:p&&p._writableState instanceof R}}),M.prototype.pipe=function(){ee(this,new B)};function j(p,y,A,N){const O=p._writableState;if(typeof A=="function")N=A,A=O.defaultEncoding;else{if(!A)A=O.defaultEncoding;else if(A!=="buffer"&&!b.isEncoding(A))throw new W(A);typeof N!="function"&&(N=J)}if(y===null)throw new U;if(!O.objectMode)if(typeof y=="string")O.decodeStrings!==!1&&(y=b.from(y,A),A="buffer");else if(y instanceof b)A="buffer";else if(_._isUint8Array(y))y=_._uint8ArrayToBuffer(y),A="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],y);let K;return O.ending?K=new F:O.destroyed&&(K=new v("write")),K?(e.nextTick(N,K),ee(p,K,!0),K):(O.pendingcb++,X(p,O,y,A,N))}M.prototype.write=function(p,y,A){return j(this,p,y,A)===!0},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const p=this._writableState;p.corked&&(p.corked--,p.writing||te(this,p))},M.prototype.setDefaultEncoding=function(y){if(typeof y=="string"&&(y=l(y)),!b.isEncoding(y))throw new W(y);return this._writableState.defaultEncoding=y,this};function X(p,y,A,N,O){const K=y.objectMode?1:A.length;y.length+=K;const Y=y.length<y.highWaterMark;return Y||(y.needDrain=!0),y.writing||y.corked||y.errored||!y.constructed?(y.buffered.push({chunk:A,encoding:N,callback:O}),y.allBuffers&&N!=="buffer"&&(y.allBuffers=!1),y.allNoop&&O!==J&&(y.allNoop=!1)):(y.writelen=K,y.writecb=O,y.writing=!0,y.sync=!0,p._write(A,N,y.onwrite),y.sync=!1),Y&&!y.errored&&!y.destroyed}function Q(p,y,A,N,O,K,Y){y.writelen=N,y.writecb=Y,y.writing=!0,y.sync=!0,y.destroyed?y.onwrite(new v("write")):A?p._writev(O,y.onwrite):p._write(O,K,y.onwrite),y.sync=!1}function z(p,y,A,N){--y.pendingcb,N(A),L(y),ee(p,A)}function Z(p,y){const A=p._writableState,N=A.sync,O=A.writecb;if(typeof O!="function"){ee(p,new w);return}A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0,y?(y.stack,A.errored||(A.errored=y),p._readableState&&!p._readableState.errored&&(p._readableState.errored=y),N?e.nextTick(z,p,A,y,O):z(p,A,y,O)):(A.buffered.length>A.bufferedIndex&&te(p,A),N?A.afterWriteTickInfo!==null&&A.afterWriteTickInfo.cb===O?A.afterWriteTickInfo.count++:(A.afterWriteTickInfo={count:1,cb:O,stream:p,state:A},e.nextTick(G,A.afterWriteTickInfo)):de(p,A,1,O))}function G({stream:p,state:y,count:A,cb:N}){return y.afterWriteTickInfo=null,de(p,y,A,N)}function de(p,y,A,N){for(!y.ending&&!p.destroyed&&y.length===0&&y.needDrain&&(y.needDrain=!1,p.emit("drain"));A-- >0;)y.pendingcb--,N();y.destroyed&&L(y),Ne(p,y)}function L(p){if(p.writing)return;for(let O=p.bufferedIndex;O<p.buffered.length;++O){var y;const{chunk:K,callback:Y}=p.buffered[O],H=p.objectMode?1:K.length;p.length-=H,Y((y=p.errored)!==null&&y!==void 0?y:new v("write"))}const A=p[k].splice(0);for(let O=0;O<A.length;O++){var N;A[O]((N=p.errored)!==null&&N!==void 0?N:new v("end"))}V(p)}function te(p,y){if(y.corked||y.bufferProcessing||y.destroyed||!y.constructed)return;const{buffered:A,bufferedIndex:N,objectMode:O}=y,K=A.length-N;if(!K)return;let Y=N;if(y.bufferProcessing=!0,K>1&&p._writev){y.pendingcb-=K-1;const H=y.allNoop?J:P=>{for(let he=Y;he<A.length;++he)A[he].callback(P)},ue=y.allNoop&&Y===0?A:t(A,Y);ue.allBuffers=y.allBuffers,Q(p,y,!0,y.length,ue,"",H),V(y)}else{do{const{chunk:H,encoding:ue,callback:P}=A[Y];A[Y++]=null;const he=O?1:H.length;Q(p,y,!1,he,H,ue,P)}while(Y<A.length&&!y.writing);Y===A.length?V(y):Y>256?(A.splice(0,Y),y.bufferedIndex=0):y.bufferedIndex=Y}y.bufferProcessing=!1}M.prototype._write=function(p,y,A){if(this._writev)this._writev([{chunk:p,encoding:y}],A);else throw new $("_write()")},M.prototype._writev=null,M.prototype.end=function(p,y,A){const N=this._writableState;typeof p=="function"?(A=p,p=null,y=null):typeof y=="function"&&(A=y,y=null);let O;if(p!=null){const K=j(this,p,y);K instanceof r&&(O=K)}return N.corked&&(N.corked=1,this.uncork()),O||(!N.errored&&!N.ending?(N.ending=!0,Ne(this,N,!0),N.ended=!0):N.finished?O=new x("end"):N.destroyed&&(O=new v("end"))),typeof A=="function"&&(O||N.finished?e.nextTick(A,O):N[k].push(A)),this};function fe(p){return p.ending&&!p.destroyed&&p.constructed&&p.length===0&&!p.errored&&p.buffered.length===0&&!p.finished&&!p.writing&&!p.errorEmitted&&!p.closeEmitted}function Te(p,y){let A=!1;function N(O){if(A){ee(p,O??w());return}if(A=!0,y.pendingcb--,O){const K=y[k].splice(0);for(let Y=0;Y<K.length;Y++)K[Y](O);ee(p,O,y.sync)}else fe(y)&&(y.prefinished=!0,p.emit("prefinish"),y.pendingcb++,e.nextTick(Pe,p,y))}y.sync=!0,y.pendingcb++;try{p._final(N)}catch(O){N(O)}y.sync=!1}function Ce(p,y){!y.prefinished&&!y.finalCalled&&(typeof p._final=="function"&&!y.destroyed?(y.finalCalled=!0,Te(p,y)):(y.prefinished=!0,p.emit("prefinish")))}function Ne(p,y,A){fe(y)&&(Ce(p,y),y.pendingcb===0&&(A?(y.pendingcb++,e.nextTick((N,O)=>{fe(O)?Pe(N,O):O.pendingcb--},p,y)):fe(y)&&(y.pendingcb++,Pe(p,y))))}function Pe(p,y){y.pendingcb--,y.finished=!0;const A=y[k].splice(0);for(let N=0;N<A.length;N++)A[N]();if(p.emit("finish"),y.autoDestroy){const N=p._readableState;(!N||N.autoDestroy&&(N.endEmitted||N.readable===!1))&&p.destroy()}}a(M.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(p){this._writableState&&(this._writableState.destroyed=p)}},writable:{__proto__:null,get(){const p=this._writableState;return!!p&&p.writable!==!1&&!p.destroyed&&!p.errored&&!p.ending&&!p.ended},set(p){this._writableState&&(this._writableState.writable=!!p)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const p=this._writableState;return p?!p.destroyed&&!p.ending&&p.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const pt=c.destroy;M.prototype.destroy=function(p,y){const A=this._writableState;return!A.destroyed&&(A.bufferedIndex<A.buffered.length||A[k].length)&&e.nextTick(L,A),pt.call(this,p,y),this},M.prototype._undestroy=c.undestroy,M.prototype._destroy=function(p,y){y(p)},M.prototype[h.captureRejectionSymbol]=function(p){this.destroy(p)};let ke;function Oe(){return ke===void 0&&(ke={}),ke}return M.fromWeb=function(p,y){return Oe().newStreamWritableFromWritableStream(p,y)},M.toWeb=function(p){return Oe().newWritableStreamFromStreamWritable(p)},oi}var ai,Ea;function cc(){if(Ea)return ai;Ea=1;const e=Ie,t=be,{isReadable:r,isWritable:n,isIterable:o,isNodeStream:a,isReadableNodeStream:i,isWritableNodeStream:l,isDuplexNodeStream:d,isReadableStream:u,isWritableStream:h}=it,_=ht,{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:E}}=me,{destroyer:g}=zt,S=et(),T=un(),$=yo(),{createDeferredPromise:w}=Re,B=Tl,v=globalThis.Blob||t.Blob,x=typeof v<"u"?function(R){return R instanceof v}:function(R){return!1},U=globalThis.AbortController||Ge().AbortController,{FunctionPrototypeCall:F}=se;class W extends S{constructor(R){super(R),(R==null?void 0:R.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(R==null?void 0:R.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}ai=function k(R,V){if(d(R))return R;if(i(R))return J({readable:R});if(l(R))return J({writable:R});if(a(R))return J({writable:!1,readable:!1});if(u(R))return J({readable:T.fromWeb(R)});if(h(R))return J({writable:$.fromWeb(R)});if(typeof R=="function"){const{value:j,write:X,final:Q,destroy:z}=ee(R);if(o(j))return B(W,j,{objectMode:!0,write:X,final:Q,destroy:z});const Z=j==null?void 0:j.then;if(typeof Z=="function"){let G;const de=F(Z,j,L=>{if(L!=null)throw new E("nully","body",L)},L=>{g(G,L)});return G=new W({objectMode:!0,readable:!1,write:X,final(L){Q(async()=>{try{await de,e.nextTick(L,null)}catch(te){e.nextTick(L,te)}})},destroy:z})}throw new E("Iterable, AsyncIterable or AsyncFunction",V,j)}if(x(R))return k(R.arrayBuffer());if(o(R))return B(W,R,{objectMode:!0,writable:!1});if(u(R==null?void 0:R.readable)&&h(R==null?void 0:R.writable))return W.fromWeb(R);if(typeof(R==null?void 0:R.writable)=="object"||typeof(R==null?void 0:R.readable)=="object"){const j=R!=null&&R.readable?i(R==null?void 0:R.readable)?R==null?void 0:R.readable:k(R.readable):void 0,X=R!=null&&R.writable?l(R==null?void 0:R.writable)?R==null?void 0:R.writable:k(R.writable):void 0;return J({readable:j,writable:X})}const M=R==null?void 0:R.then;if(typeof M=="function"){let j;return F(M,R,X=>{X!=null&&j.push(X),j.push(null)},X=>{g(j,X)}),j=new W({objectMode:!0,writable:!1,read(){}})}throw new c(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],R)};function ee(k){let{promise:R,resolve:V}=w();const M=new U,j=M.signal;return{value:k(async function*(){for(;;){const Q=R;R=null;const{chunk:z,done:Z,cb:G}=await Q;if(e.nextTick(G),Z)return;if(j.aborted)throw new b(void 0,{cause:j.reason});({promise:R,resolve:V}=w()),yield z}}(),{signal:j}),write(Q,z,Z){const G=V;V=null,G({chunk:Q,done:!1,cb:Z})},final(Q){const z=V;V=null,z({done:!0,cb:Q})},destroy(Q,z){M.abort(),z(Q)}}}function J(k){const R=k.readable&&typeof k.readable.read!="function"?T.wrap(k.readable):k.readable,V=k.writable;let M=!!r(R),j=!!n(V),X,Q,z,Z,G;function de(L){const te=Z;Z=null,te?te(L):L&&G.destroy(L)}return G=new W({readableObjectMode:!!(R!=null&&R.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:M,writable:j}),j&&(_(V,L=>{j=!1,L&&g(R,L),de(L)}),G._write=function(L,te,fe){V.write(L,te)?fe():X=fe},G._final=function(L){V.end(),Q=L},V.on("drain",function(){if(X){const L=X;X=null,L()}}),V.on("finish",function(){if(Q){const L=Q;Q=null,L()}})),M&&(_(R,L=>{M=!1,L&&g(R,L),de(L)}),R.on("readable",function(){if(z){const L=z;z=null,L()}}),R.on("end",function(){G.push(null)}),G._read=function(){for(;;){const L=R.read();if(L===null){z=G._read;return}if(!G.push(L))return}}),G._destroy=function(L,te){!L&&Z!==null&&(L=new b),z=null,X=null,Q=null,Z===null?te(L):(Z=te,g(V,L),g(R,L))},G}return ai}var si,Sa;function et(){if(Sa)return si;Sa=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=se;si=i;const o=un(),a=yo();n(i.prototype,o.prototype),n(i,o);{const h=r(a.prototype);for(let _=0;_<h.length;_++){const b=h[_];i.prototype[b]||(i.prototype[b]=a.prototype[b])}}function i(h){if(!(this instanceof i))return new i(h);o.call(this,h),a.call(this,h),h?(this.allowHalfOpen=h.allowHalfOpen!==!1,h.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),h.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(i.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(h){this._readableState&&this._writableState&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}}});let l;function d(){return l===void 0&&(l={}),l}i.fromWeb=function(h,_){return d().newStreamDuplexFromReadableWritablePair(h,_)},i.toWeb=function(h){return d().newReadableWritablePairFromDuplex(h)};let u;return i.from=function(h){return u||(u=cc()),u(h,"body")},si}const{ObjectSetPrototypeOf:Cl,Symbol:hc}=se;var Nl=tt;const{ERR_METHOD_NOT_IMPLEMENTED:bc}=me.codes,go=et(),{getHighWaterMark:pc}=dn;Cl(tt.prototype,go.prototype);Cl(tt,go);const Er=hc("kCallback");function tt(e){if(!(this instanceof tt))return new tt(e);const t=e?pc(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),go.call(this,e),this._readableState.sync=!1,this[Er]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",yc)}function Ki(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function yc(){this._final!==Ki&&Ki.call(this)}tt.prototype._final=Ki;tt.prototype._transform=function(e,t,r){throw new bc("_transform()")};tt.prototype._write=function(e,t,r){const n=this._readableState,o=this._writableState,a=n.length;this._transform(e,t,(i,l)=>{if(i){r(i);return}l!=null&&this.push(l),o.ended||a===n.length||n.length<n.highWaterMark?r():this[Er]=r})};tt.prototype._read=function(){if(this[Er]){const e=this[Er];this[Er]=null,e()}};const{ObjectSetPrototypeOf:Ol}=se;var $l=Ht;const _o=Nl;Ol(Ht.prototype,_o.prototype);Ol(Ht,_o);function Ht(e){if(!(this instanceof Ht))return new Ht(e);_o.call(this,e)}Ht.prototype._transform=function(e,t,r){r(null,e)};const _r=Ie,{ArrayIsArray:gc,Promise:_c,SymbolAsyncIterator:wc,SymbolDispose:Ec}=se,Yr=ht,{once:Sc}=Re,Rc=zt,Ra=et(),{aggregateTwoErrors:Ac,codes:{ERR_INVALID_ARG_TYPE:Ji,ERR_INVALID_RETURN_VALUE:li,ERR_MISSING_ARGS:Ic,ERR_STREAM_DESTROYED:mc,ERR_STREAM_PREMATURE_CLOSE:vc},AbortError:Tc}=me,{validateFunction:Cc,validateAbortSignal:Nc}=Ir,{isIterable:mt,isReadable:fi,isReadableNodeStream:Gr,isNodeStream:Aa,isTransformStream:jt,isWebStream:Oc,isReadableStream:di,isReadableFinished:$c}=it,xc=globalThis.AbortController||Ge().AbortController;let ui,ci,hi;function Ia(e,t,r){let n=!1;e.on("close",()=>{n=!0});const o=Yr(e,{readable:t,writable:r},a=>{n=!a});return{destroy:a=>{n||(n=!0,Rc.destroyer(e,a||new mc("pipe")))},cleanup:o}}function Dc(e){return Cc(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function bi(e){if(mt(e))return e;if(Gr(e))return Lc(e);throw new Ji("val",["Readable","Iterable","AsyncIterable"],e)}async function*Lc(e){ci||(ci=un()),yield*ci.prototype[wc].call(e)}async function xr(e,t,r,{end:n}){let o,a=null;const i=u=>{if(u&&(o=u),a){const h=a;a=null,h()}},l=()=>new _c((u,h)=>{o?h(o):a=()=>{o?h(o):u()}});t.on("drain",i);const d=Yr(t,{readable:!1},i);try{t.writableNeedDrain&&await l();for await(const u of e)t.write(u)||await l();n&&(t.end(),await l()),r()}catch(u){r(o!==u?Ac(o,u):u)}finally{d(),t.off("drain",i)}}async function pi(e,t,r,{end:n}){jt(t)&&(t=t.writable);const o=t.getWriter();try{for await(const a of e)await o.ready,o.write(a).catch(()=>{});await o.ready,n&&await o.close(),r()}catch(a){try{await o.abort(a),r(a)}catch(i){r(i)}}}function Pc(...e){return xl(e,Sc(Dc(e)))}function xl(e,t,r){if(e.length===1&&gc(e[0])&&(e=e[0]),e.length<2)throw new Ic("streams");const n=new xc,o=n.signal,a=r==null?void 0:r.signal,i=[];Nc(a,"options.signal");function l(){E(new Tc)}hi=hi||Re.addAbortListener;let d;a&&(d=hi(a,l));let u,h;const _=[];let b=0;function c($){E($,--b===0)}function E($,w){var B;if($&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=$),!(!u&&!w)){for(;_.length;)_.shift()(u);(B=d)===null||B===void 0||B[Ec](),n.abort(),w&&(u||i.forEach(v=>v()),_r.nextTick(t,u,h))}}let g;for(let $=0;$<e.length;$++){const w=e[$],B=$<e.length-1,v=$>0,x=B||(r==null?void 0:r.end)!==!1,U=$===e.length-1;if(Aa(w)){let F=function(W){W&&W.name!=="AbortError"&&W.code!=="ERR_STREAM_PREMATURE_CLOSE"&&c(W)};if(x){const{destroy:W,cleanup:ee}=Ia(w,B,v);_.push(W),fi(w)&&U&&i.push(ee)}w.on("error",F),fi(w)&&U&&i.push(()=>{w.removeListener("error",F)})}if($===0)if(typeof w=="function"){if(g=w({signal:o}),!mt(g))throw new li("Iterable, AsyncIterable or Stream","source",g)}else mt(w)||Gr(w)||jt(w)?g=w:g=Ra.from(w);else if(typeof w=="function"){if(jt(g)){var S;g=bi((S=g)===null||S===void 0?void 0:S.readable)}else g=bi(g);if(g=w(g,{signal:o}),B){if(!mt(g,!0))throw new li("AsyncIterable",`transform[${$-1}]`,g)}else{var T;ui||(ui=$l);const F=new ui({objectMode:!0}),W=(T=g)===null||T===void 0?void 0:T.then;if(typeof W=="function")b++,W.call(g,k=>{h=k,k!=null&&F.write(k),x&&F.end(),_r.nextTick(c)},k=>{F.destroy(k),_r.nextTick(c,k)});else if(mt(g,!0))b++,xr(g,F,c,{end:x});else if(di(g)||jt(g)){const k=g.readable||g;b++,xr(k,F,c,{end:x})}else throw new li("AsyncIterable or Promise","destination",g);g=F;const{destroy:ee,cleanup:J}=Ia(g,!1,!0);_.push(ee),U&&i.push(J)}}else if(Aa(w)){if(Gr(g)){b+=2;const F=kc(g,w,c,{end:x});fi(w)&&U&&i.push(F)}else if(jt(g)||di(g)){const F=g.readable||g;b++,xr(F,w,c,{end:x})}else if(mt(g))b++,xr(g,w,c,{end:x});else throw new Ji("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=w}else if(Oc(w)){if(Gr(g))b++,pi(bi(g),w,c,{end:x});else if(di(g)||mt(g))b++,pi(g,w,c,{end:x});else if(jt(g))b++,pi(g.readable,w,c,{end:x});else throw new Ji("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=w}else g=Ra.from(w)}return(o!=null&&o.aborted||a!=null&&a.aborted)&&_r.nextTick(l),g}function kc(e,t,r,{end:n}){let o=!1;if(t.on("close",()=>{o||r(new vc)}),e.pipe(t,{end:!1}),n){let a=function(){o=!0,t.end()};$c(e)?_r.nextTick(a):e.once("end",a)}else r();return Yr(e,{readable:!0,writable:!1},a=>{const i=e._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&i&&i.ended&&!i.errored&&!i.errorEmitted?e.once("end",r).once("error",r):r(a)}),Yr(t,{readable:!1,writable:!0},r)}var wo={pipelineImpl:xl,pipeline:Pc};const{pipeline:Mc}=wo,Dr=et(),{destroyer:Vc}=zt,{isNodeStream:Lr,isReadable:ma,isWritable:va,isWebStream:yi,isTransformStream:Rt,isWritableStream:Ta,isReadableStream:Ca}=it,{AbortError:jc,codes:{ERR_INVALID_ARG_VALUE:Na,ERR_MISSING_ARGS:Fc}}=me,Uc=ht;var Dl=function(...t){if(t.length===0)throw new Fc("streams");if(t.length===1)return Dr.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=Dr.from(t[0])),typeof t[t.length-1]=="function"){const c=t.length-1;t[c]=Dr.from(t[c])}for(let c=0;c<t.length;++c)if(!(!Lr(t[c])&&!yi(t[c]))){if(c<t.length-1&&!(ma(t[c])||Ca(t[c])||Rt(t[c])))throw new Na(`streams[${c}]`,r[c],"must be readable");if(c>0&&!(va(t[c])||Ta(t[c])||Rt(t[c])))throw new Na(`streams[${c}]`,r[c],"must be writable")}let n,o,a,i,l;function d(c){const E=i;i=null,E?E(c):c?l.destroy(c):!b&&!_&&l.destroy()}const u=t[0],h=Mc(t,d),_=!!(va(u)||Ta(u)||Rt(u)),b=!!(ma(h)||Ca(h)||Rt(h));if(l=new Dr({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(h!=null&&h.readableObjectMode),writable:_,readable:b}),_){if(Lr(u))l._write=function(E,g,S){u.write(E,g)?S():n=S},l._final=function(E){u.end(),o=E},u.on("drain",function(){if(n){const E=n;n=null,E()}});else if(yi(u)){const g=(Rt(u)?u.writable:u).getWriter();l._write=async function(S,T,$){try{await g.ready,g.write(S).catch(()=>{}),$()}catch(w){$(w)}},l._final=async function(S){try{await g.ready,g.close().catch(()=>{}),o=S}catch(T){S(T)}}}const c=Rt(h)?h.readable:h;Uc(c,()=>{if(o){const E=o;o=null,E()}})}if(b){if(Lr(h))h.on("readable",function(){if(a){const c=a;a=null,c()}}),h.on("end",function(){l.push(null)}),l._read=function(){for(;;){const c=h.read();if(c===null){a=l._read;return}if(!l.push(c))return}};else if(yi(h)){const E=(Rt(h)?h.readable:h).getReader();l._read=async function(){for(;;)try{const{value:g,done:S}=await E.read();if(!l.push(g))return;if(S){l.push(null);return}}catch{return}}}}return l._destroy=function(c,E){!c&&i!==null&&(c=new jc),a=null,n=null,o=null,i===null?E(c):(i=E,Lr(h)&&Vc(h,c))},l};const Wc=globalThis.AbortController||Ge().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Bc,ERR_INVALID_ARG_TYPE:mr,ERR_MISSING_ARGS:Gc,ERR_OUT_OF_RANGE:Hc},AbortError:He}=me,{validateAbortSignal:xt,validateInteger:Oa,validateObject:Dt}=Ir,Kc=se.Symbol("kWeak"),Jc=se.Symbol("kResistStopPropagation"),{finished:qc}=ht,Yc=Dl,{addAbortSignalNoValidate:zc}=fn,{isWritable:Xc,isNodeStream:Qc}=it,{deprecate:Zc}=Re,{ArrayPrototypePush:eh,Boolean:th,MathFloor:$a,Number:rh,NumberIsNaN:nh,Promise:xa,PromiseReject:Da,PromiseResolve:ih,PromisePrototypeThen:La,Symbol:Ll}=se,zr=Ll("kEmpty"),Pa=Ll("kEof");function oh(e,t){if(t!=null&&Dt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal"),Qc(e)&&!Xc(e))throw new Bc("stream",e,"must be writable");const r=Yc(this,e);return t!=null&&t.signal&&zc(t.signal,r),r}function cn(e,t){if(typeof e!="function")throw new mr("fn",["Function","AsyncFunction"],e);t!=null&&Dt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal");let r=1;(t==null?void 0:t.concurrency)!=null&&(r=$a(t.concurrency));let n=r-1;return(t==null?void 0:t.highWaterMark)!=null&&(n=$a(t.highWaterMark)),Oa(r,"options.concurrency",1),Oa(n,"options.highWaterMark",0),n+=r,(async function*(){const a=Re.AbortSignalAny([t==null?void 0:t.signal].filter(th)),i=this,l=[],d={signal:a};let u,h,_=!1,b=0;function c(){_=!0,E()}function E(){b-=1,g()}function g(){h&&!_&&b<r&&l.length<n&&(h(),h=null)}async function S(){try{for await(let T of i){if(_)return;if(a.aborted)throw new He;try{if(T=e(T,d),T===zr)continue;T=ih(T)}catch($){T=Da($)}b+=1,La(T,E,c),l.push(T),u&&(u(),u=null),!_&&(l.length>=n||b>=r)&&await new xa($=>{h=$})}l.push(Pa)}catch(T){const $=Da(T);La($,E,c),l.push($)}finally{_=!0,u&&(u(),u=null)}}S();try{for(;;){for(;l.length>0;){const T=await l[0];if(T===Pa)return;if(a.aborted)throw new He;T!==zr&&(yield T),l.shift(),g()}await new xa(T=>{u=T})}}finally{_=!0,h&&(h(),h=null)}}).call(this)}function ah(e=void 0){return e!=null&&Dt(e,"options"),(e==null?void 0:e.signal)!=null&&xt(e.signal,"options.signal"),(async function*(){let r=0;for await(const o of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new He({cause:e.signal.reason});yield[r++,o]}}).call(this)}async function Pl(e,t=void 0){for await(const r of Eo.call(this,e,t))return!0;return!1}async function sh(e,t=void 0){if(typeof e!="function")throw new mr("fn",["Function","AsyncFunction"],e);return!await Pl.call(this,async(...r)=>!await e(...r),t)}async function lh(e,t){for await(const r of Eo.call(this,e,t))return r}async function fh(e,t){if(typeof e!="function")throw new mr("fn",["Function","AsyncFunction"],e);async function r(n,o){return await e(n,o),zr}for await(const n of cn.call(this,r,t));}function Eo(e,t){if(typeof e!="function")throw new mr("fn",["Function","AsyncFunction"],e);async function r(n,o){return await e(n,o)?n:zr}return cn.call(this,r,t)}let dh=class extends Gc{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}};async function uh(e,t,r){var n;if(typeof e!="function")throw new mr("reducer",["Function","AsyncFunction"],e);r!=null&&Dt(r,"options"),(r==null?void 0:r.signal)!=null&&xt(r.signal,"options.signal");let o=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const u=new He(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await qc(this.destroy(u)),u}const a=new Wc,i=a.signal;if(r!=null&&r.signal){const u={once:!0,[Kc]:this,[Jc]:!0};r.signal.addEventListener("abort",()=>a.abort(),u)}let l=!1;try{for await(const u of this){var d;if(l=!0,r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted)throw new He;o?t=await e(t,u,{signal:i}):(t=u,o=!0)}if(!l&&!o)throw new dh}finally{a.abort()}return t}async function ch(e){e!=null&&Dt(e,"options"),(e==null?void 0:e.signal)!=null&&xt(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new He(void 0,{cause:e.signal.reason});eh(t,n)}return t}function hh(e,t){const r=cn.call(this,e,t);return(async function*(){for await(const o of r)yield*o}).call(this)}function kl(e){if(e=rh(e),nh(e))return 0;if(e<0)throw new Hc("number",">= 0",e);return e}function bh(e,t=void 0){return t!=null&&Dt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal"),e=kl(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new He;for await(const a of this){var o;if(t!=null&&(o=t.signal)!==null&&o!==void 0&&o.aborted)throw new He;e--<=0&&(yield a)}}).call(this)}function ph(e,t=void 0){return t!=null&&Dt(t,"options"),(t==null?void 0:t.signal)!=null&&xt(t.signal,"options.signal"),e=kl(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new He;for await(const a of this){var o;if(t!=null&&(o=t.signal)!==null&&o!==void 0&&o.aborted)throw new He;if(e-- >0&&(yield a),e<=0)return}}).call(this)}fo.streamReturningOperators={asIndexedPairs:Zc(ah,"readable.asIndexedPairs will be removed in a future version."),drop:bh,filter:Eo,flatMap:hh,map:cn,take:ph,compose:oh};fo.promiseReturningOperators={every:sh,forEach:fh,reduce:uh,toArray:ch,some:Pl,find:lh};var gi,ka;function Ml(){if(ka)return gi;ka=1;const{ArrayPrototypePop:e,Promise:t}=se,{isIterable:r,isNodeStream:n,isWebStream:o}=it,{pipelineImpl:a}=wo,{finished:i}=ht;Vl();function l(...d){return new t((u,h)=>{let _,b;const c=d[d.length-1];if(c&&typeof c=="object"&&!n(c)&&!r(c)&&!o(c)){const E=e(d);_=E.signal,b=E.end}a(d,(E,g)=>{E?h(E):u(g)},{signal:_,end:b})})}return gi={finished:i,pipeline:l},gi}var Ma;function Vl(){if(Ma)return ei.exports;Ma=1;const{Buffer:e}=be,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=se,{promisify:{custom:o}}=Re,{streamReturningOperators:a,promiseReturningOperators:i}=fo,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=me,d=Dl,{setDefaultHighWaterMark:u,getDefaultHighWaterMark:h}=dn,{pipeline:_}=wo,{destroyer:b}=zt,c=ht,E=Ml(),g=it,S=ei.exports=po.Stream;S.isDestroyed=g.isDestroyed,S.isDisturbed=g.isDisturbed,S.isErrored=g.isErrored,S.isReadable=g.isReadable,S.isWritable=g.isWritable,S.Readable=un();for(const $ of r(a)){let B=function(...v){if(new.target)throw l();return S.Readable.from(n(w,this,v))};const w=a[$];t(B,"name",{__proto__:null,value:w.name}),t(B,"length",{__proto__:null,value:w.length}),t(S.Readable.prototype,$,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const $ of r(i)){let B=function(...v){if(new.target)throw l();return n(w,this,v)};const w=i[$];t(B,"name",{__proto__:null,value:w.name}),t(B,"length",{__proto__:null,value:w.length}),t(S.Readable.prototype,$,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}S.Writable=yo(),S.Duplex=et(),S.Transform=Nl,S.PassThrough=$l,S.pipeline=_;const{addAbortSignal:T}=fn;return S.addAbortSignal=T,S.finished=c,S.destroy=b,S.compose=d,S.setDefaultHighWaterMark=u,S.getDefaultHighWaterMark=h,t(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return E}}),t(_,o,{__proto__:null,enumerable:!0,get(){return E.pipeline}}),t(c,o,{__proto__:null,enumerable:!0,get(){return E.finished}}),S.Stream=S,S._isUint8Array=function(w){return w instanceof Uint8Array},S._uint8ArrayToBuffer=function(w){return e.from(w.buffer,w.byteOffset,w.byteLength)},ei.exports}(function(e){const t=Vl(),r=Ml(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(qs);var yh=qs.exports,hn={},ur={},cr={},bn={};Object.defineProperty(bn,"__esModule",{value:!0});bn.ContainerHandlerIdentifier=void 0;class gh{canCombineWithGraph(){return!0}async handle(t,r,n,o,a,i){let l;if(r.emittedStack[i+1]&&r.idStack[i+1])l=r.idStack[i+1][0];else{const h=await n.getContainerKey(o[i],o,i)!==null?await n.resourceToTerm(await r.getContext(o),o[i]):n.dataFactory.blankNode();if(!h){r.emittedStack[i]=!1;return}l=h,r.idStack[i+1]=[l]}let d=r.idStack[i];d||(d=r.idStack[i]=[]),d.some(u=>u.equals(l))||d.push(l),await r.handlePendingContainerFlushBuffers()||(r.emittedStack[i]=!1)}}bn.ContainerHandlerIdentifier=gh;var hr={},br={},Va;function pn(){if(Va)return br;Va=1,Object.defineProperty(br,"__esModule",{value:!0}),br.EntryHandlerPredicate=void 0;const e=Se,t=Lt();let r=class jl{static async handlePredicateObject(o,a,i,l,d,u,h,_,b){const c=await a.getPropertiesDepth(i,l),E=await a.getDepthOffsetGraph(l,i),g=l-E,S=o.idStack[c];if(S&&!b)for(const T of S)if(E>=0){const w=o.idStack[g-1];if(w)for(const B of w)a.emitQuadChecked(l,T,d,u,B,h,_);else h?(a.validateReverseSubject(u),o.getUnidentifiedGraphBufferSafe(g-1).push({subject:u,predicate:d,object:T,isEmbedded:_})):o.getUnidentifiedGraphBufferSafe(g-1).push({subject:T,predicate:d,object:u,isEmbedded:_})}else{const w=await a.getGraphContainerValue(i,c);a.emitQuadChecked(l,T,d,u,w,h,_)}else if(h&&a.validateReverseSubject(u),b){if(o.rdfstar){o.idStack[l]&&o.emitError(new e.ErrorCoded(`Found an illegal @id inside an annotation: ${o.idStack[l][0].value}`,e.ERROR_CODES.INVALID_ANNOTATION));for(let w=0;w<l;w++)await a.unaliasKeyword(i[w],i,w)==="@id"&&o.emitError(new e.ErrorCoded("Found an illegal annotation inside an embedded node",e.ERROR_CODES.INVALID_ANNOTATION));const T=o.getAnnotationsBufferSafe(c),$={predicate:d,object:u,reverse:h,nestedAnnotations:[],depth:c};T.push($);for(let w=T.length-2;w>=0;w--){const B=T[w];B.depth>c&&($.nestedAnnotations.push(B),T.splice(w,1))}}}else o.getUnidentifiedValueBufferSafe(c).push({predicate:d,object:u,reverse:h,isEmbedded:_})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(o,a,i,l,d){const u=i[l];if(u){const h=await o.getContext(i);if(!o.jsonLiteralStack[l]&&await a.predicateToTerm(h,i[l]))return t.Util.getContextValueType(h,u)==="@json"&&(o.jsonLiteralStack[l+1]=!0),!0}return!1}async test(o,a,i,l,d){return l[d]}async handle(o,a,i,l,d,u,h){const _=l[u],b=await o.getContext(l),c=await a.predicateToTerm(b,i);if(c){const E=await a.valueToTerm(b,i,d,u,l);if(E.length)for(let g of E){let S=await a.unaliasKeywordParent(l,u);const T=t.Util.isPropertyReverse(b,_,S);let $=0;for(;S==="@reverse"||typeof S=="number";)typeof S=="number"?$++:u--,S=await a.unaliasKeywordParent(l,u-$);const w=t.Util.isPropertyInEmbeddedNode(S);a.validateReverseInEmbeddedNode(i,T,w);const B=t.Util.isPropertyInAnnotationObject(S);if(d){const v="@list"in t.Util.getContextValueContainer(b,i);if(v||d["@list"]){if((v&&!Array.isArray(d)&&!d["@list"]||d["@list"]&&!Array.isArray(d["@list"]))&&g!==a.rdfNil){const x=a.dataFactory.blankNode();o.emitQuad(u,a.dataFactory.quad(x,a.rdfRest,a.rdfNil,a.getDefaultGraph())),o.emitQuad(u,a.dataFactory.quad(x,a.rdfFirst,g,a.getDefaultGraph())),g=x}if(T&&!o.allowSubjectList)throw new e.ErrorCoded(`Found illegal list value in subject position at ${i}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await jl.handlePredicateObject(o,a,l,u,c,g,T,w,B)}}}};return br.EntryHandlerPredicate=r,br}var ja;function _h(){if(ja)return hr;ja=1,Object.defineProperty(hr,"__esModule",{value:!0}),hr.ContainerHandlerIndex=void 0;const e=Se,t=pn(),r=Lt();let n=class{canCombineWithGraph(){return!0}async handle(a,i,l,d,u,h){if(!Array.isArray(u)){const _="@graph"in a,b=await i.getContext(d),c=d[h-1],E=r.Util.getContextValueIndex(b,c);if(E){if(e.Util.isPotentialKeyword(E))throw new e.ErrorCoded(`Keywords can not be used as @index value, got: ${E}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof E!="string")throw new e.ErrorCoded(`@index values must be strings, got: ${E}`,e.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof u!="object"){if(r.Util.getContextValueType(b,c)!=="@id")throw new e.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${u}`,e.ERROR_CODES.INVALID_VALUE_OBJECT);const T=l.resourceToTerm(b,u);T&&(i.idStack[h+1]=[T])}const S=l.createVocabOrBaseTerm(b,E);if(S){const T=await l.valueToTerm(b,E,await l.getContainerKey(d[h],d,h),h,d);if(_){const $=await l.getGraphContainerValue(d,h+1);for(const w of T)i.emitQuad(h,l.dataFactory.quad($,S,w,l.getDefaultGraph()))}else for(const $ of T)await t.EntryHandlerPredicate.handlePredicateObject(i,l,d,h+1,S,$,!1,!1,!1)}}const g=_?2:1;await i.newOnValueJob(d.slice(0,d.length-g),u,h-g,!0),await i.handlePendingContainerFlushBuffers()}i.emittedStack[h]=!1}};return hr.ContainerHandlerIndex=n,hr}var yn={};Object.defineProperty(yn,"__esModule",{value:!0});yn.ContainerHandlerLanguage=void 0;const Fa=Se;class wh{canCombineWithGraph(){return!1}async handle(t,r,n,o,a,i){const l=await n.getContainerKey(o[i],o,i);if(Array.isArray(a))a=a.map(d=>({"@value":d,"@language":l}));else{if(typeof a!="string")throw new Fa.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(a)}', but expected string`,Fa.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);a={"@value":a,"@language":l}}await r.newOnValueJob(o.slice(0,o.length-1),a,i-1,!0),r.emittedStack[i]=!1}}yn.ContainerHandlerLanguage=wh;var pr={},Ua;function Eh(){if(Ua)return pr;Ua=1,Object.defineProperty(pr,"__esModule",{value:!0}),pr.ContainerHandlerType=void 0;const e=pn(),t=Lt();let r=class{canCombineWithGraph(){return!1}async handle(o,a,i,l,d,u){if(!Array.isArray(d)){if(typeof d=="string"){const b=await a.getContext(l),E=t.Util.getContextValueType(b,l[u-1])==="@vocab"?await i.createVocabOrBaseTerm(b,d):await i.resourceToTerm(b,d);if(E){const g={"@id":E.termType==="NamedNode"?E.value:d};await a.newOnValueJob(l.slice(0,l.length-1),g,u-1,!0),a.idStack[u+1]=[E]}}else{const b=!!a.idStack[u+1];b||delete a.idStack[u],await a.newOnValueJob(l.slice(0,l.length-1),d,u-1,!0),b||(a.idStack[u+1]=a.idStack[u])}const h=await i.getContainerKey(l[u],l,u),_=h!==null?i.createVocabOrBaseTerm(await a.getContext(l),h):null;_&&await e.EntryHandlerPredicate.handlePredicateObject(a,i,l,u+1,i.rdfType,_,!1,!1,!1),await a.handlePendingContainerFlushBuffers()}a.emittedStack[u]=!1}};return pr.ContainerHandlerType=r,pr}var Wa;function Fl(){if(Wa)return cr;Wa=1,Object.defineProperty(cr,"__esModule",{value:!0}),cr.EntryHandlerContainer=void 0;const e=bn,t=_h(),r=yn,n=Eh(),o=Lt();let a=class at{static isSimpleGraphContainer(l){return"@graph"in l&&("@set"in l&&Object.keys(l).length===2||Object.keys(l).length===1)}static isComplexGraphContainer(l){return"@graph"in l&&("@set"in l&&Object.keys(l).length>2||!("@set"in l)&&Object.keys(l).length>1)}static getContainerGraphIndex(l,d,u){let h=at.isSimpleGraphContainer(l),_="";for(let b=d;b<u.length;b++)(!h||typeof u[b]=="number")&&(_+=":"+u[b]),!h&&typeof u[b]!="number"&&(h=!0);return _}static async getContainerHandler(l,d,u){const h={containers:{"@set":!0},depth:u,fallback:!0};let _=!1;const b=await l.getContext(d,2);for(let c=u-1;c>=0;c--)if(typeof d[c]!="number"){const E=o.Util.getContextValue(b,"@container",d[c],!1);if(E&&at.isSimpleGraphContainer(E))return{containers:E,depth:c+1,fallback:!1};const g=o.Util.getContextValue(b,"@container",d[c-1],!1);if(g){const S="@graph"in g;for(const T in at.CONTAINER_HANDLERS)if(g[T])return S?at.CONTAINER_HANDLERS[T].canCombineWithGraph()?{containers:g,depth:c,fallback:!1}:h:_?h:{containers:g,depth:c,fallback:!1};return h}else{if(_)return h;_=!0}}return h}static async isBufferableContainerHandler(l,d,u){const h=await at.getContainerHandler(l,d,u);return!h.fallback&&!("@graph"in h.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(l,d,u,h,_){return!!await this.test(l,d,null,u,h)}async test(l,d,u,h,_){const b=o.Util.getContextValueContainer(await l.getContext(h,2),h[_-1]);for(const c in at.CONTAINER_HANDLERS)if(b[c])return{containers:b,handler:at.CONTAINER_HANDLERS[c]};return null}async handle(l,d,u,h,_,b,c){return c.handler.handle(c.containers,l,d,h,_,b)}};return a.CONTAINER_HANDLERS={"@id":new e.ContainerHandlerIdentifier,"@index":new t.ContainerHandlerIndex,"@language":new r.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},cr.EntryHandlerContainer=a,cr}var Ba;function Lt(){if(Ba)return ur;Ba=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.Util=void 0;const e=Se,t=Vf,r=Fl(),n=jf;let o=class ie{constructor(i){this.parsingContext=i.parsingContext,this.dataFactory=i.dataFactory||new t.DataFactory,this.rdfFirst=this.dataFactory.namedNode(ie.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(ie.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(ie.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(ie.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(ie.RDF+"JSON")}static getContextValue(i,l,d,u){const h=i.getContextRaw()[d];if(!h)return u;const _=h[l];return _===void 0?u:_}static getContextValueContainer(i,l){return ie.getContextValue(i,"@container",l,{"@set":!0})}static getContextValueType(i,l){const d=ie.getContextValue(i,"@type",l,null);return d==="@none"?null:d}static getContextValueLanguage(i,l){return ie.getContextValue(i,"@language",l,i.getContextRaw()["@language"]||null)}static getContextValueDirection(i,l){return ie.getContextValue(i,"@direction",l,i.getContextRaw()["@direction"]||null)}static isContextValueReverse(i,l){return!!ie.getContextValue(i,"@reverse",l,null)}static getContextValueIndex(i,l){return ie.getContextValue(i,"@index",l,i.getContextRaw()["@index"]||null)}static isPropertyReverse(i,l,d){return d==="@reverse"!==ie.isContextValueReverse(i,l)}static isPropertyInEmbeddedNode(i){return i==="@id"}static isPropertyInAnnotationObject(i){return i==="@annotation"}static isValidIri(i){return i!==null&&e.Util.isValidIri(i)}static isPrefixArray(i,l){if(i.length>l.length)return!1;for(let d=0;d<i.length;d++)if(i[d]!==l[d])return!1;return!0}async validateValueIndexes(i){if(this.parsingContext.validateValueIndexes){const l={};for(const d of i)if(d&&typeof d=="object"){const u=d["@id"],h=d["@index"];if(u&&h){const _=l[u];if(_&&_!==h)throw new e.ErrorCoded(`Conflicting @index value for ${u}`,e.ERROR_CODES.CONFLICTING_INDEXES);l[u]=h}}}}async valueToTerm(i,l,d,u,h){if(ie.getContextValueType(i,l)==="@json")return[this.dataFactory.literal(this.valueToJsonString(d),this.rdfJson)];const _=typeof d;switch(_){case"object":if(d==null)return[];if(Array.isArray(d))return"@list"in ie.getContextValueContainer(i,l)?d.length===0?[this.rdfNil]:this.parsingContext.idStack[u+1]||[]:(await this.validateValueIndexes(d),[]);if(i=await this.getContextSelfOrPropertyScoped(i,l),"@context"in d&&(i=await this.parsingContext.parseContext(d["@context"],(await this.parsingContext.getContext(h,0)).getContextRaw())),d=await this.unaliasKeywords(d,h,u,i),"@value"in d){let b,c,E,g,S;for(l in d){const T=d[l];switch(l){case"@value":b=T;break;case"@language":c=T;break;case"@direction":E=T;break;case"@type":g=T;break;case"@index":S=T;break;case"@annotation":break;default:throw new e.ErrorCoded(`Unknown value entry '${l}' in @value: ${JSON.stringify(d)}`,e.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(g,h,u,!0,i)==="@json")return[this.dataFactory.literal(this.valueToJsonString(b),this.rdfJson)];if(b===null)return[];if(typeof b=="object")throw new e.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(b)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&S&&typeof S!="string")throw new e.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(S)}'`,e.ERROR_CODES.INVALID_INDEX_VALUE);if(c){if(typeof b!="string")throw new e.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(b)}'`,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!e.ContextParser.validateLanguage(c,this.parsingContext.strictValues,e.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(c=c.toLowerCase())}if(E){if(typeof b!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(b)}'`);if(!e.ContextParser.validateDirection(E,this.parsingContext.strictValues))return[]}if(c&&E&&this.parsingContext.rdfDirection){if(g)throw new e.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(u,b,c,E))}else if(c){if(g)throw new e.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(b,c)]}else if(E&&this.parsingContext.rdfDirection){if(g)throw new e.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(u,b,c,E))}else if(g){if(typeof g!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(g)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);const T=this.createVocabOrBaseTerm(i,g);if(!T)throw new e.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(g)}'`,e.ERROR_CODES.INVALID_TYPED_VALUE);if(T.termType!=="NamedNode")throw new e.ErrorCoded(`Illegal value type (${T.termType}): ${g}`,e.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(b,T)]}return await this.valueToTerm(new e.JsonLdContextNormalized({}),l,b,u,h)}else if("@set"in d){if(Object.keys(d).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${l}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in d){if(Object.keys(d).length>1)throw new e.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${l}'`,e.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const b=d["@list"];return Array.isArray(b)?b.length===0?[this.rdfNil]:this.parsingContext.idStack[u+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(h),l,b,u-1,h.slice(0,-1))}else{if("@reverse"in d&&typeof d["@reverse"]=="boolean")return[];if("@graph"in ie.getContextValueContainer(await this.parsingContext.getContext(h),l)){const b=this.parsingContext.graphContainerTermStack[u+1];return b?Object.values(b):[this.dataFactory.blankNode()]}else if("@id"in d){if(Object.keys(d).length>1&&(i=await this.parsingContext.getContext(h,0)),"@context"in d&&(i=await this.parsingContext.parseContext(d["@context"],i.getContextRaw())),d["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(i,d["@id"]));{const b=d["@id"];let c;if(typeof b=="object")if(this.parsingContext.rdfstar)c=this.parsingContext.idStack[u+1][0];else throw new e.ErrorCoded(`Found illegal @id '${d}'`,e.ERROR_CODES.INVALID_ID_VALUE);else c=this.resourceToTerm(i,b);return this.nullableTermToArray(c)}}else return this.parsingContext.emittedStack[u+1]||d&&typeof d=="object"&&Object.keys(d).length===0?this.parsingContext.idStack[u+1]||(this.parsingContext.idStack[u+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(u,await this.getContextSelfOrPropertyScoped(i,l),l,d,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(u,await this.getContextSelfOrPropertyScoped(i,l),l,(!!d).toString(),this.dataFactory.namedNode(ie.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(u,await this.getContextSelfOrPropertyScoped(i,l),l,d,this.dataFactory.namedNode(d%1===0&&d<1e21?ie.XSD_INTEGER:ie.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${_}`)),[]}}async getContextSelfOrPropertyScoped(i,l){const d=i.getContextRaw()[l];return d&&typeof d=="object"&&"@context"in d&&(i=await this.parsingContext.parseContext(d,i.getContextRaw(),!0)),i}nullableTermToArray(i){return i?[i]:[]}predicateToTerm(i,l){const d=i.expandTerm(l,!0,this.parsingContext.getExpandOptions());if(!d)return null;if(d[0]==="_"&&d[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(d.substr(2)):null;if(ie.isValidIri(d))return this.dataFactory.namedNode(d);if(d&&this.parsingContext.strictValues)this.parsingContext.emitError(new e.ErrorCoded(`Invalid predicate IRI: ${d}`,e.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(i,l){if(l.startsWith("_:"))return this.dataFactory.blankNode(l.substr(2));const d=i.expandTerm(l,!1,this.parsingContext.getExpandOptions());if(!ie.isValidIri(d))if(d&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${d}`));else return null;return this.dataFactory.namedNode(d)}createVocabOrBaseTerm(i,l){if(l.startsWith("_:"))return this.dataFactory.blankNode(l.substr(2));const d=this.parsingContext.getExpandOptions();let u=i.expandTerm(l,!0,d);if(u===l&&(u=i.expandTerm(l,!1,d)),!ie.isValidIri(u))if(u&&this.parsingContext.strictValues&&!u.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${u}`));else return null;return this.dataFactory.namedNode(u)}intToString(i,l){return typeof i=="number"?Number.isFinite(i)?i%1===0&&(!l||l.value!==ie.XSD_DOUBLE)?Number(i).toString():i.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):i>0?"INF":"-INF":i}stringValueToTerm(i,l,d,u,h){const _=ie.getContextValueType(l,d);if(_)if(_==="@id"){if(!h)return this.resourceToTerm(l,this.intToString(u,h))}else if(_==="@vocab"){if(!h)return this.createVocabOrBaseTerm(l,this.intToString(u,h))}else h=this.dataFactory.namedNode(_);if(!h){const b=ie.getContextValueLanguage(l,d),c=ie.getContextValueDirection(l,d);return c&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(i,this.intToString(u,h),b,c):this.dataFactory.literal(this.intToString(u,h),b)}return this.dataFactory.literal(this.intToString(u,h),h)}createLanguageDirectionLiteral(i,l,d,u){if(this.parsingContext.rdfDirection==="i18n-datatype")return d||(d=""),this.dataFactory.literal(l,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${d}_${u}`));{const h=this.dataFactory.blankNode(),_=this.getDefaultGraph();return this.parsingContext.emitQuad(i,this.dataFactory.quad(h,this.dataFactory.namedNode(ie.RDF+"value"),this.dataFactory.literal(l),_)),d&&this.parsingContext.emitQuad(i,this.dataFactory.quad(h,this.dataFactory.namedNode(ie.RDF+"language"),this.dataFactory.literal(d),_)),this.parsingContext.emitQuad(i,this.dataFactory.quad(h,this.dataFactory.namedNode(ie.RDF+"direction"),this.dataFactory.literal(u),_)),h}}valueToJsonString(i){return n(i)}async unaliasKeyword(i,l,d,u,h){if(Number.isInteger(i))return i;if(!u){const _=this.parsingContext.unaliasedKeywordCacheStack[d];if(_)return _}if(!e.Util.isPotentialKeyword(i)){h=h||await this.parsingContext.getContext(l);let _=h.getContextRaw()[i];_&&typeof _=="object"&&(_=_["@id"]),e.Util.isValidKeyword(_)&&(i=_)}return u?i:this.parsingContext.unaliasedKeywordCacheStack[d]=i}async unaliasKeywordParent(i,l){return await this.unaliasKeyword(l>0&&i[l-1],i,l-1)}async unaliasKeywords(i,l,d,u){const h={};for(const _ in i)h[await this.unaliasKeyword(_,l,d+1,!0,u)]=i[_];return h}async isLiteral(i,l){for(let d=l;d>=0;d--){if(await this.unaliasKeyword(i[d],i,d)==="@annotation")return!1;if(this.parsingContext.literalStack[d]||this.parsingContext.jsonLiteralStack[d])return!0}return!1}async getDepthOffsetGraph(i,l){for(let d=i-1;d>0;d--)if(await this.unaliasKeyword(l[d],l,d)==="@graph"){const u=(await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,l,d)).containers;return r.EntryHandlerContainer.isComplexGraphContainer(u)?-1:i-d-1}return-1}validateReverseSubject(i){if(i.termType==="Literal")throw new e.ErrorCoded(`Found illegal literal in subject position: ${i.value}`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(i,l){let d=this.getDefaultGraph();const{containers:u,depth:h}=await r.EntryHandlerContainer.getContainerHandler(this.parsingContext,i,l);if("@graph"in u){const _=r.EntryHandlerContainer.getContainerGraphIndex(u,h,i),b=this.parsingContext.graphContainerTermStack[h];if(d=b?b[_]:null,!d){let c=null;if("@id"in u){const E=await this.getContainerKey(i[h],i,h);E!==null&&(c=await this.resourceToTerm(await this.parsingContext.getContext(i),E))}c||(c=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[h]||(this.parsingContext.graphContainerTermStack[h]={}),d=this.parsingContext.graphContainerTermStack[h][_]=c}}return d}async getPropertiesDepth(i,l){let d=l;for(let u=l-1;u>0;u--)if(typeof i[u]!="number"){const h=await this.unaliasKeyword(i[u],i,u);if(h==="@reverse")return u;if(h==="@nest")d=u;else return d}return d}async getContainerKey(i,l,d){const u=await this.unaliasKeyword(i,l,d);return u==="@none"?null:u}validateReverseInEmbeddedNode(i,l,d){if(d&&l&&!this.parsingContext.rdfstarReverseInEmbedded)throw new e.ErrorCoded(`Illegal reverse property in embedded node in ${i}`,e.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(i,l,d,u,h,_,b){let c;if(_?(this.validateReverseSubject(u),c=this.dataFactory.quad(u,d,l,h)):c=this.dataFactory.quad(l,d,u,h),b){if(c.graph.termType!=="DefaultGraph"&&(c=this.dataFactory.quad(c.subject,c.predicate,c.object)),this.parsingContext.idStack[i-1])throw new e.ErrorCoded("Illegal multiple properties in an embedded node",e.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[i-1]=[c]}else this.parsingContext.emitQuad(i,c);const E=this.parsingContext.annotationsBuffer[i];if(E){for(const g of E)this.emitAnnotation(i,c,g);delete this.parsingContext.annotationsBuffer[i]}}emitAnnotation(i,l,d){let u;d.reverse?(this.validateReverseSubject(d.object),u=this.dataFactory.quad(d.object,d.predicate,l)):u=this.dataFactory.quad(l,d.predicate,d.object),this.parsingContext.emitQuad(i,u);for(const h of d.nestedAnnotations)this.emitAnnotation(i,u,h)}};return o.XSD="http://www.w3.org/2001/XMLSchema#",o.XSD_BOOLEAN=o.XSD+"boolean",o.XSD_INTEGER=o.XSD+"integer",o.XSD_DOUBLE=o.XSD+"double",o.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",ur.Util=o,ur}Object.defineProperty(hn,"__esModule",{value:!0});hn.EntryHandlerArrayValue=void 0;const Sh=Lt(),Ga=Se;class Rh{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,r,n,o,a){return this.test(t,r,null,n,o)}async test(t,r,n,o,a){return typeof o[a]=="number"}async handle(t,r,n,o,a,i){let l=await r.unaliasKeywordParent(o,i);if(l==="@list"){let d=null,u=0;for(let h=i-2;h>0;h--){const _=o[h];if(typeof _=="string"||typeof _=="number"){u=h,d=_;break}}if(d!==null){const h=await r.valueToTerm(await t.getContext(o),d,a,i,o);for(const _ of h)await this.handleListElement(t,r,_,a,i,o.slice(0,u),u);h.length===0&&await this.handleListElement(t,r,null,a,i,o.slice(0,u),u)}}else if(l==="@set")await t.newOnValueJob(o.slice(0,-2),a,i-2,!1);else if(l!==void 0&&l!=="@type"){for(let u=i-1;u>0;u--)if(typeof o[u]!="number"){l=await r.unaliasKeyword(o[u],o,u);break}const d=await t.getContext(o.slice(0,-1));if("@list"in Sh.Util.getContextValueContainer(d,l)){t.emittedStack[i+1]=!0;const u=await r.valueToTerm(await t.getContext(o),l,a,i,o);for(const h of u)await this.handleListElement(t,r,h,a,i,o.slice(0,-1),i-1);u.length===0&&await this.handleListElement(t,r,null,a,i,o.slice(0,-1),i-1)}else t.shiftStack(i,1),await t.newOnValueJob(o.slice(0,-1),a,i-1,!1),t.contextTree.removeContext(o.slice(0,-1))}}async handleListElement(t,r,n,o,a,i,l){let d=t.listPointerStack[a];if(o!==null&&(await r.unaliasKeywords(o,i,a))["@value"]!==null){if(!d||!d.value){const u=r.dataFactory.blankNode();d={value:u,listRootDepth:l,listId:u}}else{const u=r.dataFactory.blankNode();t.emitQuad(a,r.dataFactory.quad(d.value,r.rdfRest,u,r.getDefaultGraph())),d.value=u}n&&t.emitQuad(a,r.dataFactory.quad(d.value,r.rdfFirst,n,r.getDefaultGraph()))}else d||(d={listRootDepth:l,listId:r.rdfNil});t.listPointerStack[a]=d,t.rdfstar&&t.annotationsBuffer[a]&&t.emitError(new Ga.ErrorCoded("Found an illegal annotation inside a list",Ga.ERROR_CODES.INVALID_ANNOTATION))}}hn.EntryHandlerArrayValue=Rh;var gn={};Object.defineProperty(gn,"__esModule",{value:!0});gn.EntryHandlerInvalidFallback=void 0;class Ah{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,r,n,o,a){return!1}async test(t,r,n,o,a){return!0}async handle(t,r,n,o,a,i){t.emittedStack[i]=!1}}gn.EntryHandlerInvalidFallback=Ah;var _n={},Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.EntryHandlerKeyword=void 0;class Ih{constructor(t){this.keyword=t}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,r,n,o,a){return!1}async test(t,r,n,o,a){return n===this.keyword}}Fe.EntryHandlerKeyword=Ih;Object.defineProperty(_n,"__esModule",{value:!0});_n.EntryHandlerKeywordContext=void 0;const Ha=Se,mh=Fe;class vh extends mh.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(t,r,n,o,a,i){t.streamingProfile&&(t.processingStack[i]||t.processingType[i]||t.idStack[i]!==void 0)&&t.emitError(new Ha.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",Ha.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const l=t.getContext(o),d=t.parseContext(a,(await l).getContextRaw());t.contextTree.setContext(o.slice(0,-1),d),t.emitContext(a),await t.validateContext(await d)}}_n.EntryHandlerKeywordContext=vh;var wn={};Object.defineProperty(wn,"__esModule",{value:!0});wn.EntryHandlerKeywordGraph=void 0;const Th=Fe;class Ch extends Th.EntryHandlerKeyword{constructor(){super("@graph")}async handle(t,r,n,o,a,i){t.graphStack[i+1]=!0}}wn.EntryHandlerKeywordGraph=Ch;var En={};Object.defineProperty(En,"__esModule",{value:!0});En.EntryHandlerKeywordId=void 0;const Ue=Se,Nh=Fe;class Oh extends Nh.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(t,r,n,o,a,i){if(typeof a!="string"){if(t.rdfstar&&typeof a=="object"){const d=Object.keys(a);d.length===1&&d[0]==="@id"&&t.emitError(new Ue.ErrorCoded(`Invalid embedded node without property with @id ${a["@id"]}`,Ue.ERROR_CODES.INVALID_EMBEDDED_NODE))}else t.emitError(new Ue.ErrorCoded(`Found illegal @id '${a}'`,Ue.ERROR_CODES.INVALID_ID_VALUE));return}const l=await r.getPropertiesDepth(o,i);if(t.idStack[l]!==void 0&&(t.idStack[l][0].listHead?t.emitError(new Ue.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o[i-1]}'`,Ue.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):t.emitError(new Ue.ErrorCoded(`Found duplicate @ids '${t.idStack[l][0].value}' and '${a}'`,Ue.ERROR_CODES.COLLIDING_KEYWORDS))),t.rdfstar&&t.annotationsBuffer[i])for(const d of t.annotationsBuffer[i])d.depth===i&&t.emitError(new Ue.ErrorCoded(`Found an illegal @id inside an annotation: ${a}`,Ue.ERROR_CODES.INVALID_ANNOTATION));t.idStack[l]=r.nullableTermToArray(await r.resourceToTerm(await t.getContext(o),a))}}En.EntryHandlerKeywordId=Oh;var Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.EntryHandlerKeywordIncluded=void 0;const Vt=Se,$h=Fe;class xh extends $h.EntryHandlerKeyword{constructor(){super("@included")}async handle(t,r,n,o,a,i){typeof a!="object"&&t.emitError(new Vt.ErrorCoded(`Found illegal @included '${a}'`,Vt.ERROR_CODES.INVALID_INCLUDED_VALUE));const l=await r.unaliasKeywords(a,o,i,await t.getContext(o));"@value"in l&&t.emitError(new Vt.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(a)}'`,Vt.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in l&&t.emitError(new Vt.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(a)}'`,Vt.ERROR_CODES.INVALID_INCLUDED_VALUE)),t.emittedStack[i]=!1}}Sn.EntryHandlerKeywordIncluded=xh;var Rn={};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.EntryHandlerKeywordNest=void 0;const Pr=Se,Dh=Fe;class Lh extends Dh.EntryHandlerKeyword{constructor(){super("@nest")}async handle(t,r,n,o,a,i){typeof a!="object"&&t.emitError(new Pr.ErrorCoded(`Found invalid @nest entry for '${n}': '${a}'`,Pr.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await r.unaliasKeywords(a,o,i,await t.getContext(o))&&t.emitError(new Pr.ErrorCoded(`Found an invalid @value node for '${n}'`,Pr.ERROR_CODES.INVALID_NEST_VALUE)),t.emittedStack[i]=!1}}Rn.EntryHandlerKeywordNest=Lh;var An={};Object.defineProperty(An,"__esModule",{value:!0});An.EntryHandlerKeywordType=void 0;const yr=Se,kr=Lt(),Ph=pn(),kh=Fe;class Mh extends kh.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(t,r,n,o,a,i){const l=o[i],d=await t.getContext(o),u=r.rdfType,h=await r.unaliasKeywordParent(o,i),_=kr.Util.isPropertyReverse(d,l,h),b=kr.Util.isPropertyInEmbeddedNode(h);r.validateReverseInEmbeddedNode(n,_,b);const c=kr.Util.isPropertyInAnnotationObject(h),E=Array.isArray(a)?a:[a];for(const T of E){typeof T!="string"&&t.emitError(new yr.ErrorCoded(`Found illegal @type '${T}'`,yr.ERROR_CODES.INVALID_TYPE_VALUE));const $=r.createVocabOrBaseTerm(d,T);$&&await Ph.EntryHandlerPredicate.handlePredicateObject(t,r,o,i,u,$,_,b,c)}let g=Promise.resolve(d),S=!1;for(const T of E.sort()){const $=kr.Util.getContextValue(d,"@context",T,null);$&&(S=!0,g=g.then(w=>t.parseContext($,w.getContextRaw())))}t.streamingProfile&&(S||!t.streamingProfileAllowOutOfOrderPlainType)&&(t.processingStack[i]||t.idStack[i])&&t.emitError(new yr.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",yr.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),S&&(g=g.then(T=>T.getContextRaw()["@propagate"]!==!0?new yr.JsonLdContextNormalized(Object.assign(Object.assign({},T.getContextRaw()),{"@propagate":!1,"@__propagateFallback":d.getContextRaw()})):T),t.contextTree.setContext(o.slice(0,o.length-1),g)),t.processingType[i]=!0}}An.EntryHandlerKeywordType=Mh;var In={};Object.defineProperty(In,"__esModule",{value:!0});In.EntryHandlerKeywordUnknownFallback=void 0;const Sr=Se;class mn{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,r,n,o,a){const i=await r.unaliasKeyword(n[o],n,o);return Sr.Util.isPotentialKeyword(i)?!(!a&&i==="@list"):!1}async test(t,r,n,o,a){return Sr.Util.isPotentialKeyword(n)}async handle(t,r,n,o,a,i){const l=mn.VALID_KEYWORDS_TYPES[n];l!==void 0?l&&typeof a!==l.type&&t.emitError(new Sr.ErrorCoded(`Invalid value type for '${n}' with value '${a}'`,l.errorCode)):t.strictValues&&t.emitError(new Error(`Unknown keyword '${n}' with value '${a}'`)),t.emittedStack[i]=!1}}mn.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:Sr.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:Sr.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null};In.EntryHandlerKeywordUnknownFallback=mn;var vn={};Object.defineProperty(vn,"__esModule",{value:!0});vn.EntryHandlerKeywordValue=void 0;const Vh=Fe;class jh extends Vh.EntryHandlerKeyword{constructor(){super("@value")}async validate(t,r,n,o,a){const i=n[o];return i&&!t.literalStack[o]&&await this.test(t,r,i,n,o)&&(t.literalStack[o]=!0),super.validate(t,r,n,o,a)}async test(t,r,n,o,a){return await r.unaliasKeyword(o[a],o.slice(0,o.length-1),a-1,!0)==="@value"}async handle(t,r,n,o,a,i){t.literalStack[i]=!0,delete t.unidentifiedValuesBuffer[i],delete t.unidentifiedGraphsBuffer[i],t.emittedStack[i]=!1}}vn.EntryHandlerKeywordValue=jh;var gr={},Tn={};Object.defineProperty(Tn,"__esModule",{value:!0});Tn.ContextTree=void 0;class So{constructor(){this.subTrees={}}getContext(t){if(t.length>0){const[r,...n]=t,o=this.subTrees[r];if(o){const a=o.getContext(n);if(a)return a.then(({context:i,depth:l})=>({context:i,depth:l+1}))}}return this.context?this.context.then(r=>({context:r,depth:0})):null}setContext(t,r){if(t.length===0)this.context=r;else{const[n,...o]=t;let a=this.subTrees[n];a||(a=this.subTrees[n]=new So),a.setContext(o,r)}}removeContext(t){this.setContext(t,null)}}Tn.ContextTree=So;var Ka;function Fh(){if(Ka)return gr;Ka=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.ParsingContext=void 0;const e=Se,t=Jt,r=Tn,n=Wl();let o=class Ul{constructor(i){this.contextParser=new e.ContextParser({documentLoader:i.documentLoader,skipValidation:i.skipContextValidation}),this.streamingProfile=!!i.streamingProfile,this.baseIRI=i.baseIRI,this.produceGeneralizedRdf=!!i.produceGeneralizedRdf,this.allowSubjectList=!!i.allowSubjectList,this.processingMode=i.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!i.strictValues,this.validateValueIndexes=!!i.validateValueIndexes,this.defaultGraph=i.defaultGraph,this.rdfDirection=i.rdfDirection,this.normalizeLanguageTags=i.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=i.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=i.rdfstar!==!1,this.rdfstarReverseInEmbedded=i.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new r.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=i.parser,i.context?(this.rootContext=this.parseContext(i.context),this.rootContext.then(l=>this.validateContext(l))):this.rootContext=Promise.resolve(new e.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(i,l,d){return this.contextParser.parse(i,{baseIRI:this.baseIRI,ignoreProtection:d,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:l,processingMode:this.activeProcessingMode})}validateContext(i){const l=i.getContextRaw()["@version"];if(l){if(this.activeProcessingMode&&l>this.activeProcessingMode)throw new t.ErrorCoded(`Unsupported JSON-LD version '${l}' under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&l<this.activeProcessingMode)throw new t.ErrorCoded(`Invalid JSON-LD version ${l} under active processing mode ${this.activeProcessingMode}.`,t.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=l}}async getContext(i,l=1){const d=i;for(;typeof i[i.length-1]=="number";)i=i.slice(0,i.length-1);l&&(i=i.slice(0,-l));const u=await this.getContextPropagationAware(i);let _=u.context.getContextRaw();for(let b=u.depth;b<d.length-l;b++){const c=d[b],E=_[c];if(E&&typeof E=="object"&&"@context"in E){const g=(await this.parseContext(E,_,!0)).getContextRaw(),S=!(c in g)||g[c]["@context"]["@propagate"];(S!==!1||b===d.length-1-l)&&(_=Object.assign({},g),delete _["@propagate"],_[c]=Object.assign({},_[c]),"@id"in E&&(_[c]["@id"]=E["@id"]),delete _[c]["@context"],S!==!1&&this.contextTree.setContext(d.slice(0,b+l),Promise.resolve(new e.JsonLdContextNormalized(_))))}}return new e.JsonLdContextNormalized(_)}async getContextPropagationAware(i){const l=i.length;let d=null,u;do{u=!1,d&&"@__propagateFallback"in d.context.getContextRaw()?d.context=new e.JsonLdContextNormalized(d.context.getContextRaw()["@__propagateFallback"]):(d&&(i=i.slice(0,d.depth-1)),d=await this.contextTree.getContext(i)||{context:await this.rootContext,depth:0});const h=i[i.length-1];if(h in d.context.getContextRaw()){const _=d.context.getContextRaw()[h];_&&typeof _=="object"&&"@context"in _&&(u=!0)}}while(d.depth>0&&d.context.getContextRaw()["@propagate"]===!1&&d.depth!==l&&!u);return d.depth===0&&d.context.getContextRaw()["@propagate"]===!1&&d.depth!==l&&(d.context=new e.JsonLdContextNormalized({})),d}async newOnValueJob(i,l,d,u){await this.parser.newOnValueJob(i,l,d,u)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const i of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(i.depth,i.keys),this.parser.flushStacks(i.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(i,l){i===1&&(this.topLevelProperties=!0),this.parser.push(l)}emitError(i){this.parser.emit("error",i)}emitContext(i){this.parser.emit("context",i)}getUnidentifiedValueBufferSafe(i){let l=this.unidentifiedValuesBuffer[i];return l||(l=[],this.unidentifiedValuesBuffer[i]=l),l}getUnidentifiedGraphBufferSafe(i){let l=this.unidentifiedGraphsBuffer[i];return l||(l=[],this.unidentifiedGraphsBuffer[i]=l),l}getAnnotationsBufferSafe(i){let l=this.annotationsBuffer[i];return l||(l=[],this.annotationsBuffer[i]=l),l}getExpandOptions(){return Ul.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(i,l){const d=this.idStack[i+l];if(d&&(this.idStack[i]=d,this.emittedStack[i]=!0,delete this.idStack[i+l]),this.pendingContainerFlushBuffers.length)for(const u of this.pendingContainerFlushBuffers)u.depth>=i+l&&(u.depth-=l,u.keys.splice(i,l));this.unidentifiedValuesBuffer[i+l]&&(this.unidentifiedValuesBuffer[i]=this.unidentifiedValuesBuffer[i+l],delete this.unidentifiedValuesBuffer[i+l]),this.annotationsBuffer[i+l-1]&&(this.annotationsBuffer[i-1]||(this.annotationsBuffer[i-1]=[]),this.annotationsBuffer[i-1]=[...this.annotationsBuffer[i-1],...this.annotationsBuffer[i+l-1]],delete this.annotationsBuffer[i+l-1])}};return o.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},gr.ParsingContext=o,gr}var Cn={};Object.defineProperty(Cn,"__esModule",{value:!0});Cn.EntryHandlerKeywordAnnotation=void 0;const Uh=Fe,Ja=Se;class Wh extends Uh.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(t,r,n,o,a,i){(typeof a=="string"||typeof a=="object"&&a["@value"])&&t.emitError(new Ja.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(a)}`,Ja.ERROR_CODES.INVALID_ANNOTATION))}}Cn.EntryHandlerKeywordAnnotation=Wh;var qa;function Wl(){if(qa)return dr;qa=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.JsonLdParser=void 0;const e=Yf,t=Se,r=yh,n=hn,o=Fl(),a=gn,i=pn(),l=_n,d=wn,u=En,h=Sn,_=Rn,b=An,c=In,E=vn,g=Fh(),S=Lt(),T=Hs,$=Cn;let w=class Ft extends r.Transform{constructor(v){super({readableObjectMode:!0}),v=v||{},this.options=v,this.parsingContext=new g.ParsingContext(Object.assign({parser:this},v)),this.util=new S.Util({dataFactory:v.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new e,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(v,x,U,F){let W,ee=["application/activity+json"];if(F&&F.wellKnownMediaTypes&&(ee=F.wellKnownMediaTypes),x!=="application/ld+json"&&!ee.includes(x)){if(x!=="application/json"&&!x.endsWith("+json"))throw new t.ErrorCoded(`Unsupported JSON-LD media type ${x}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(U&&U.has("Link")&&U.forEach((k,R)=>{if(R==="link"){const V=(0,T.parse)(k);for(const M of V.get("rel","http://www.w3.org/ns/json-ld#context")){if(W)throw new t.ErrorCoded("Multiple JSON-LD context link headers were found on "+v,t.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);W=M.uri}}}),!W&&!(F!=null&&F.ignoreMissingContextLinkHeader))throw new t.ErrorCoded(`Missing context link header for media type ${x} on ${v}`,t.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let J;if(U&&U.has("Content-Type")){const k=U.get("Content-Type"),R=/; *profile=([^"]*)/.exec(k);R&&R[1]==="http://www.w3.org/ns/json-ld#streaming"&&(J=!0)}return new Ft(Object.assign({baseIRI:v,context:W,streamingProfile:J},F||{}))}import(v){if("pipe"in v){v.on("error",U=>x.emit("error",U));const x=v.pipe(new Ft(this.options));return x}else{const x=new r.PassThrough({readableObjectMode:!0});v.on("error",F=>U.emit("error",F)),v.on("data",F=>x.push(F)),v.on("end",()=>x.push(null));const U=x.pipe(new Ft(this.options));return U}}_transform(v,x,U){this.jsonParser.write(v),this.lastOnValueJob.then(()=>U(),F=>U(F))}async newOnValueJob(v,x,U,F){let W=!0;if(F&&U<this.lastDepth){const V=this.parsingContext.listPointerStack[this.lastDepth];V&&(V.value&&this.push(this.util.dataFactory.quad(V.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),V.listId.listHead=!0,this.parsingContext.idStack[V.listRootDepth+1]=[V.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await o.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),W=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const ee=await this.util.unaliasKeyword(v[U],v,U),J=await this.util.unaliasKeywordParent(v,U);this.parsingContext.emittedStack[U]=!0;let k=!0;t.Util.isValidKeyword(ee)&&J==="@reverse"&&ee!=="@context"&&this.emit("error",new t.ErrorCoded(`Found the @id '${x}' inside an @reverse property`,t.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let R=!1;this.parsingContext.validationStack.length>1&&(R=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let V=Math.max(1,this.parsingContext.validationStack.length-1);V<v.length-1;V++){const M=this.parsingContext.validationStack[V]||(this.parsingContext.validationStack[V]=await this.validateKey(v.slice(0,V+1),V,R));if(M.valid)!R&&M.property&&(R=!0);else{this.parsingContext.emittedStack[U]=!1,k=!1;break}}if(await this.util.isLiteral(v,U)&&(k=!1),k)for(const V of Ft.ENTRY_HANDLERS){const M=await V.test(this.parsingContext,this.util,ee,v,U);if(M){await V.handle(this.parsingContext,this.util,ee,v,x,U,M),V.isStackProcessor()&&(this.parsingContext.processingStack[U]=!0);break}}U===0&&Array.isArray(x)&&await this.util.validateValueIndexes(x),W&&U<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=U,this.lastKeys=v,this.parsingContext.unaliasedKeywordCacheStack.splice(U-1)}flushStacks(v){this.parsingContext.processingStack.splice(v,1),this.parsingContext.processingType.splice(v,1),this.parsingContext.emittedStack.splice(v,1),this.parsingContext.idStack.splice(v,1),this.parsingContext.graphStack.splice(v+1,1),this.parsingContext.graphContainerTermStack.splice(v,1),this.parsingContext.jsonLiteralStack.splice(v,1),this.parsingContext.validationStack.splice(v-1,2),this.parsingContext.literalStack.splice(v,this.parsingContext.literalStack.length-v),this.parsingContext.annotationsBuffer.splice(v,1)}async flushBuffer(v,x){let U=this.parsingContext.idStack[v];!!U||(U=this.parsingContext.idStack[v]=[this.util.dataFactory.blankNode()]);const W=this.parsingContext.unidentifiedValuesBuffer[v];if(W){for(const k of U){const R=await this.util.getDepthOffsetGraph(v,x),V=this.parsingContext.graphStack[v]||R>=0?this.parsingContext.idStack[v-R-1]:[await this.util.getGraphContainerValue(x,v)];if(V)for(const M of V){this.parsingContext.emittedStack[v]=!0;for(const j of W)this.util.emitQuadChecked(v,k,j.predicate,j.object,M,j.reverse,j.isEmbedded)}else{const M=this.parsingContext.getUnidentifiedGraphBufferSafe(v-await this.util.getDepthOffsetGraph(v,x)-1);for(const j of W)j.reverse?M.push({object:k,predicate:j.predicate,subject:j.object,isEmbedded:j.isEmbedded}):M.push({object:j.object,predicate:j.predicate,subject:k,isEmbedded:j.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(v,1),this.parsingContext.literalStack.splice(v,1),this.parsingContext.jsonLiteralStack.splice(v,1)}const ee=this.parsingContext.unidentifiedGraphsBuffer[v];if(ee){for(const k of U){const R=v===1&&k.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():k;this.parsingContext.emittedStack[v]=!0;for(const V of ee)this.parsingContext.emitQuad(v,this.util.dataFactory.quad(V.subject,V.predicate,V.object,R))}this.parsingContext.unidentifiedGraphsBuffer.splice(v,1)}const J=this.parsingContext.annotationsBuffer[v];if(J){J.length>0&&v===1&&this.parsingContext.emitError(new t.ErrorCoded("Annotations can not be made on top-level nodes",t.ERROR_CODES.INVALID_ANNOTATION));const k=this.parsingContext.getAnnotationsBufferSafe(v-1);for(const R of J)k.push(R);delete this.parsingContext.annotationsBuffer[v]}}async validateKey(v,x,U){for(const F of Ft.ENTRY_HANDLERS)if(await F.validate(this.parsingContext,this.util,v,x,U))return{valid:!0,property:U||F.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=v=>{const x=this.jsonParser.stack.length,U=new Array(x+1).fill(0).map((F,W)=>W===x?this.jsonParser.key:this.jsonParser.stack[W].key);if(!this.isParsingContextInner(x)){const F=()=>this.newOnValueJob(U,v,x,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(U.slice(0,-1)))if(U[x]==="@context"){let W=this.contextJobs[x];W||(W=this.contextJobs[x]=[]),W.push(F)}else this.contextAwaitingJobs.push({job:F,keys:U,depth:x});else this.lastOnValueJob=this.lastOnValueJob.then(F);!this.parsingContext.streamingProfile&&x===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=v=>{this.emit("error",v)}}isParsingContextInner(v){for(let x=v;x>0;x--)if(this.jsonParser.stack[x-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const x of this.contextJobs)if(x)for(const U of x)await U();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const v=[];for(const x of this.contextAwaitingJobs)await this.util.unaliasKeyword(x.keys[x.depth],x.keys,x.depth,!0)==="@type"||typeof x.keys[x.depth]=="number"&&await this.util.unaliasKeyword(x.keys[x.depth-1],x.keys,x.depth-1,!0)==="@type"?this.typeJobs.push({job:x.job,keys:x.keys.slice(0,x.keys.length-1)}):v.push(x);for(const x of v){if(this.typeJobs.length>0){const U=[],F=[];for(let J=0;J<this.typeJobs.length;J++){const k=this.typeJobs[J];S.Util.isPrefixArray(k.keys,x.keys)&&(U.push(k),F.push(J))}const W=U.sort((J,k)=>J.keys.length-k.keys.length);for(const J of W)await J.job();const ee=F.sort().reverse();for(const J of ee)this.typeJobs.splice(J,1)}await x.job()}}};return w.DEFAULT_PROCESSING_MODE="1.1",w.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new l.EntryHandlerKeywordContext,new u.EntryHandlerKeywordId,new h.EntryHandlerKeywordIncluded,new d.EntryHandlerKeywordGraph,new _.EntryHandlerKeywordNest,new b.EntryHandlerKeywordType,new E.EntryHandlerKeywordValue,new $.EntryHandlerKeywordAnnotation,new o.EntryHandlerContainer,new c.EntryHandlerKeywordUnknownFallback,new i.EntryHandlerPredicate,new a.EntryHandlerInvalidFallback],dr.JsonLdParser=w,dr}(function(e){var t=dt&&dt.__createBinding||(Object.create?function(n,o,a,i){i===void 0&&(i=a);var l=Object.getOwnPropertyDescriptor(o,a);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[a]}}),Object.defineProperty(n,i,l)}:function(n,o,a,i){i===void 0&&(i=a),n[i]=o[a]}),r=dt&&dt.__exportStar||function(n,o){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(o,a)&&t(o,n,a)};Object.defineProperty(e,"__esModule",{value:!0}),r(Wl(),e)})(Ms);var Bl={exports:{}},_i={exports:{}},le={ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,t){return e.includes(t)},ArrayPrototypeIndexOf(e,t){return e.indexOf(t)},ArrayPrototypeJoin(e,t){return e.join(t)},ArrayPrototypeMap(e,t){return e.map(t)},ArrayPrototypePop(e,t){return e.pop(t)},ArrayPrototypePush(e,t){return e.push(t)},ArrayPrototypeSlice(e,t,r){return e.slice(t,r)},Error,FunctionPrototypeCall(e,t,...r){return e.call(t,...r)},FunctionPrototypeSymbolHasInstance(e,t){return Function.prototype[Symbol.hasInstance].call(e,t)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,t){return Object.defineProperties(e,t)},ObjectDefineProperty(e,t,r){return Object.defineProperty(e,t,r)},ObjectGetOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,t){return Object.setPrototypeOf(e,t)},Promise,PromisePrototypeCatch(e,t){return e.catch(t)},PromisePrototypeThen(e,t,r){return e.then(t,r)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,t){return e.test(t)},SafeSet:Set,String,StringPrototypeSlice(e,t,r){return e.slice(t,r)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,t,r){return e.set(t,r)},Boolean,Uint8Array},Gl={exports:{}};(function(e){const t=be,{kResistStopPropagation:r,SymbolDispose:n}=le,o=globalThis.AbortSignal||Ge().AbortSignal,a=globalThis.AbortController||Ge().AbortController,i=Object.getPrototypeOf(async function(){}).constructor,l=globalThis.Blob||t.Blob,d=typeof l<"u"?function(c){return c instanceof l}:function(c){return!1},u=(b,c)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new ERR_INVALID_ARG_TYPE(c,"AbortSignal",b)},h=(b,c)=>{if(typeof b!="function")throw new ERR_INVALID_ARG_TYPE(c,"Function",b)};class _ extends Error{constructor(c){if(!Array.isArray(c))throw new TypeError(`Expected input to be an Array, got ${typeof c}`);let E="";for(let g=0;g<c.length;g++)E+=`    ${c[g].stack}
`;super(E),this.name="AggregateError",this.errors=c}}e.exports={AggregateError:_,kEmptyObject:Object.freeze({}),once(b){let c=!1;return function(...E){c||(c=!0,b.apply(this,E))}},createDeferredPromise:function(){let b,c;return{promise:new Promise((g,S)=>{b=g,c=S}),resolve:b,reject:c}},promisify(b){return new Promise((c,E)=>{b((g,...S)=>g?E(g):c(...S))})},debuglog(){return function(){}},format(b,...c){return b.replace(/%([sdifj])/g,function(...[E,g]){const S=c.shift();return g==="f"?S.toFixed(6):g==="j"?JSON.stringify(S):g==="s"&&typeof S=="object"?`${S.constructor!==Object?S.constructor.name:""} {}`.trim():S.toString()})},inspect(b){switch(typeof b){case"string":if(b.includes("'"))if(b.includes('"')){if(!b.includes("`")&&!b.includes("${"))return`\`${b}\``}else return`"${b}"`;return`'${b}'`;case"number":return isNaN(b)?"NaN":Object.is(b,-0)?String(b):b;case"bigint":return`${String(b)}n`;case"boolean":case"undefined":return String(b);case"object":return"{}"}},types:{isAsyncFunction(b){return b instanceof i},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:d,deprecate(b,c){return b},addAbortListener:ct.addAbortListener||function(c,E){if(c===void 0)throw new ERR_INVALID_ARG_TYPE("signal","AbortSignal",c);u(c,"signal"),h(E,"listener");let g;return c.aborted?queueMicrotask(()=>E()):(c.addEventListener("abort",E,{__proto__:null,once:!0,[r]:!0}),g=()=>{c.removeEventListener("abort",E)}),{__proto__:null,[n](){var S;(S=g)===null||S===void 0||S()}}},AbortSignalAny:o.any||function(c){if(c.length===1)return c[0];const E=new a,g=()=>E.abort();return c.forEach(S=>{u(S,"signals"),S.addEventListener("abort",g,{once:!0})}),E.signal.addEventListener("abort",()=>{c.forEach(S=>S.removeEventListener("abort",g))},{once:!0}),E.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(Gl);var Ae=Gl.exports,Ro={};const{format:Bh,inspect:Xr,AggregateError:Gh}=Ae,Hh=globalThis.AggregateError||Gh,Kh=Symbol("kIsNodeError"),Jh=["string","function","number","object","Function","Object","boolean","bigint","symbol"],qh=/^([A-Z][a-z0-9]*)+$/,Yh="__node_internal_",Nn={};function Ct(e,t){if(!e)throw new Nn.ERR_INTERNAL_ASSERTION(t)}function Ya(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function zh(e,t,r){if(typeof t=="function")return Ct(t.length<=r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${t.length}).`),t(...r);const n=(t.match(/%[dfijoOs]/g)||[]).length;return Ct(n===r.length,`Code: ${e}; The provided arguments length (${r.length}) does not match the required ones (${n}).`),r.length===0?t:Bh(t,...r)}function ye(e,t,r){r||(r=Error);class n extends r{constructor(...a){super(zh(e,t,a))}toString(){return`${this.name} [${e}]: ${this.message}`}}Object.defineProperties(n.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${e}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),n.prototype.code=e,n.prototype[Kh]=!0,Nn[e]=n}function za(e){const t=Yh+e.name;return Object.defineProperty(e,"name",{value:t}),e}function Xh(e,t){if(e&&t&&e!==t){if(Array.isArray(t.errors))return t.errors.push(e),t;const r=new Hh([t,e],t.message);return r.code=t.code,r}return e||t}let Qh=class extends Error{constructor(t="The operation was aborted",r=void 0){if(r!==void 0&&typeof r!="object")throw new Nn.ERR_INVALID_ARG_TYPE("options","Object",r);super(t,r),this.code="ABORT_ERR",this.name="AbortError"}};ye("ERR_ASSERTION","%s",Error);ye("ERR_INVALID_ARG_TYPE",(e,t,r)=>{Ct(typeof e=="string","'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=`${e} `:n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";const o=[],a=[],i=[];for(const d of t)Ct(typeof d=="string","All expected entries have to be of type string"),Jh.includes(d)?o.push(d.toLowerCase()):qh.test(d)?a.push(d):(Ct(d!=="object",'The value "object" should be written as "Object"'),i.push(d));if(a.length>0){const d=o.indexOf("object");d!==-1&&(o.splice(o,d,1),a.push("Object"))}if(o.length>0){switch(o.length){case 1:n+=`of type ${o[0]}`;break;case 2:n+=`one of type ${o[0]} or ${o[1]}`;break;default:{const d=o.pop();n+=`one of type ${o.join(", ")}, or ${d}`}}(a.length>0||i.length>0)&&(n+=" or ")}if(a.length>0){switch(a.length){case 1:n+=`an instance of ${a[0]}`;break;case 2:n+=`an instance of ${a[0]} or ${a[1]}`;break;default:{const d=a.pop();n+=`an instance of ${a.join(", ")}, or ${d}`}}i.length>0&&(n+=" or ")}switch(i.length){case 0:break;case 1:i[0].toLowerCase()!==i[0]&&(n+="an "),n+=`${i[0]}`;break;case 2:n+=`one of ${i[0]} or ${i[1]}`;break;default:{const d=i.pop();n+=`one of ${i.join(", ")}, or ${d}`}}if(r==null)n+=`. Received ${r}`;else if(typeof r=="function"&&r.name)n+=`. Received function ${r.name}`;else if(typeof r=="object"){var l;if((l=r.constructor)!==null&&l!==void 0&&l.name)n+=`. Received an instance of ${r.constructor.name}`;else{const d=Xr(r,{depth:-1});n+=`. Received ${d}`}}else{let d=Xr(r,{colors:!1});d.length>25&&(d=`${d.slice(0,25)}...`),n+=`. Received type ${typeof r} (${d})`}return n},TypeError);ye("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=Xr(t);return n.length>128&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received ${n}`},TypeError);ye("ERR_INVALID_RETURN_VALUE",(e,t,r)=>{var n;const o=r!=null&&(n=r.constructor)!==null&&n!==void 0&&n.name?`instance of ${r.constructor.name}`:`type ${typeof r}`;return`Expected ${e} to be returned from the "${t}" function but got ${o}.`},TypeError);ye("ERR_MISSING_ARGS",(...e)=>{Ct(e.length>0,"At least one arg needs to be specified");let t;const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(n=>`"${n}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const n=e.pop();t+=`The ${e.join(", ")}, and ${n} arguments`}break}return`${t} must be specified`},TypeError);ye("ERR_OUT_OF_RANGE",(e,t,r)=>{Ct(t,'Missing "range" argument');let n;return Number.isInteger(r)&&Math.abs(r)>2**32?n=Ya(String(r)):typeof r=="bigint"?(n=String(r),(r>2n**32n||r<-(2n**32n))&&(n=Ya(n)),n+="n"):n=Xr(r),`The value of "${e}" is out of range. It must be ${t}. Received ${n}`},RangeError);ye("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error);ye("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error);ye("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error);ye("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error);ye("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error);ye("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ye("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error);ye("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error);ye("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error);ye("ERR_STREAM_WRITE_AFTER_END","write after end",Error);ye("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError);var ve={AbortError:Qh,aggregateTwoErrors:za(Xh),hideStackFrames:za,codes:Nn};const{ArrayIsArray:Ao,ArrayPrototypeIncludes:Hl,ArrayPrototypeJoin:Kl,ArrayPrototypeMap:Zh,NumberIsInteger:Io,NumberIsNaN:eb,NumberMAX_SAFE_INTEGER:tb,NumberMIN_SAFE_INTEGER:rb,NumberParseInt:nb,ObjectPrototypeHasOwnProperty:ib,RegExpPrototypeExec:Jl,String:ob,StringPrototypeToUpperCase:ab,StringPrototypeTrim:sb}=le,{hideStackFrames:Le,codes:{ERR_SOCKET_BAD_PORT:lb,ERR_INVALID_ARG_TYPE:_e,ERR_INVALID_ARG_VALUE:Xt,ERR_OUT_OF_RANGE:Ot,ERR_UNKNOWN_SIGNAL:Xa}}=ve,{normalizeEncoding:fb}=Ae,{isAsyncFunction:db,isArrayBufferView:ub}=Ae.types,Qa={};function cb(e){return e===(e|0)}function hb(e){return e===e>>>0}const bb=/^[0-7]+$/,pb="must be a 32-bit unsigned integer or an octal string";function yb(e,t,r){if(typeof e>"u"&&(e=r),typeof e=="string"){if(Jl(bb,e)===null)throw new Xt(t,e,pb);e=nb(e,8)}return ql(e,t),e}const gb=Le((e,t,r=rb,n=tb)=>{if(typeof e!="number")throw new _e(t,"number",e);if(!Io(e))throw new Ot(t,"an integer",e);if(e<r||e>n)throw new Ot(t,`>= ${r} && <= ${n}`,e)}),_b=Le((e,t,r=-2147483648,n=2147483647)=>{if(typeof e!="number")throw new _e(t,"number",e);if(!Io(e))throw new Ot(t,"an integer",e);if(e<r||e>n)throw new Ot(t,`>= ${r} && <= ${n}`,e)}),ql=Le((e,t,r=!1)=>{if(typeof e!="number")throw new _e(t,"number",e);if(!Io(e))throw new Ot(t,"an integer",e);const n=r?1:0,o=4294967295;if(e<n||e>o)throw new Ot(t,`>= ${n} && <= ${o}`,e)});function mo(e,t){if(typeof e!="string")throw new _e(t,"string",e)}function wb(e,t,r=void 0,n){if(typeof e!="number")throw new _e(t,"number",e);if(r!=null&&e<r||n!=null&&e>n||(r!=null||n!=null)&&eb(e))throw new Ot(t,`${r!=null?`>= ${r}`:""}${r!=null&&n!=null?" && ":""}${n!=null?`<= ${n}`:""}`,e)}const Eb=Le((e,t,r)=>{if(!Hl(r,e)){const o="must be one of: "+Kl(Zh(r,a=>typeof a=="string"?`'${a}'`:ob(a)),", ");throw new Xt(t,e,o)}});function Yl(e,t){if(typeof e!="boolean")throw new _e(t,"boolean",e)}function wi(e,t,r){return e==null||!ib(e,t)?r:e[t]}const Sb=Le((e,t,r=null)=>{const n=wi(r,"allowArray",!1),o=wi(r,"allowFunction",!1);if(!wi(r,"nullable",!1)&&e===null||!n&&Ao(e)||typeof e!="object"&&(!o||typeof e!="function"))throw new _e(t,"Object",e)}),Rb=Le((e,t)=>{if(e!=null&&typeof e!="object"&&typeof e!="function")throw new _e(t,"a dictionary",e)}),On=Le((e,t,r=0)=>{if(!Ao(e))throw new _e(t,"Array",e);if(e.length<r){const n=`must be longer than ${r}`;throw new Xt(t,e,n)}});function Ab(e,t){On(e,t);for(let r=0;r<e.length;r++)mo(e[r],`${t}[${r}]`)}function Ib(e,t){On(e,t);for(let r=0;r<e.length;r++)Yl(e[r],`${t}[${r}]`)}function mb(e,t){On(e,t);for(let r=0;r<e.length;r++){const n=e[r],o=`${t}[${r}]`;if(n==null)throw new _e(o,"AbortSignal",n);zl(n,o)}}function vb(e,t="signal"){if(mo(e,t),Qa[e]===void 0)throw Qa[ab(e)]!==void 0?new Xa(e+" (signals must use all capital letters)"):new Xa(e)}const Tb=Le((e,t="buffer")=>{if(!ub(e))throw new _e(t,["Buffer","TypedArray","DataView"],e)});function Cb(e,t){const r=fb(t),n=e.length;if(r==="hex"&&n%2!==0)throw new Xt("encoding",t,`is invalid for data of length ${n}`)}function Nb(e,t="Port",r=!0){if(typeof e!="number"&&typeof e!="string"||typeof e=="string"&&sb(e).length===0||+e!==+e>>>0||e>65535||e===0&&!r)throw new lb(t,e,r);return e|0}const zl=Le((e,t)=>{if(e!==void 0&&(e===null||typeof e!="object"||!("aborted"in e)))throw new _e(t,"AbortSignal",e)}),Ob=Le((e,t)=>{if(typeof e!="function")throw new _e(t,"Function",e)}),$b=Le((e,t)=>{if(typeof e!="function"||db(e))throw new _e(t,"Function",e)}),xb=Le((e,t)=>{if(e!==void 0)throw new _e(t,"undefined",e)});function Db(e,t,r){if(!Hl(r,e))throw new _e(t,`('${Kl(r,"|")}')`,e)}const Lb=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function Za(e,t){if(typeof e>"u"||!Jl(Lb,e))throw new Xt(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function Pb(e){if(typeof e=="string")return Za(e,"hints"),e;if(Ao(e)){const t=e.length;let r="";if(t===0)return r;for(let n=0;n<t;n++){const o=e[n];Za(o,"hints"),r+=o,n!==t-1&&(r+=", ")}return r}throw new Xt("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}var vr={isInt32:cb,isUint32:hb,parseFileMode:yb,validateArray:On,validateStringArray:Ab,validateBooleanArray:Ib,validateAbortSignalArray:mb,validateBoolean:Yl,validateBuffer:Tb,validateDictionary:Rb,validateEncoding:Cb,validateFunction:Ob,validateInt32:_b,validateInteger:gb,validateNumber:wb,validateObject:Sb,validateOneOf:Eb,validatePlainFunction:$b,validatePort:Nb,validateSignalName:vb,validateString:mo,validateUint32:ql,validateUndefined:xb,validateUnion:Db,validateAbortSignal:zl,validateLinkHeaderValue:Pb},vo={exports:{}};const{SymbolAsyncIterator:es,SymbolIterator:ts,SymbolFor:Pt}=le,Xl=Pt("nodejs.stream.destroyed"),Ql=Pt("nodejs.stream.errored"),qi=Pt("nodejs.stream.readable"),Yi=Pt("nodejs.stream.writable"),Zl=Pt("nodejs.stream.disturbed"),kb=Pt("nodejs.webstream.isClosedPromise"),Mb=Pt("nodejs.webstream.controllerErrorFunction");function $n(e,t=!1){var r;return!!(e&&typeof e.pipe=="function"&&typeof e.on=="function"&&(!t||typeof e.pause=="function"&&typeof e.resume=="function")&&(!e._writableState||((r=e._readableState)===null||r===void 0?void 0:r.readable)!==!1)&&(!e._writableState||e._readableState))}function xn(e){var t;return!!(e&&typeof e.write=="function"&&typeof e.on=="function"&&(!e._readableState||((t=e._writableState)===null||t===void 0?void 0:t.writable)!==!1))}function Vb(e){return!!(e&&typeof e.pipe=="function"&&e._readableState&&typeof e.on=="function"&&typeof e.write=="function")}function qe(e){return e&&(e._readableState||e._writableState||typeof e.write=="function"&&typeof e.on=="function"||typeof e.pipe=="function"&&typeof e.on=="function")}function ef(e){return!!(e&&!qe(e)&&typeof e.pipeThrough=="function"&&typeof e.getReader=="function"&&typeof e.cancel=="function")}function tf(e){return!!(e&&!qe(e)&&typeof e.getWriter=="function"&&typeof e.abort=="function")}function rf(e){return!!(e&&!qe(e)&&typeof e.readable=="object"&&typeof e.writable=="object")}function jb(e){return ef(e)||tf(e)||rf(e)}function Fb(e,t){return e==null?!1:t===!0?typeof e[es]=="function":t===!1?typeof e[ts]=="function":typeof e[es]=="function"||typeof e[ts]=="function"}function Dn(e){if(!qe(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!!(e.destroyed||e[Xl]||n!=null&&n.destroyed)}function nf(e){if(!xn(e))return null;if(e.writableEnded===!0)return!0;const t=e._writableState;return t!=null&&t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function Ub(e,t){if(!xn(e))return null;if(e.writableFinished===!0)return!0;const r=e._writableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.finished)!="boolean"?null:!!(r.finished||t===!1&&r.ended===!0&&r.length===0)}function Wb(e){if(!$n(e))return null;if(e.readableEnded===!0)return!0;const t=e._readableState;return!t||t.errored?!1:typeof(t==null?void 0:t.ended)!="boolean"?null:t.ended}function of(e,t){if(!$n(e))return null;const r=e._readableState;return r!=null&&r.errored?!1:typeof(r==null?void 0:r.endEmitted)!="boolean"?null:!!(r.endEmitted||t===!1&&r.ended===!0&&r.length===0)}function af(e){return e&&e[qi]!=null?e[qi]:typeof(e==null?void 0:e.readable)!="boolean"?null:Dn(e)?!1:$n(e)&&e.readable&&!of(e)}function sf(e){return e&&e[Yi]!=null?e[Yi]:typeof(e==null?void 0:e.writable)!="boolean"?null:Dn(e)?!1:xn(e)&&e.writable&&!nf(e)}function Bb(e,t){return qe(e)?Dn(e)?!0:!((t==null?void 0:t.readable)!==!1&&af(e)||(t==null?void 0:t.writable)!==!1&&sf(e)):null}function Gb(e){var t,r;return qe(e)?e.writableErrored?e.writableErrored:(t=(r=e._writableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function Hb(e){var t,r;return qe(e)?e.readableErrored?e.readableErrored:(t=(r=e._readableState)===null||r===void 0?void 0:r.errored)!==null&&t!==void 0?t:null:null}function Kb(e){if(!qe(e))return null;if(typeof e.closed=="boolean")return e.closed;const t=e._writableState,r=e._readableState;return typeof(t==null?void 0:t.closed)=="boolean"||typeof(r==null?void 0:r.closed)=="boolean"?(t==null?void 0:t.closed)||(r==null?void 0:r.closed):typeof e._closed=="boolean"&&lf(e)?e._closed:null}function lf(e){return typeof e._closed=="boolean"&&typeof e._defaultKeepAlive=="boolean"&&typeof e._removedConnection=="boolean"&&typeof e._removedContLen=="boolean"}function ff(e){return typeof e._sent100=="boolean"&&lf(e)}function Jb(e){var t;return typeof e._consuming=="boolean"&&typeof e._dumped=="boolean"&&((t=e.req)===null||t===void 0?void 0:t.upgradeOrConnect)===void 0}function qb(e){if(!qe(e))return null;const t=e._writableState,r=e._readableState,n=t||r;return!n&&ff(e)||!!(n&&n.autoDestroy&&n.emitClose&&n.closed===!1)}function Yb(e){var t;return!!(e&&((t=e[Zl])!==null&&t!==void 0?t:e.readableDidRead||e.readableAborted))}function zb(e){var t,r,n,o,a,i,l,d,u,h;return!!(e&&((t=(r=(n=(o=(a=(i=e[Ql])!==null&&i!==void 0?i:e.readableErrored)!==null&&a!==void 0?a:e.writableErrored)!==null&&o!==void 0?o:(l=e._readableState)===null||l===void 0?void 0:l.errorEmitted)!==null&&n!==void 0?n:(d=e._writableState)===null||d===void 0?void 0:d.errorEmitted)!==null&&r!==void 0?r:(u=e._readableState)===null||u===void 0?void 0:u.errored)!==null&&t!==void 0?t:!((h=e._writableState)===null||h===void 0)&&h.errored))}var ot={isDestroyed:Dn,kIsDestroyed:Xl,isDisturbed:Yb,kIsDisturbed:Zl,isErrored:zb,kIsErrored:Ql,isReadable:af,kIsReadable:qi,kIsClosedPromise:kb,kControllerErrorFunction:Mb,kIsWritable:Yi,isClosed:Kb,isDuplexNodeStream:Vb,isFinished:Bb,isIterable:Fb,isReadableNodeStream:$n,isReadableStream:ef,isReadableEnded:Wb,isReadableFinished:of,isReadableErrored:Hb,isNodeStream:qe,isWebStream:jb,isWritable:sf,isWritableNodeStream:xn,isWritableStream:tf,isWritableEnded:nf,isWritableFinished:Ub,isWritableErrored:Gb,isServerRequest:Jb,isServerResponse:ff,willEmitClose:qb,isTransformStream:rf};const lt=Ie,{AbortError:df,codes:Xb}=ve,{ERR_INVALID_ARG_TYPE:Qb,ERR_STREAM_PREMATURE_CLOSE:rs}=Xb,{kEmptyObject:zi,once:Xi}=Ae,{validateAbortSignal:Zb,validateFunction:ep,validateObject:tp,validateBoolean:rp}=vr,{Promise:np,PromisePrototypeThen:ip,SymbolDispose:uf}=le,{isClosed:op,isReadable:ns,isReadableNodeStream:Ei,isReadableStream:ap,isReadableFinished:is,isReadableErrored:os,isWritable:as,isWritableNodeStream:ss,isWritableStream:sp,isWritableFinished:ls,isWritableErrored:fs,isNodeStream:lp,willEmitClose:fp,kIsClosedPromise:dp}=ot;let Gt;function up(e){return e.setHeader&&typeof e.abort=="function"}const Qi=()=>{};function cf(e,t,r){var n,o;if(arguments.length===2?(r=t,t=zi):t==null?t=zi:tp(t,"options"),ep(r,"callback"),Zb(t.signal,"options.signal"),r=Xi(r),ap(e)||sp(e))return cp(e,t,r);if(!lp(e))throw new Qb("stream",["ReadableStream","WritableStream","Stream"],e);const a=(n=t.readable)!==null&&n!==void 0?n:Ei(e),i=(o=t.writable)!==null&&o!==void 0?o:ss(e),l=e._writableState,d=e._readableState,u=()=>{e.writable||b()};let h=fp(e)&&Ei(e)===a&&ss(e)===i,_=ls(e,!1);const b=()=>{_=!0,e.destroyed&&(h=!1),!(h&&(!e.readable||a))&&(!a||c)&&r.call(e)};let c=is(e,!1);const E=()=>{c=!0,e.destroyed&&(h=!1),!(h&&(!e.writable||i))&&(!i||_)&&r.call(e)},g=v=>{r.call(e,v)};let S=op(e);const T=()=>{S=!0;const v=fs(e)||os(e);if(v&&typeof v!="boolean")return r.call(e,v);if(a&&!c&&Ei(e,!0)&&!is(e,!1))return r.call(e,new rs);if(i&&!_&&!ls(e,!1))return r.call(e,new rs);r.call(e)},$=()=>{S=!0;const v=fs(e)||os(e);if(v&&typeof v!="boolean")return r.call(e,v);r.call(e)},w=()=>{e.req.on("finish",b)};up(e)?(e.on("complete",b),h||e.on("abort",T),e.req?w():e.on("request",w)):i&&!l&&(e.on("end",u),e.on("close",u)),!h&&typeof e.aborted=="boolean"&&e.on("aborted",T),e.on("end",E),e.on("finish",b),t.error!==!1&&e.on("error",g),e.on("close",T),S?lt.nextTick(T):l!=null&&l.errorEmitted||d!=null&&d.errorEmitted?h||lt.nextTick($):(!a&&(!h||ns(e))&&(_||as(e)===!1)||!i&&(!h||as(e))&&(c||ns(e)===!1)||d&&e.req&&e.aborted)&&lt.nextTick($);const B=()=>{r=Qi,e.removeListener("aborted",T),e.removeListener("complete",b),e.removeListener("abort",T),e.removeListener("request",w),e.req&&e.req.removeListener("finish",b),e.removeListener("end",u),e.removeListener("close",u),e.removeListener("finish",b),e.removeListener("end",E),e.removeListener("error",g),e.removeListener("close",T)};if(t.signal&&!S){const v=()=>{const x=r;B(),x.call(e,new df(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)lt.nextTick(v);else{Gt=Gt||Ae.addAbortListener;const x=Gt(t.signal,v),U=r;r=Xi((...F)=>{x[uf](),U.apply(e,F)})}}return B}function cp(e,t,r){let n=!1,o=Qi;if(t.signal)if(o=()=>{n=!0,r.call(e,new df(void 0,{cause:t.signal.reason}))},t.signal.aborted)lt.nextTick(o);else{Gt=Gt||Ae.addAbortListener;const i=Gt(t.signal,o),l=r;r=Xi((...d)=>{i[uf](),l.apply(e,d)})}const a=(...i)=>{n||lt.nextTick(()=>r.apply(e,i))};return ip(e[dp].promise,a,a),Qi}function hp(e,t){var r;let n=!1;return t===null&&(t=zi),(r=t)!==null&&r!==void 0&&r.cleanup&&(rp(t.cleanup,"cleanup"),n=t.cleanup),new np((o,a)=>{const i=cf(e,t,l=>{n&&i(),l?a(l):o()})})}vo.exports=cf;vo.exports.finished=hp;var bt=vo.exports;const Be=Ie,{aggregateTwoErrors:bp,codes:{ERR_MULTIPLE_CALLBACK:pp},AbortError:yp}=ve,{Symbol:hf}=le,{kIsDestroyed:gp,isDestroyed:_p,isFinished:wp,isServerRequest:Ep}=ot,bf=hf("kDestroy"),Zi=hf("kConstruct");function pf(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r&&!r.errored&&(r.errored=e))}function Sp(e,t){const r=this._readableState,n=this._writableState,o=n||r;return n!=null&&n.destroyed||r!=null&&r.destroyed?(typeof t=="function"&&t(),this):(pf(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),o.constructed?ds(this,e,t):this.once(bf,function(a){ds(this,bp(a,e),t)}),this)}function ds(e,t,r){let n=!1;function o(a){if(n)return;n=!0;const i=e._readableState,l=e._writableState;pf(a,l,i),l&&(l.closed=!0),i&&(i.closed=!0),typeof r=="function"&&r(a),a?Be.nextTick(Rp,e,a):Be.nextTick(yf,e)}try{e._destroy(t||null,o)}catch(a){o(a)}}function Rp(e,t){eo(e,t),yf(e)}function yf(e){const t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(r!=null&&r.emitClose||t!=null&&t.emitClose)&&e.emit("close")}function eo(e,t){const r=e._readableState,n=e._writableState;n!=null&&n.errorEmitted||r!=null&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function Ap(){const e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=e.readable===!1,e.endEmitted=e.readable===!1),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=t.writable===!1,t.ending=t.writable===!1,t.finished=t.writable===!1)}function to(e,t,r){const n=e._readableState,o=e._writableState;if(o!=null&&o.destroyed||n!=null&&n.destroyed)return this;n!=null&&n.autoDestroy||o!=null&&o.autoDestroy?e.destroy(t):t&&(t.stack,o&&!o.errored&&(o.errored=t),n&&!n.errored&&(n.errored=t),r?Be.nextTick(eo,e,t):eo(e,t))}function Ip(e,t){if(typeof e._construct!="function")return;const r=e._readableState,n=e._writableState;r&&(r.constructed=!1),n&&(n.constructed=!1),e.once(Zi,t),!(e.listenerCount(Zi)>1)&&Be.nextTick(mp,e)}function mp(e){let t=!1;function r(n){if(t){to(e,n??new pp);return}t=!0;const o=e._readableState,a=e._writableState,i=a||o;o&&(o.constructed=!0),a&&(a.constructed=!0),i.destroyed?e.emit(bf,n):n?to(e,n,!0):Be.nextTick(vp,e)}try{e._construct(n=>{Be.nextTick(r,n)})}catch(n){Be.nextTick(r,n)}}function vp(e){e.emit(Zi)}function us(e){return(e==null?void 0:e.setHeader)&&typeof e.abort=="function"}function gf(e){e.emit("close")}function Tp(e,t){e.emit("error",t),Be.nextTick(gf,e)}function Cp(e,t){!e||_p(e)||(!t&&!wp(e)&&(t=new yp),Ep(e)?(e.socket=null,e.destroy(t)):us(e)?e.abort():us(e.req)?e.req.abort():typeof e.destroy=="function"?e.destroy(t):typeof e.close=="function"?e.close():t?Be.nextTick(Tp,e,t):Be.nextTick(gf,e),e.destroyed||(e[gp]=!0))}var Qt={construct:Ip,destroyer:Cp,destroy:Sp,undestroy:Ap,errorOrDestroy:to};const{ArrayIsArray:Np,ObjectSetPrototypeOf:_f}=le,{EventEmitter:Ln}=ct;function Pn(e){Ln.call(this,e)}_f(Pn.prototype,Ln.prototype);_f(Pn,Ln);Pn.prototype.pipe=function(e,t){const r=this;function n(h){e.writable&&e.write(h)===!1&&r.pause&&r.pause()}r.on("data",n);function o(){r.readable&&r.resume&&r.resume()}e.on("drain",o),!e._isStdio&&(!t||t.end!==!1)&&(r.on("end",i),r.on("close",l));let a=!1;function i(){a||(a=!0,e.end())}function l(){a||(a=!0,typeof e.destroy=="function"&&e.destroy())}function d(h){u(),Ln.listenerCount(this,"error")===0&&this.emit("error",h)}ro(r,"error",d),ro(e,"error",d);function u(){r.removeListener("data",n),e.removeListener("drain",o),r.removeListener("end",i),r.removeListener("close",l),r.removeListener("error",d),e.removeListener("error",d),r.removeListener("end",u),r.removeListener("close",u),e.removeListener("close",u)}return r.on("end",u),r.on("close",u),e.on("close",u),e.emit("pipe",r),e};function ro(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):Np(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}var To={Stream:Pn,prependListener:ro},wf={exports:{}};(function(e){const{SymbolDispose:t}=le,{AbortError:r,codes:n}=ve,{isNodeStream:o,isWebStream:a,kControllerErrorFunction:i}=ot,l=bt,{ERR_INVALID_ARG_TYPE:d}=n;let u;const h=(_,b)=>{if(typeof _!="object"||!("aborted"in _))throw new d(b,"AbortSignal",_)};e.exports.addAbortSignal=function(b,c){if(h(b,"signal"),!o(c)&&!a(c))throw new d("stream",["ReadableStream","WritableStream","Stream"],c);return e.exports.addAbortSignalNoValidate(b,c)},e.exports.addAbortSignalNoValidate=function(_,b){if(typeof _!="object"||!("aborted"in _))return b;const c=o(b)?()=>{b.destroy(new r(void 0,{cause:_.reason}))}:()=>{b[i](new r(void 0,{cause:_.reason}))};if(_.aborted)c();else{u=u||Ae.addAbortListener;const E=u(_,c);l(b,E[t])}return b}})(wf);var kn=wf.exports;const{StringPrototypeSlice:cs,SymbolIterator:Op,TypedArrayPrototypeSet:Mr,Uint8Array:$p}=le,{Buffer:Si}=be,{inspect:xp}=Ae;var Dp=class{constructor(){this.head=null,this.tail=null,this.length=0}push(t){const r={data:t,next:null};this.length>0?this.tail.next=r:this.head=r,this.tail=r,++this.length}unshift(t){const r={data:t,next:this.head};this.length===0&&(this.tail=r),this.head=r,++this.length}shift(){if(this.length===0)return;const t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}clear(){this.head=this.tail=null,this.length=0}join(t){if(this.length===0)return"";let r=this.head,n=""+r.data;for(;(r=r.next)!==null;)n+=t+r.data;return n}concat(t){if(this.length===0)return Si.alloc(0);const r=Si.allocUnsafe(t>>>0);let n=this.head,o=0;for(;n;)Mr(r,n.data,o),o+=n.data.length,n=n.next;return r}consume(t,r){const n=this.head.data;if(t<n.length){const o=n.slice(0,t);return this.head.data=n.slice(t),o}return t===n.length?this.shift():r?this._getString(t):this._getBuffer(t)}first(){return this.head.data}*[Op](){for(let t=this.head;t;t=t.next)yield t.data}_getString(t){let r="",n=this.head,o=0;do{const a=n.data;if(t>a.length)r+=a,t-=a.length;else{t===a.length?(r+=a,++o,n.next?this.head=n.next:this.head=this.tail=null):(r+=cs(a,0,t),this.head=n,n.data=cs(a,t));break}++o}while((n=n.next)!==null);return this.length-=o,r}_getBuffer(t){const r=Si.allocUnsafe(t),n=t;let o=this.head,a=0;do{const i=o.data;if(t>i.length)Mr(r,i,n-t),t-=i.length;else{t===i.length?(Mr(r,i,n-t),++a,o.next?this.head=o.next:this.head=this.tail=null):(Mr(r,new $p(i.buffer,i.byteOffset,t),n-t),this.head=o,o.data=i.slice(t));break}++a}while((o=o.next)!==null);return this.length-=a,r}[Symbol.for("nodejs.util.inspect.custom")](t,r){return xp(this,{...r,depth:0,customInspect:!1})}};const{MathFloor:Lp,NumberIsInteger:Pp}=le,{validateInteger:kp}=vr,{ERR_INVALID_ARG_VALUE:Mp}=ve.codes;let Ef=16*1024,Sf=16;function Vp(e,t,r){return e.highWaterMark!=null?e.highWaterMark:t?e[r]:null}function Rf(e){return e?Sf:Ef}function jp(e,t){kp(t,"value",0),e?Sf=t:Ef=t}function Fp(e,t,r,n){const o=Vp(t,n,r);if(o!=null){if(!Pp(o)||o<0){const a=n?`options.${r}`:"options.highWaterMark";throw new Mp(a,o)}return Lp(o)}return Rf(e.objectMode)}var Mn={getHighWaterMark:Fp,getDefaultHighWaterMark:Rf,setDefaultHighWaterMark:jp};const hs=Ie,{PromisePrototypeThen:Up,SymbolAsyncIterator:bs,SymbolIterator:ps}=le,{Buffer:Wp}=be,{ERR_INVALID_ARG_TYPE:Bp,ERR_STREAM_NULL_VALUES:Gp}=ve.codes;function Hp(e,t,r){let n;if(typeof t=="string"||t instanceof Wp)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});let o;if(t&&t[bs])o=!0,n=t[bs]();else if(t&&t[ps])o=!1,n=t[ps]();else throw new Bp("iterable",["Iterable"],t);const a=new e({objectMode:!0,highWaterMark:1,...r});let i=!1;a._read=function(){i||(i=!0,d())},a._destroy=function(u,h){Up(l(u),()=>hs.nextTick(h,u),_=>hs.nextTick(h,_||u))};async function l(u){const h=u!=null,_=typeof n.throw=="function";if(h&&_){const{value:b,done:c}=await n.throw(u);if(await b,c)return}if(typeof n.return=="function"){const{value:b}=await n.return();await b}}async function d(){for(;;){try{const{value:u,done:h}=o?await n.next():n.next();if(h)a.push(null);else{const _=u&&typeof u.then=="function"?await u:u;if(_===null)throw i=!1,new Gp;if(a.push(_))continue;i=!1}}catch(u){a.destroy(u)}break}}return a}var Af=Hp,Ri,ys;function Vn(){if(ys)return Ri;ys=1;const e=Ie,{ArrayPrototypeIndexOf:t,NumberIsInteger:r,NumberIsNaN:n,NumberParseInt:o,ObjectDefineProperties:a,ObjectKeys:i,ObjectSetPrototypeOf:l,Promise:d,SafeSet:u,SymbolAsyncDispose:h,SymbolAsyncIterator:_,Symbol:b}=le;Ri=P,P.ReadableState=ue;const{EventEmitter:c}=ct,{Stream:E,prependListener:g}=To,{Buffer:S}=be,{addAbortSignal:T}=kn,$=bt;let w=Ae.debuglog("stream",s=>{w=s});const B=Dp,v=Qt,{getHighWaterMark:x,getDefaultHighWaterMark:U}=Mn,{aggregateTwoErrors:F,codes:{ERR_INVALID_ARG_TYPE:W,ERR_METHOD_NOT_IMPLEMENTED:ee,ERR_OUT_OF_RANGE:J,ERR_STREAM_PUSH_AFTER_EOF:k,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:R},AbortError:V}=ve,{validateObject:M}=vr,j=b("kPaused"),{StringDecoder:X}=ks,Q=Af;l(P.prototype,E.prototype),l(P,E);const z=()=>{},{errorOrDestroy:Z}=v,G=1,de=2,L=4,te=8,fe=16,Te=32,Ce=64,Ne=128,Pe=256,pt=512,ke=1024,Oe=2048,p=4096,y=8192,A=16384,N=32768,O=65536,K=1<<17,Y=1<<18;function H(s){return{enumerable:!1,get(){return(this.state&s)!==0},set(f){f?this.state|=s:this.state&=~s}}}a(ue.prototype,{objectMode:H(G),ended:H(de),endEmitted:H(L),reading:H(te),constructed:H(fe),sync:H(Te),needReadable:H(Ce),emittedReadable:H(Ne),readableListening:H(Pe),resumeScheduled:H(pt),errorEmitted:H(ke),emitClose:H(Oe),autoDestroy:H(p),destroyed:H(y),closed:H(A),closeEmitted:H(N),multiAwaitDrain:H(O),readingMore:H(K),dataEmitted:H(Y)});function ue(s,f,I){typeof I!="boolean"&&(I=f instanceof rt()),this.state=Oe|p|fe|Te,s&&s.objectMode&&(this.state|=G),I&&s&&s.readableObjectMode&&(this.state|=G),this.highWaterMark=s?x(this,s,"readableHighWaterMark",I):U(!1),this.buffer=new B,this.length=0,this.pipes=[],this.flowing=null,this[j]=null,s&&s.emitClose===!1&&(this.state&=~Oe),s&&s.autoDestroy===!1&&(this.state&=~p),this.errored=null,this.defaultEncoding=s&&s.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,s&&s.encoding&&(this.decoder=new X(s.encoding),this.encoding=s.encoding)}function P(s){if(!(this instanceof P))return new P(s);const f=this instanceof rt();this._readableState=new ue(s,this,f),s&&(typeof s.read=="function"&&(this._read=s.read),typeof s.destroy=="function"&&(this._destroy=s.destroy),typeof s.construct=="function"&&(this._construct=s.construct),s.signal&&!f&&T(s.signal,this)),E.call(this,s),v.construct(this,()=>{this._readableState.needReadable&&ze(this,this._readableState)})}P.prototype.destroy=v.destroy,P.prototype._undestroy=v.undestroy,P.prototype._destroy=function(s,f){f(s)},P.prototype[c.captureRejectionSymbol]=function(s){this.destroy(s)},P.prototype[h]=function(){let s;return this.destroyed||(s=this.readableEnded?null:new V,this.destroy(s)),new d((f,I)=>$(this,m=>m&&m!==s?I(m):f(null)))},P.prototype.push=function(s,f){return he(this,s,f,!1)},P.prototype.unshift=function(s,f){return he(this,s,f,!0)};function he(s,f,I,m){w("readableAddChunk",f);const C=s._readableState;let ne;if(C.state&G||(typeof f=="string"?(I=I||C.defaultEncoding,C.encoding!==I&&(m&&C.encoding?f=S.from(f,I).toString(C.encoding):(f=S.from(f,I),I=""))):f instanceof S?I="":E._isUint8Array(f)?(f=E._uint8ArrayToBuffer(f),I=""):f!=null&&(ne=new W("chunk",["string","Buffer","Uint8Array"],f))),ne)Z(s,ne);else if(f===null)C.state&=~te,Wn(s,C);else if(C.state&G||f&&f.length>0)if(m)if(C.state&L)Z(s,new R);else{if(C.destroyed||C.errored)return!1;yt(s,C,f,!0)}else if(C.ended)Z(s,new k);else{if(C.destroyed||C.errored)return!1;C.state&=~te,C.decoder&&!I?(f=C.decoder.write(f),C.objectMode||f.length!==0?yt(s,C,f,!1):ze(s,C)):yt(s,C,f,!1)}else m||(C.state&=~te,ze(s,C));return!C.ended&&(C.length<C.highWaterMark||C.length===0)}function yt(s,f,I,m){f.flowing&&f.length===0&&!f.sync&&s.listenerCount("data")>0?(f.state&O?f.awaitDrainWriters.clear():f.awaitDrainWriters=null,f.dataEmitted=!0,s.emit("data",I)):(f.length+=f.objectMode?1:I.length,m?f.buffer.unshift(I):f.buffer.push(I),f.state&Ce&&Ye(s)),ze(s,f)}P.prototype.isPaused=function(){const s=this._readableState;return s[j]===!0||s.flowing===!1},P.prototype.setEncoding=function(s){const f=new X(s);this._readableState.decoder=f,this._readableState.encoding=this._readableState.decoder.encoding;const I=this._readableState.buffer;let m="";for(const C of I)m+=f.write(C);return I.clear(),m!==""&&I.push(m),this._readableState.length=m.length,this};const Fn=1073741824;function Un(s){if(s>Fn)throw new J("size","<= 1GiB",s);return s--,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s++,s}function Zt(s,f){return s<=0||f.length===0&&f.ended?0:f.state&G?1:n(s)?f.flowing&&f.length?f.buffer.first().length:f.length:s<=f.length?s:f.ended?f.length:0}P.prototype.read=function(s){w("read",s),s===void 0?s=NaN:r(s)||(s=o(s,10));const f=this._readableState,I=s;if(s>f.highWaterMark&&(f.highWaterMark=Un(s)),s!==0&&(f.state&=~Ne),s===0&&f.needReadable&&((f.highWaterMark!==0?f.length>=f.highWaterMark:f.length>0)||f.ended))return w("read: emitReadable",f.length,f.ended),f.length===0&&f.ended?gt(this):Ye(this),null;if(s=Zt(s,f),s===0&&f.ended)return f.length===0&&gt(this),null;let m=(f.state&Ce)!==0;if(w("need readable",m),(f.length===0||f.length-s<f.highWaterMark)&&(m=!0,w("length less than watermark",m)),f.ended||f.reading||f.destroyed||f.errored||!f.constructed)m=!1,w("reading, ended or constructing",m);else if(m){w("do read"),f.state|=te|Te,f.length===0&&(f.state|=Ce);try{this._read(f.highWaterMark)}catch(ne){Z(this,ne)}f.state&=~Te,f.reading||(s=Zt(I,f))}let C;return s>0?C=ir(s,f):C=null,C===null?(f.needReadable=f.length<=f.highWaterMark,s=0):(f.length-=s,f.multiAwaitDrain?f.awaitDrainWriters.clear():f.awaitDrainWriters=null),f.length===0&&(f.ended||(f.needReadable=!0),I!==s&&f.ended&&gt(this)),C!==null&&!f.errorEmitted&&!f.closeEmitted&&(f.dataEmitted=!0,this.emit("data",C)),C};function Wn(s,f){if(w("onEofChunk"),!f.ended){if(f.decoder){const I=f.decoder.end();I&&I.length&&(f.buffer.push(I),f.length+=f.objectMode?1:I.length)}f.ended=!0,f.sync?Ye(s):(f.needReadable=!1,f.emittedReadable=!0,er(s))}}function Ye(s){const f=s._readableState;w("emitReadable",f.needReadable,f.emittedReadable),f.needReadable=!1,f.emittedReadable||(w("emitReadable",f.flowing),f.emittedReadable=!0,e.nextTick(er,s))}function er(s){const f=s._readableState;w("emitReadable_",f.destroyed,f.length,f.ended),!f.destroyed&&!f.errored&&(f.length||f.ended)&&(s.emit("readable"),f.emittedReadable=!1),f.needReadable=!f.flowing&&!f.ended&&f.length<=f.highWaterMark,rr(s)}function ze(s,f){!f.readingMore&&f.constructed&&(f.readingMore=!0,e.nextTick(Bn,s,f))}function Bn(s,f){for(;!f.reading&&!f.ended&&(f.length<f.highWaterMark||f.flowing&&f.length===0);){const I=f.length;if(w("maybeReadMore read 0"),s.read(0),I===f.length)break}f.readingMore=!1}P.prototype._read=function(s){throw new ee("_read()")},P.prototype.pipe=function(s,f){const I=this,m=this._readableState;m.pipes.length===1&&(m.multiAwaitDrain||(m.multiAwaitDrain=!0,m.awaitDrainWriters=new u(m.awaitDrainWriters?[m.awaitDrainWriters]:[]))),m.pipes.push(s),w("pipe count=%d opts=%j",m.pipes.length,f);const ne=(!f||f.end!==!1)&&s!==e.stdout&&s!==e.stderr?ar:Me;m.endEmitted?e.nextTick(ne):I.once("end",ne),s.on("unpipe",oe);function oe(Ee,ce){w("onunpipe"),Ee===I&&ce&&ce.hasUnpiped===!1&&(ce.hasUnpiped=!0,Xn())}function ar(){w("onend"),s.end()}let we,sr=!1;function Xn(){w("cleanup"),s.removeListener("close",Et),s.removeListener("finish",St),we&&s.removeListener("drain",we),s.removeListener("error",wt),s.removeListener("unpipe",oe),I.removeListener("end",ar),I.removeListener("end",Me),I.removeListener("data",fr),sr=!0,we&&m.awaitDrainWriters&&(!s._writableState||s._writableState.needDrain)&&we()}function lr(){sr||(m.pipes.length===1&&m.pipes[0]===s?(w("false write response, pause",0),m.awaitDrainWriters=s,m.multiAwaitDrain=!1):m.pipes.length>1&&m.pipes.includes(s)&&(w("false write response, pause",m.awaitDrainWriters.size),m.awaitDrainWriters.add(s)),I.pause()),we||(we=Gn(I,s),s.on("drain",we))}I.on("data",fr);function fr(Ee){w("ondata");const ce=s.write(Ee);w("dest.write",ce),ce===!1&&lr()}function wt(Ee){if(w("onerror",Ee),Me(),s.removeListener("error",wt),s.listenerCount("error")===0){const ce=s._writableState||s._readableState;ce&&!ce.errorEmitted?Z(s,Ee):s.emit("error",Ee)}}g(s,"error",wt);function Et(){s.removeListener("finish",St),Me()}s.once("close",Et);function St(){w("onfinish"),s.removeListener("close",Et),Me()}s.once("finish",St);function Me(){w("unpipe"),I.unpipe(s)}return s.emit("pipe",I),s.writableNeedDrain===!0?lr():m.flowing||(w("pipe resume"),I.resume()),s};function Gn(s,f){return function(){const m=s._readableState;m.awaitDrainWriters===f?(w("pipeOnDrain",1),m.awaitDrainWriters=null):m.multiAwaitDrain&&(w("pipeOnDrain",m.awaitDrainWriters.size),m.awaitDrainWriters.delete(f)),(!m.awaitDrainWriters||m.awaitDrainWriters.size===0)&&s.listenerCount("data")&&s.resume()}}P.prototype.unpipe=function(s){const f=this._readableState,I={hasUnpiped:!1};if(f.pipes.length===0)return this;if(!s){const C=f.pipes;f.pipes=[],this.pause();for(let ne=0;ne<C.length;ne++)C[ne].emit("unpipe",this,{hasUnpiped:!1});return this}const m=t(f.pipes,s);return m===-1?this:(f.pipes.splice(m,1),f.pipes.length===0&&this.pause(),s.emit("unpipe",this,I),this)},P.prototype.on=function(s,f){const I=E.prototype.on.call(this,s,f),m=this._readableState;return s==="data"?(m.readableListening=this.listenerCount("readable")>0,m.flowing!==!1&&this.resume()):s==="readable"&&!m.endEmitted&&!m.readableListening&&(m.readableListening=m.needReadable=!0,m.flowing=!1,m.emittedReadable=!1,w("on readable",m.length,m.reading),m.length?Ye(this):m.reading||e.nextTick(Hn,this)),I},P.prototype.addListener=P.prototype.on,P.prototype.removeListener=function(s,f){const I=E.prototype.removeListener.call(this,s,f);return s==="readable"&&e.nextTick(tr,this),I},P.prototype.off=P.prototype.removeListener,P.prototype.removeAllListeners=function(s){const f=E.prototype.removeAllListeners.apply(this,arguments);return(s==="readable"||s===void 0)&&e.nextTick(tr,this),f};function tr(s){const f=s._readableState;f.readableListening=s.listenerCount("readable")>0,f.resumeScheduled&&f[j]===!1?f.flowing=!0:s.listenerCount("data")>0?s.resume():f.readableListening||(f.flowing=null)}function Hn(s){w("readable nexttick read 0"),s.read(0)}P.prototype.resume=function(){const s=this._readableState;return s.flowing||(w("resume"),s.flowing=!s.readableListening,Kn(this,s)),s[j]=!1,this};function Kn(s,f){f.resumeScheduled||(f.resumeScheduled=!0,e.nextTick(Jn,s,f))}function Jn(s,f){w("resume",f.reading),f.reading||s.read(0),f.resumeScheduled=!1,s.emit("resume"),rr(s),f.flowing&&!f.reading&&s.read(0)}P.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[j]=!0,this};function rr(s){const f=s._readableState;for(w("flow",f.flowing);f.flowing&&s.read()!==null;);}P.prototype.wrap=function(s){let f=!1;s.on("data",m=>{!this.push(m)&&s.pause&&(f=!0,s.pause())}),s.on("end",()=>{this.push(null)}),s.on("error",m=>{Z(this,m)}),s.on("close",()=>{this.destroy()}),s.on("destroy",()=>{this.destroy()}),this._read=()=>{f&&s.resume&&(f=!1,s.resume())};const I=i(s);for(let m=1;m<I.length;m++){const C=I[m];this[C]===void 0&&typeof s[C]=="function"&&(this[C]=s[C].bind(s))}return this},P.prototype[_]=function(){return nr(this)},P.prototype.iterator=function(s){return s!==void 0&&M(s,"options"),nr(this,s)};function nr(s,f){typeof s.read!="function"&&(s=P.wrap(s,{objectMode:!0}));const I=qn(s,f);return I.stream=s,I}async function*qn(s,f){let I=z;function m(oe){this===s?(I(),I=z):I=oe}s.on("readable",m);let C;const ne=$(s,{writable:!1},oe=>{C=oe?F(C,oe):null,I(),I=z});try{for(;;){const oe=s.destroyed?null:s.read();if(oe!==null)yield oe;else{if(C)throw C;if(C===null)return;await new d(m)}}}catch(oe){throw C=F(C,oe),C}finally{(C||(f==null?void 0:f.destroyOnReturn)!==!1)&&(C===void 0||s._readableState.autoDestroy)?v.destroyer(s,null):(s.off("readable",m),ne())}}a(P.prototype,{readable:{__proto__:null,get(){const s=this._readableState;return!!s&&s.readable!==!1&&!s.destroyed&&!s.errorEmitted&&!s.endEmitted},set(s){this._readableState&&(this._readableState.readable=!!s)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(s){this._readableState&&(this._readableState.flowing=s)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(s){this._readableState&&(this._readableState.destroyed=s)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(ue.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[j]!==!1},set(s){this[j]=!!s}}}),P._fromList=ir;function ir(s,f){if(f.length===0)return null;let I;return f.objectMode?I=f.buffer.shift():!s||s>=f.length?(f.decoder?I=f.buffer.join(""):f.buffer.length===1?I=f.buffer.first():I=f.buffer.concat(f.length),f.buffer.clear()):I=f.buffer.consume(s,f.decoder),I}function gt(s){const f=s._readableState;w("endReadable",f.endEmitted),f.endEmitted||(f.ended=!0,e.nextTick(Yn,f,s))}function Yn(s,f){if(w("endReadableNT",s.endEmitted,s.length),!s.errored&&!s.closeEmitted&&!s.endEmitted&&s.length===0){if(s.endEmitted=!0,f.emit("end"),f.writable&&f.allowHalfOpen===!1)e.nextTick(zn,f);else if(s.autoDestroy){const I=f._writableState;(!I||I.autoDestroy&&(I.finished||I.writable===!1))&&f.destroy()}}}function zn(s){s.writable&&!s.writableEnded&&!s.destroyed&&s.end()}P.from=function(s,f){return Q(P,s,f)};let _t;function or(){return _t===void 0&&(_t={}),_t}return P.fromWeb=function(s,f){return or().newStreamReadableFromReadableStream(s,f)},P.toWeb=function(s,f){return or().newReadableStreamFromStreamReadable(s,f)},P.wrap=function(s,f){var I,m;return new P({objectMode:(I=(m=s.readableObjectMode)!==null&&m!==void 0?m:s.objectMode)!==null&&I!==void 0?I:!0,...f,destroy(C,ne){v.destroyer(s,C),ne(C)}}).wrap(s)},Ri}var Ai,gs;function Co(){if(gs)return Ai;gs=1;const e=Ie,{ArrayPrototypeSlice:t,Error:r,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:o,ObjectDefineProperties:a,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:l,Symbol:d,SymbolHasInstance:u}=le;Ai=M,M.WritableState=R;const{EventEmitter:h}=ct,_=To.Stream,{Buffer:b}=be,c=Qt,{addAbortSignal:E}=kn,{getHighWaterMark:g,getDefaultHighWaterMark:S}=Mn,{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:$,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:B,ERR_STREAM_DESTROYED:v,ERR_STREAM_ALREADY_FINISHED:x,ERR_STREAM_NULL_VALUES:U,ERR_STREAM_WRITE_AFTER_END:F,ERR_UNKNOWN_ENCODING:W}=ve.codes,{errorOrDestroy:ee}=c;i(M.prototype,_.prototype),i(M,_);function J(){}const k=d("kOnFinished");function R(p,y,A){typeof A!="boolean"&&(A=y instanceof rt()),this.objectMode=!!(p&&p.objectMode),A&&(this.objectMode=this.objectMode||!!(p&&p.writableObjectMode)),this.highWaterMark=p?g(this,p,"writableHighWaterMark",A):S(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const N=!!(p&&p.decodeStrings===!1);this.decodeStrings=!N,this.defaultEncoding=p&&p.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=Z.bind(void 0,y),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!p||p.emitClose!==!1,this.autoDestroy=!p||p.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[k]=[]}function V(p){p.buffered=[],p.bufferedIndex=0,p.allBuffers=!0,p.allNoop=!0}R.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},o(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function M(p){const y=this instanceof rt();if(!y&&!n(M,this))return new M(p);this._writableState=new R(p,this,y),p&&(typeof p.write=="function"&&(this._write=p.write),typeof p.writev=="function"&&(this._writev=p.writev),typeof p.destroy=="function"&&(this._destroy=p.destroy),typeof p.final=="function"&&(this._final=p.final),typeof p.construct=="function"&&(this._construct=p.construct),p.signal&&E(p.signal,this)),_.call(this,p),c.construct(this,()=>{const A=this._writableState;A.writing||te(this,A),Ne(this,A)})}o(M,u,{__proto__:null,value:function(p){return n(this,p)?!0:this!==M?!1:p&&p._writableState instanceof R}}),M.prototype.pipe=function(){ee(this,new B)};function j(p,y,A,N){const O=p._writableState;if(typeof A=="function")N=A,A=O.defaultEncoding;else{if(!A)A=O.defaultEncoding;else if(A!=="buffer"&&!b.isEncoding(A))throw new W(A);typeof N!="function"&&(N=J)}if(y===null)throw new U;if(!O.objectMode)if(typeof y=="string")O.decodeStrings!==!1&&(y=b.from(y,A),A="buffer");else if(y instanceof b)A="buffer";else if(_._isUint8Array(y))y=_._uint8ArrayToBuffer(y),A="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],y);let K;return O.ending?K=new F:O.destroyed&&(K=new v("write")),K?(e.nextTick(N,K),ee(p,K,!0),K):(O.pendingcb++,X(p,O,y,A,N))}M.prototype.write=function(p,y,A){return j(this,p,y,A)===!0},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const p=this._writableState;p.corked&&(p.corked--,p.writing||te(this,p))},M.prototype.setDefaultEncoding=function(y){if(typeof y=="string"&&(y=l(y)),!b.isEncoding(y))throw new W(y);return this._writableState.defaultEncoding=y,this};function X(p,y,A,N,O){const K=y.objectMode?1:A.length;y.length+=K;const Y=y.length<y.highWaterMark;return Y||(y.needDrain=!0),y.writing||y.corked||y.errored||!y.constructed?(y.buffered.push({chunk:A,encoding:N,callback:O}),y.allBuffers&&N!=="buffer"&&(y.allBuffers=!1),y.allNoop&&O!==J&&(y.allNoop=!1)):(y.writelen=K,y.writecb=O,y.writing=!0,y.sync=!0,p._write(A,N,y.onwrite),y.sync=!1),Y&&!y.errored&&!y.destroyed}function Q(p,y,A,N,O,K,Y){y.writelen=N,y.writecb=Y,y.writing=!0,y.sync=!0,y.destroyed?y.onwrite(new v("write")):A?p._writev(O,y.onwrite):p._write(O,K,y.onwrite),y.sync=!1}function z(p,y,A,N){--y.pendingcb,N(A),L(y),ee(p,A)}function Z(p,y){const A=p._writableState,N=A.sync,O=A.writecb;if(typeof O!="function"){ee(p,new w);return}A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0,y?(y.stack,A.errored||(A.errored=y),p._readableState&&!p._readableState.errored&&(p._readableState.errored=y),N?e.nextTick(z,p,A,y,O):z(p,A,y,O)):(A.buffered.length>A.bufferedIndex&&te(p,A),N?A.afterWriteTickInfo!==null&&A.afterWriteTickInfo.cb===O?A.afterWriteTickInfo.count++:(A.afterWriteTickInfo={count:1,cb:O,stream:p,state:A},e.nextTick(G,A.afterWriteTickInfo)):de(p,A,1,O))}function G({stream:p,state:y,count:A,cb:N}){return y.afterWriteTickInfo=null,de(p,y,A,N)}function de(p,y,A,N){for(!y.ending&&!p.destroyed&&y.length===0&&y.needDrain&&(y.needDrain=!1,p.emit("drain"));A-- >0;)y.pendingcb--,N();y.destroyed&&L(y),Ne(p,y)}function L(p){if(p.writing)return;for(let O=p.bufferedIndex;O<p.buffered.length;++O){var y;const{chunk:K,callback:Y}=p.buffered[O],H=p.objectMode?1:K.length;p.length-=H,Y((y=p.errored)!==null&&y!==void 0?y:new v("write"))}const A=p[k].splice(0);for(let O=0;O<A.length;O++){var N;A[O]((N=p.errored)!==null&&N!==void 0?N:new v("end"))}V(p)}function te(p,y){if(y.corked||y.bufferProcessing||y.destroyed||!y.constructed)return;const{buffered:A,bufferedIndex:N,objectMode:O}=y,K=A.length-N;if(!K)return;let Y=N;if(y.bufferProcessing=!0,K>1&&p._writev){y.pendingcb-=K-1;const H=y.allNoop?J:P=>{for(let he=Y;he<A.length;++he)A[he].callback(P)},ue=y.allNoop&&Y===0?A:t(A,Y);ue.allBuffers=y.allBuffers,Q(p,y,!0,y.length,ue,"",H),V(y)}else{do{const{chunk:H,encoding:ue,callback:P}=A[Y];A[Y++]=null;const he=O?1:H.length;Q(p,y,!1,he,H,ue,P)}while(Y<A.length&&!y.writing);Y===A.length?V(y):Y>256?(A.splice(0,Y),y.bufferedIndex=0):y.bufferedIndex=Y}y.bufferProcessing=!1}M.prototype._write=function(p,y,A){if(this._writev)this._writev([{chunk:p,encoding:y}],A);else throw new $("_write()")},M.prototype._writev=null,M.prototype.end=function(p,y,A){const N=this._writableState;typeof p=="function"?(A=p,p=null,y=null):typeof y=="function"&&(A=y,y=null);let O;if(p!=null){const K=j(this,p,y);K instanceof r&&(O=K)}return N.corked&&(N.corked=1,this.uncork()),O||(!N.errored&&!N.ending?(N.ending=!0,Ne(this,N,!0),N.ended=!0):N.finished?O=new x("end"):N.destroyed&&(O=new v("end"))),typeof A=="function"&&(O||N.finished?e.nextTick(A,O):N[k].push(A)),this};function fe(p){return p.ending&&!p.destroyed&&p.constructed&&p.length===0&&!p.errored&&p.buffered.length===0&&!p.finished&&!p.writing&&!p.errorEmitted&&!p.closeEmitted}function Te(p,y){let A=!1;function N(O){if(A){ee(p,O??w());return}if(A=!0,y.pendingcb--,O){const K=y[k].splice(0);for(let Y=0;Y<K.length;Y++)K[Y](O);ee(p,O,y.sync)}else fe(y)&&(y.prefinished=!0,p.emit("prefinish"),y.pendingcb++,e.nextTick(Pe,p,y))}y.sync=!0,y.pendingcb++;try{p._final(N)}catch(O){N(O)}y.sync=!1}function Ce(p,y){!y.prefinished&&!y.finalCalled&&(typeof p._final=="function"&&!y.destroyed?(y.finalCalled=!0,Te(p,y)):(y.prefinished=!0,p.emit("prefinish")))}function Ne(p,y,A){fe(y)&&(Ce(p,y),y.pendingcb===0&&(A?(y.pendingcb++,e.nextTick((N,O)=>{fe(O)?Pe(N,O):O.pendingcb--},p,y)):fe(y)&&(y.pendingcb++,Pe(p,y))))}function Pe(p,y){y.pendingcb--,y.finished=!0;const A=y[k].splice(0);for(let N=0;N<A.length;N++)A[N]();if(p.emit("finish"),y.autoDestroy){const N=p._readableState;(!N||N.autoDestroy&&(N.endEmitted||N.readable===!1))&&p.destroy()}}a(M.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(p){this._writableState&&(this._writableState.destroyed=p)}},writable:{__proto__:null,get(){const p=this._writableState;return!!p&&p.writable!==!1&&!p.destroyed&&!p.errored&&!p.ending&&!p.ended},set(p){this._writableState&&(this._writableState.writable=!!p)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const p=this._writableState;return p?!p.destroyed&&!p.ending&&p.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const pt=c.destroy;M.prototype.destroy=function(p,y){const A=this._writableState;return!A.destroyed&&(A.bufferedIndex<A.buffered.length||A[k].length)&&e.nextTick(L,A),pt.call(this,p,y),this},M.prototype._undestroy=c.undestroy,M.prototype._destroy=function(p,y){y(p)},M.prototype[h.captureRejectionSymbol]=function(p){this.destroy(p)};let ke;function Oe(){return ke===void 0&&(ke={}),ke}return M.fromWeb=function(p,y){return Oe().newStreamWritableFromWritableStream(p,y)},M.toWeb=function(p){return Oe().newWritableStreamFromStreamWritable(p)},Ai}var Ii,_s;function Kp(){if(_s)return Ii;_s=1;const e=Ie,t=be,{isReadable:r,isWritable:n,isIterable:o,isNodeStream:a,isReadableNodeStream:i,isWritableNodeStream:l,isDuplexNodeStream:d,isReadableStream:u,isWritableStream:h}=ot,_=bt,{AbortError:b,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:E}}=ve,{destroyer:g}=Qt,S=rt(),T=Vn(),$=Co(),{createDeferredPromise:w}=Ae,B=Af,v=globalThis.Blob||t.Blob,x=typeof v<"u"?function(R){return R instanceof v}:function(R){return!1},U=globalThis.AbortController||Ge().AbortController,{FunctionPrototypeCall:F}=le;class W extends S{constructor(R){super(R),(R==null?void 0:R.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(R==null?void 0:R.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}Ii=function k(R,V){if(d(R))return R;if(i(R))return J({readable:R});if(l(R))return J({writable:R});if(a(R))return J({writable:!1,readable:!1});if(u(R))return J({readable:T.fromWeb(R)});if(h(R))return J({writable:$.fromWeb(R)});if(typeof R=="function"){const{value:j,write:X,final:Q,destroy:z}=ee(R);if(o(j))return B(W,j,{objectMode:!0,write:X,final:Q,destroy:z});const Z=j==null?void 0:j.then;if(typeof Z=="function"){let G;const de=F(Z,j,L=>{if(L!=null)throw new E("nully","body",L)},L=>{g(G,L)});return G=new W({objectMode:!0,readable:!1,write:X,final(L){Q(async()=>{try{await de,e.nextTick(L,null)}catch(te){e.nextTick(L,te)}})},destroy:z})}throw new E("Iterable, AsyncIterable or AsyncFunction",V,j)}if(x(R))return k(R.arrayBuffer());if(o(R))return B(W,R,{objectMode:!0,writable:!1});if(u(R==null?void 0:R.readable)&&h(R==null?void 0:R.writable))return W.fromWeb(R);if(typeof(R==null?void 0:R.writable)=="object"||typeof(R==null?void 0:R.readable)=="object"){const j=R!=null&&R.readable?i(R==null?void 0:R.readable)?R==null?void 0:R.readable:k(R.readable):void 0,X=R!=null&&R.writable?l(R==null?void 0:R.writable)?R==null?void 0:R.writable:k(R.writable):void 0;return J({readable:j,writable:X})}const M=R==null?void 0:R.then;if(typeof M=="function"){let j;return F(M,R,X=>{X!=null&&j.push(X),j.push(null)},X=>{g(j,X)}),j=new W({objectMode:!0,writable:!1,read(){}})}throw new c(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],R)};function ee(k){let{promise:R,resolve:V}=w();const M=new U,j=M.signal;return{value:k(async function*(){for(;;){const Q=R;R=null;const{chunk:z,done:Z,cb:G}=await Q;if(e.nextTick(G),Z)return;if(j.aborted)throw new b(void 0,{cause:j.reason});({promise:R,resolve:V}=w()),yield z}}(),{signal:j}),write(Q,z,Z){const G=V;V=null,G({chunk:Q,done:!1,cb:Z})},final(Q){const z=V;V=null,z({done:!0,cb:Q})},destroy(Q,z){M.abort(),z(Q)}}}function J(k){const R=k.readable&&typeof k.readable.read!="function"?T.wrap(k.readable):k.readable,V=k.writable;let M=!!r(R),j=!!n(V),X,Q,z,Z,G;function de(L){const te=Z;Z=null,te?te(L):L&&G.destroy(L)}return G=new W({readableObjectMode:!!(R!=null&&R.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:M,writable:j}),j&&(_(V,L=>{j=!1,L&&g(R,L),de(L)}),G._write=function(L,te,fe){V.write(L,te)?fe():X=fe},G._final=function(L){V.end(),Q=L},V.on("drain",function(){if(X){const L=X;X=null,L()}}),V.on("finish",function(){if(Q){const L=Q;Q=null,L()}})),M&&(_(R,L=>{M=!1,L&&g(R,L),de(L)}),R.on("readable",function(){if(z){const L=z;z=null,L()}}),R.on("end",function(){G.push(null)}),G._read=function(){for(;;){const L=R.read();if(L===null){z=G._read;return}if(!G.push(L))return}}),G._destroy=function(L,te){!L&&Z!==null&&(L=new b),z=null,X=null,Q=null,Z===null?te(L):(Z=te,g(V,L),g(R,L))},G}return Ii}var mi,ws;function rt(){if(ws)return mi;ws=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:r,ObjectSetPrototypeOf:n}=le;mi=i;const o=Vn(),a=Co();n(i.prototype,o.prototype),n(i,o);{const h=r(a.prototype);for(let _=0;_<h.length;_++){const b=h[_];i.prototype[b]||(i.prototype[b]=a.prototype[b])}}function i(h){if(!(this instanceof i))return new i(h);o.call(this,h),a.call(this,h),h?(this.allowHalfOpen=h.allowHalfOpen!==!1,h.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),h.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(i.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(h){this._readableState&&this._writableState&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}}});let l;function d(){return l===void 0&&(l={}),l}i.fromWeb=function(h,_){return d().newStreamDuplexFromReadableWritablePair(h,_)},i.toWeb=function(h){return d().newReadableWritablePairFromDuplex(h)};let u;return i.from=function(h){return u||(u=Kp()),u(h,"body")},mi}const{ObjectSetPrototypeOf:If,Symbol:Jp}=le;var mf=nt;const{ERR_METHOD_NOT_IMPLEMENTED:qp}=ve.codes,No=rt(),{getHighWaterMark:Yp}=Mn;If(nt.prototype,No.prototype);If(nt,No);const Rr=Jp("kCallback");function nt(e){if(!(this instanceof nt))return new nt(e);const t=e?Yp(this,e,"readableHighWaterMark",!0):null;t===0&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),No.call(this,e),this._readableState.sync=!1,this[Rr]=null,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",zp)}function no(e){typeof this._flush=="function"&&!this.destroyed?this._flush((t,r)=>{if(t){e?e(t):this.destroy(t);return}r!=null&&this.push(r),this.push(null),e&&e()}):(this.push(null),e&&e())}function zp(){this._final!==no&&no.call(this)}nt.prototype._final=no;nt.prototype._transform=function(e,t,r){throw new qp("_transform()")};nt.prototype._write=function(e,t,r){const n=this._readableState,o=this._writableState,a=n.length;this._transform(e,t,(i,l)=>{if(i){r(i);return}l!=null&&this.push(l),o.ended||a===n.length||n.length<n.highWaterMark?r():this[Rr]=r})};nt.prototype._read=function(){if(this[Rr]){const e=this[Rr];this[Rr]=null,e()}};const{ObjectSetPrototypeOf:vf}=le;var Tf=Kt;const Oo=mf;vf(Kt.prototype,Oo.prototype);vf(Kt,Oo);function Kt(e){if(!(this instanceof Kt))return new Kt(e);Oo.call(this,e)}Kt.prototype._transform=function(e,t,r){r(null,e)};const wr=Ie,{ArrayIsArray:Xp,Promise:Qp,SymbolAsyncIterator:Zp,SymbolDispose:ey}=le,Qr=bt,{once:ty}=Ae,ry=Qt,Es=rt(),{aggregateTwoErrors:ny,codes:{ERR_INVALID_ARG_TYPE:io,ERR_INVALID_RETURN_VALUE:vi,ERR_MISSING_ARGS:iy,ERR_STREAM_DESTROYED:oy,ERR_STREAM_PREMATURE_CLOSE:ay},AbortError:sy}=ve,{validateFunction:ly,validateAbortSignal:fy}=vr,{isIterable:vt,isReadable:Ti,isReadableNodeStream:Hr,isNodeStream:Ss,isTransformStream:Ut,isWebStream:dy,isReadableStream:Ci,isReadableFinished:uy}=ot,cy=globalThis.AbortController||Ge().AbortController;let Ni,Oi,$i;function Rs(e,t,r){let n=!1;e.on("close",()=>{n=!0});const o=Qr(e,{readable:t,writable:r},a=>{n=!a});return{destroy:a=>{n||(n=!0,ry.destroyer(e,a||new oy("pipe")))},cleanup:o}}function hy(e){return ly(e[e.length-1],"streams[stream.length - 1]"),e.pop()}function xi(e){if(vt(e))return e;if(Hr(e))return by(e);throw new io("val",["Readable","Iterable","AsyncIterable"],e)}async function*by(e){Oi||(Oi=Vn()),yield*Oi.prototype[Zp].call(e)}async function Vr(e,t,r,{end:n}){let o,a=null;const i=u=>{if(u&&(o=u),a){const h=a;a=null,h()}},l=()=>new Qp((u,h)=>{o?h(o):a=()=>{o?h(o):u()}});t.on("drain",i);const d=Qr(t,{readable:!1},i);try{t.writableNeedDrain&&await l();for await(const u of e)t.write(u)||await l();n&&(t.end(),await l()),r()}catch(u){r(o!==u?ny(o,u):u)}finally{d(),t.off("drain",i)}}async function Di(e,t,r,{end:n}){Ut(t)&&(t=t.writable);const o=t.getWriter();try{for await(const a of e)await o.ready,o.write(a).catch(()=>{});await o.ready,n&&await o.close(),r()}catch(a){try{await o.abort(a),r(a)}catch(i){r(i)}}}function py(...e){return Cf(e,ty(hy(e)))}function Cf(e,t,r){if(e.length===1&&Xp(e[0])&&(e=e[0]),e.length<2)throw new iy("streams");const n=new cy,o=n.signal,a=r==null?void 0:r.signal,i=[];fy(a,"options.signal");function l(){E(new sy)}$i=$i||Ae.addAbortListener;let d;a&&(d=$i(a,l));let u,h;const _=[];let b=0;function c($){E($,--b===0)}function E($,w){var B;if($&&(!u||u.code==="ERR_STREAM_PREMATURE_CLOSE")&&(u=$),!(!u&&!w)){for(;_.length;)_.shift()(u);(B=d)===null||B===void 0||B[ey](),n.abort(),w&&(u||i.forEach(v=>v()),wr.nextTick(t,u,h))}}let g;for(let $=0;$<e.length;$++){const w=e[$],B=$<e.length-1,v=$>0,x=B||(r==null?void 0:r.end)!==!1,U=$===e.length-1;if(Ss(w)){let F=function(W){W&&W.name!=="AbortError"&&W.code!=="ERR_STREAM_PREMATURE_CLOSE"&&c(W)};if(x){const{destroy:W,cleanup:ee}=Rs(w,B,v);_.push(W),Ti(w)&&U&&i.push(ee)}w.on("error",F),Ti(w)&&U&&i.push(()=>{w.removeListener("error",F)})}if($===0)if(typeof w=="function"){if(g=w({signal:o}),!vt(g))throw new vi("Iterable, AsyncIterable or Stream","source",g)}else vt(w)||Hr(w)||Ut(w)?g=w:g=Es.from(w);else if(typeof w=="function"){if(Ut(g)){var S;g=xi((S=g)===null||S===void 0?void 0:S.readable)}else g=xi(g);if(g=w(g,{signal:o}),B){if(!vt(g,!0))throw new vi("AsyncIterable",`transform[${$-1}]`,g)}else{var T;Ni||(Ni=Tf);const F=new Ni({objectMode:!0}),W=(T=g)===null||T===void 0?void 0:T.then;if(typeof W=="function")b++,W.call(g,k=>{h=k,k!=null&&F.write(k),x&&F.end(),wr.nextTick(c)},k=>{F.destroy(k),wr.nextTick(c,k)});else if(vt(g,!0))b++,Vr(g,F,c,{end:x});else if(Ci(g)||Ut(g)){const k=g.readable||g;b++,Vr(k,F,c,{end:x})}else throw new vi("AsyncIterable or Promise","destination",g);g=F;const{destroy:ee,cleanup:J}=Rs(g,!1,!0);_.push(ee),U&&i.push(J)}}else if(Ss(w)){if(Hr(g)){b+=2;const F=yy(g,w,c,{end:x});Ti(w)&&U&&i.push(F)}else if(Ut(g)||Ci(g)){const F=g.readable||g;b++,Vr(F,w,c,{end:x})}else if(vt(g))b++,Vr(g,w,c,{end:x});else throw new io("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=w}else if(dy(w)){if(Hr(g))b++,Di(xi(g),w,c,{end:x});else if(Ci(g)||vt(g))b++,Di(g,w,c,{end:x});else if(Ut(g))b++,Di(g.readable,w,c,{end:x});else throw new io("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],g);g=w}else g=Es.from(w)}return(o!=null&&o.aborted||a!=null&&a.aborted)&&wr.nextTick(l),g}function yy(e,t,r,{end:n}){let o=!1;if(t.on("close",()=>{o||r(new ay)}),e.pipe(t,{end:!1}),n){let a=function(){o=!0,t.end()};uy(e)?wr.nextTick(a):e.once("end",a)}else r();return Qr(e,{readable:!0,writable:!1},a=>{const i=e._readableState;a&&a.code==="ERR_STREAM_PREMATURE_CLOSE"&&i&&i.ended&&!i.errored&&!i.errorEmitted?e.once("end",r).once("error",r):r(a)}),Qr(t,{readable:!1,writable:!0},r)}var $o={pipelineImpl:Cf,pipeline:py};const{pipeline:gy}=$o,jr=rt(),{destroyer:_y}=Qt,{isNodeStream:Fr,isReadable:As,isWritable:Is,isWebStream:Li,isTransformStream:At,isWritableStream:ms,isReadableStream:vs}=ot,{AbortError:wy,codes:{ERR_INVALID_ARG_VALUE:Ts,ERR_MISSING_ARGS:Ey}}=ve,Sy=bt;var Nf=function(...t){if(t.length===0)throw new Ey("streams");if(t.length===1)return jr.from(t[0]);const r=[...t];if(typeof t[0]=="function"&&(t[0]=jr.from(t[0])),typeof t[t.length-1]=="function"){const c=t.length-1;t[c]=jr.from(t[c])}for(let c=0;c<t.length;++c)if(!(!Fr(t[c])&&!Li(t[c]))){if(c<t.length-1&&!(As(t[c])||vs(t[c])||At(t[c])))throw new Ts(`streams[${c}]`,r[c],"must be readable");if(c>0&&!(Is(t[c])||ms(t[c])||At(t[c])))throw new Ts(`streams[${c}]`,r[c],"must be writable")}let n,o,a,i,l;function d(c){const E=i;i=null,E?E(c):c?l.destroy(c):!b&&!_&&l.destroy()}const u=t[0],h=gy(t,d),_=!!(Is(u)||ms(u)||At(u)),b=!!(As(h)||vs(h)||At(h));if(l=new jr({writableObjectMode:!!(u!=null&&u.writableObjectMode),readableObjectMode:!!(h!=null&&h.readableObjectMode),writable:_,readable:b}),_){if(Fr(u))l._write=function(E,g,S){u.write(E,g)?S():n=S},l._final=function(E){u.end(),o=E},u.on("drain",function(){if(n){const E=n;n=null,E()}});else if(Li(u)){const g=(At(u)?u.writable:u).getWriter();l._write=async function(S,T,$){try{await g.ready,g.write(S).catch(()=>{}),$()}catch(w){$(w)}},l._final=async function(S){try{await g.ready,g.close().catch(()=>{}),o=S}catch(T){S(T)}}}const c=At(h)?h.readable:h;Sy(c,()=>{if(o){const E=o;o=null,E()}})}if(b){if(Fr(h))h.on("readable",function(){if(a){const c=a;a=null,c()}}),h.on("end",function(){l.push(null)}),l._read=function(){for(;;){const c=h.read();if(c===null){a=l._read;return}if(!l.push(c))return}};else if(Li(h)){const E=(At(h)?h.readable:h).getReader();l._read=async function(){for(;;)try{const{value:g,done:S}=await E.read();if(!l.push(g))return;if(S){l.push(null);return}}catch{return}}}}return l._destroy=function(c,E){!c&&i!==null&&(c=new wy),a=null,n=null,o=null,i===null?E(c):(i=E,Fr(h)&&_y(h,c))},l};const Ry=globalThis.AbortController||Ge().AbortController,{codes:{ERR_INVALID_ARG_VALUE:Ay,ERR_INVALID_ARG_TYPE:Tr,ERR_MISSING_ARGS:Iy,ERR_OUT_OF_RANGE:my},AbortError:Ke}=ve,{validateAbortSignal:kt,validateInteger:Cs,validateObject:Mt}=vr,vy=le.Symbol("kWeak"),Ty=le.Symbol("kResistStopPropagation"),{finished:Cy}=bt,Ny=Nf,{addAbortSignalNoValidate:Oy}=kn,{isWritable:$y,isNodeStream:xy}=ot,{deprecate:Dy}=Ae,{ArrayPrototypePush:Ly,Boolean:Py,MathFloor:Ns,Number:ky,NumberIsNaN:My,Promise:Os,PromiseReject:$s,PromiseResolve:Vy,PromisePrototypeThen:xs,Symbol:Of}=le,Zr=Of("kEmpty"),Ds=Of("kEof");function jy(e,t){if(t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&kt(t.signal,"options.signal"),xy(e)&&!$y(e))throw new Ay("stream",e,"must be writable");const r=Ny(this,e);return t!=null&&t.signal&&Oy(t.signal,r),r}function jn(e,t){if(typeof e!="function")throw new Tr("fn",["Function","AsyncFunction"],e);t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&kt(t.signal,"options.signal");let r=1;(t==null?void 0:t.concurrency)!=null&&(r=Ns(t.concurrency));let n=r-1;return(t==null?void 0:t.highWaterMark)!=null&&(n=Ns(t.highWaterMark)),Cs(r,"options.concurrency",1),Cs(n,"options.highWaterMark",0),n+=r,(async function*(){const a=Ae.AbortSignalAny([t==null?void 0:t.signal].filter(Py)),i=this,l=[],d={signal:a};let u,h,_=!1,b=0;function c(){_=!0,E()}function E(){b-=1,g()}function g(){h&&!_&&b<r&&l.length<n&&(h(),h=null)}async function S(){try{for await(let T of i){if(_)return;if(a.aborted)throw new Ke;try{if(T=e(T,d),T===Zr)continue;T=Vy(T)}catch($){T=$s($)}b+=1,xs(T,E,c),l.push(T),u&&(u(),u=null),!_&&(l.length>=n||b>=r)&&await new Os($=>{h=$})}l.push(Ds)}catch(T){const $=$s(T);xs($,E,c),l.push($)}finally{_=!0,u&&(u(),u=null)}}S();try{for(;;){for(;l.length>0;){const T=await l[0];if(T===Ds)return;if(a.aborted)throw new Ke;T!==Zr&&(yield T),l.shift(),g()}await new Os(T=>{u=T})}}finally{_=!0,h&&(h(),h=null)}}).call(this)}function Fy(e=void 0){return e!=null&&Mt(e,"options"),(e==null?void 0:e.signal)!=null&&kt(e.signal,"options.signal"),(async function*(){let r=0;for await(const o of this){var n;if(e!=null&&(n=e.signal)!==null&&n!==void 0&&n.aborted)throw new Ke({cause:e.signal.reason});yield[r++,o]}}).call(this)}async function $f(e,t=void 0){for await(const r of xo.call(this,e,t))return!0;return!1}async function Uy(e,t=void 0){if(typeof e!="function")throw new Tr("fn",["Function","AsyncFunction"],e);return!await $f.call(this,async(...r)=>!await e(...r),t)}async function Wy(e,t){for await(const r of xo.call(this,e,t))return r}async function By(e,t){if(typeof e!="function")throw new Tr("fn",["Function","AsyncFunction"],e);async function r(n,o){return await e(n,o),Zr}for await(const n of jn.call(this,r,t));}function xo(e,t){if(typeof e!="function")throw new Tr("fn",["Function","AsyncFunction"],e);async function r(n,o){return await e(n,o)?n:Zr}return jn.call(this,r,t)}class Gy extends Iy{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Hy(e,t,r){var n;if(typeof e!="function")throw new Tr("reducer",["Function","AsyncFunction"],e);r!=null&&Mt(r,"options"),(r==null?void 0:r.signal)!=null&&kt(r.signal,"options.signal");let o=arguments.length>1;if(r!=null&&(n=r.signal)!==null&&n!==void 0&&n.aborted){const u=new Ke(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await Cy(this.destroy(u)),u}const a=new Ry,i=a.signal;if(r!=null&&r.signal){const u={once:!0,[vy]:this,[Ty]:!0};r.signal.addEventListener("abort",()=>a.abort(),u)}let l=!1;try{for await(const u of this){var d;if(l=!0,r!=null&&(d=r.signal)!==null&&d!==void 0&&d.aborted)throw new Ke;o?t=await e(t,u,{signal:i}):(t=u,o=!0)}if(!l&&!o)throw new Gy}finally{a.abort()}return t}async function Ky(e){e!=null&&Mt(e,"options"),(e==null?void 0:e.signal)!=null&&kt(e.signal,"options.signal");const t=[];for await(const n of this){var r;if(e!=null&&(r=e.signal)!==null&&r!==void 0&&r.aborted)throw new Ke(void 0,{cause:e.signal.reason});Ly(t,n)}return t}function Jy(e,t){const r=jn.call(this,e,t);return(async function*(){for await(const o of r)yield*o}).call(this)}function xf(e){if(e=ky(e),My(e))return 0;if(e<0)throw new my("number",">= 0",e);return e}function qy(e,t=void 0){return t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&kt(t.signal,"options.signal"),e=xf(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ke;for await(const a of this){var o;if(t!=null&&(o=t.signal)!==null&&o!==void 0&&o.aborted)throw new Ke;e--<=0&&(yield a)}}).call(this)}function Yy(e,t=void 0){return t!=null&&Mt(t,"options"),(t==null?void 0:t.signal)!=null&&kt(t.signal,"options.signal"),e=xf(e),(async function*(){var n;if(t!=null&&(n=t.signal)!==null&&n!==void 0&&n.aborted)throw new Ke;for await(const a of this){var o;if(t!=null&&(o=t.signal)!==null&&o!==void 0&&o.aborted)throw new Ke;if(e-- >0&&(yield a),e<=0)return}}).call(this)}Ro.streamReturningOperators={asIndexedPairs:Dy(Fy,"readable.asIndexedPairs will be removed in a future version."),drop:qy,filter:xo,flatMap:Jy,map:jn,take:Yy,compose:jy};Ro.promiseReturningOperators={every:Uy,forEach:By,reduce:Hy,toArray:Ky,some:$f,find:Wy};var Pi,Ls;function Df(){if(Ls)return Pi;Ls=1;const{ArrayPrototypePop:e,Promise:t}=le,{isIterable:r,isNodeStream:n,isWebStream:o}=ot,{pipelineImpl:a}=$o,{finished:i}=bt;Lf();function l(...d){return new t((u,h)=>{let _,b;const c=d[d.length-1];if(c&&typeof c=="object"&&!n(c)&&!r(c)&&!o(c)){const E=e(d);_=E.signal,b=E.end}a(d,(E,g)=>{E?h(E):u(g)},{signal:_,end:b})})}return Pi={finished:i,pipeline:l},Pi}var Ps;function Lf(){if(Ps)return _i.exports;Ps=1;const{Buffer:e}=be,{ObjectDefineProperty:t,ObjectKeys:r,ReflectApply:n}=le,{promisify:{custom:o}}=Ae,{streamReturningOperators:a,promiseReturningOperators:i}=Ro,{codes:{ERR_ILLEGAL_CONSTRUCTOR:l}}=ve,d=Nf,{setDefaultHighWaterMark:u,getDefaultHighWaterMark:h}=Mn,{pipeline:_}=$o,{destroyer:b}=Qt,c=bt,E=Df(),g=ot,S=_i.exports=To.Stream;S.isDestroyed=g.isDestroyed,S.isDisturbed=g.isDisturbed,S.isErrored=g.isErrored,S.isReadable=g.isReadable,S.isWritable=g.isWritable,S.Readable=Vn();for(const $ of r(a)){let B=function(...v){if(new.target)throw l();return S.Readable.from(n(w,this,v))};const w=a[$];t(B,"name",{__proto__:null,value:w.name}),t(B,"length",{__proto__:null,value:w.length}),t(S.Readable.prototype,$,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const $ of r(i)){let B=function(...v){if(new.target)throw l();return n(w,this,v)};const w=i[$];t(B,"name",{__proto__:null,value:w.name}),t(B,"length",{__proto__:null,value:w.length}),t(S.Readable.prototype,$,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}S.Writable=Co(),S.Duplex=rt(),S.Transform=mf,S.PassThrough=Tf,S.pipeline=_;const{addAbortSignal:T}=kn;return S.addAbortSignal=T,S.finished=c,S.destroy=b,S.compose=d,S.setDefaultHighWaterMark=u,S.getDefaultHighWaterMark=h,t(S,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return E}}),t(_,o,{__proto__:null,enumerable:!0,get(){return E.pipeline}}),t(c,o,{__proto__:null,enumerable:!0,get(){return E.finished}}),S.Stream=S,S._isUint8Array=function(w){return w instanceof Uint8Array},S._uint8ArrayToBuffer=function(w){return e.from(w.buffer,w.byteOffset,w.byteLength)},_i.exports}(function(e){const t=Lf(),r=Df(),n=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=n,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return r}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(Bl);var zy=Bl.exports;const oo="null:";function Xy(e){return t=>t.termType!=="NamedNode"||!t.value.startsWith(oo)?null:e.namedNode(t.value.slice(oo.length))}function Qy(e){const t=Xy(e);return r=>{const n=t(r.subject),o=t(r.predicate),a=t(r.object),i=t(r.graph);return n||o||a||i?e.quad(n||r.subject,o||r.predicate,a||r.object,i||r.graph):r}}class Zy{constructor(t,{baseIRI:r=oo,context:n=null,documentLoader:o,factory:a=kf}={}){const i=new Ms.JsonLdParser({baseIRI:r,context:n,dataFactory:a,documentLoader:o,streamingProfile:!1});t.pipe(i);const l=Qy(a),d=new zy.Transform({objectMode:!0,transform:(u,h,_)=>{_(null,l(u))}});return i.on("context",u=>{Object.entries(u).forEach(([h,_])=>{d.emit("prefix",h,a.namedNode(_))})}),i.on("error",u=>d.destroy(u)),i.pipe(d),Mf(d)}}class cg extends Pf{constructor(t){super(Zy,t)}}export{cg as default};
