import{r as P,b as f,p as d}from"./main-CzRgW4Z1.js";var c,m;function E(){if(m)return c;m=1;const u=P();class b extends u.Readable{constructor(e={}){if(super(e),e.iterator)throw new Error("readable stream iterator shortcut not yet implemented")}until(e,s){return new Promise((i,n)=>{this.on("error",t=>{n(t)}),s?this.once(e,(...t)=>{i(this,...t)}):this.once(e,i)})}bucket(e="utf8"){if(this._readableState.objectMode)return new Promise((i,n)=>{let t=[];this.pipe(new u.Writable({write(r,o,a){t.push(r),a()},writev(r,o){t.push(...r),o()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})});if(e==="utf8"||e==="utf-8")return new Promise((i,n)=>{let t="";this.setEncoding(e),this.pipe(new u.Writable({decodeStrings:!1,write(r,o,a){t+=r,a()},writev(r,o){t+=r.join(""),o()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})});if(e==="buffer")return new Promise((i,n)=>{let t=f.Buffer.from([]);this.pipe(new u.Writable({decodeStrings:!0,write(r,o,a){t=f.Buffer.concat([t,r],t.length+r.length),a()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})})}}class _ extends u.Writable{until(e,s){return new Promise((i,n)=>{this.on("error",t=>{n(t)}),s?this.once(e,(...t)=>{i(this,...t)}):this.once(e,i)})}import(e){return e.on("data",s=>this.write(s)).on("end",()=>this.end()).on("error",s=>this.emit("error",s)),this}}class w extends u.Duplex{until(e,s){return new Promise((i,n)=>{this.on("error",t=>{n(t)}),s?this.once(e,(...t)=>{i(this,...t)}):this.once(e,i)})}bucket(e="utf8"){if(this._readableState.objectMode)return new Promise((i,n)=>{let t=[];this.pipe(new u.Writable({write(r,o,a){t.push(r),a()},writev(r,o){t.push(...r),o()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})});if(e==="utf8"||e==="utf-8")return new Promise((i,n)=>{let t="";this.setEncoding(e),this.pipe(new u.Writable({decodeStrings:!1,write(r,o,a){t+=r,a()},writev(r,o){t+=r.join(""),o()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})});if(e==="buffer")return new Promise((i,n)=>{let t=f.Buffer.from([]);this.pipe(new u.Writable({decodeStrings:!0,write(r,o,a){t=f.Buffer.concat([t,r],t.length+r.length),a()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})})}}class h extends u.Transform{until(e,s){return new Promise((i,n)=>{this.on("error",t=>{n(t)}),s?this.once(e,(...t)=>{i(this,...t)}):this.once(e,i)})}bucket(e="utf8"){if(this._readableState.objectMode)return new Promise((i,n)=>{let t=[];this.pipe(new u.Writable({write(r,o,a){t.push(r),a()},writev(r,o){t.push(...r),o()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})});if(e==="utf8"||e==="utf-8")return new Promise((i,n)=>{let t="";this.setEncoding(e),this.pipe(new u.Writable({decodeStrings:!1,write(r,o,a){t+=r,a()},writev(r,o){t+=r.join(""),o()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})});if(e==="buffer")return new Promise((i,n)=>{let t=f.Buffer.from([]);this.pipe(new u.Writable({decodeStrings:!0,write(r,o,a){t=f.Buffer.concat([t,r],t.length+r.length),a()}})).on("error",r=>{n(r)}).on("finish",()=>{i(t)})})}import(e){return e.on("data",s=>this.write(s)).on("end",()=>this.end()).on("error",s=>this.emit("error",s)),this}demolish(e){if(this.push=s=>{if(s!==null)throw new Error("[ERR_STREAM_DESTROYED]: Cannot push after stream was destroyed")},this.emit=function(s,...i){s!=="end"&&Object.getPrototypeOf(this).emit.apply(this,[s,...i])},e)return u.Transform.prototype.destroy.call(this,e)}}const g=new Function("try {return this===global;}catch(e){return false;}")(),[W,S]=typeof d>"u"?[!0,!1]:d.browser?[!0,!0]:d.versions==="undefined"||d.versions.node==="undefined"?[!0,!1]:[!1,!1];(S||g&&+/^v(\d+)/.exec(d.version)[1]<10)&&(h.prototype.destroy=w.prototype.destroy=function(l,e){this._readableState.destroyed=!0,this._writableState.destroyed=!0;let s=()=>{this._writableState.emitClose&&this._readableState.emitClose&&this.emit("close")};return this._destroy(l||null,i=>{!e&&i?(d.nextTick(()=>{this.emit("error",i),s()}),this._writableState.errorEmitted=!0):(d.nextTick(s),e&&e(i))}),this},h.prototype._destroy=w.prototype._destroy=(l,e)=>e(l));class p extends h{constructor(e={}){super({...e,writableObjectMode:!0,readableObjectMode:!0}),this._as_inputs=new Set,this.on("pipe",s=>{this._as_inputs.add(s),s.on("prefix",(...i)=>{this.emit("prefix",...i)}).on("comment",(...i)=>{this.emit("comment",...i)})}),this.on("unpipe",s=>{this._as_inputs.delete(s)})}_destroy(){for(let e of this._as_inputs)e.destroy()}}class y extends p{_transform(e,s,i){i(null,JSON.stringify(e.isolate())+`
`)}}class x extends p{_transform(e,s,i){i(null,{type:"quad",value:e})}}return h.QuadsToOther=p,c={...u,Readable:b,Writable:_,Duplex:w,Transform:h,QuadsToOther:p,quads_to_json(){return new y},quads_to_writable(){return new x},source(l,e=null){return!e&&typeof l=="string"&&(e="utf8"),new b({objectMode:!e&&typeof l!="string"&&!f.Buffer.isBuffer(l),read(){this.push(l,e),this.push(null)}})}},c}export{E as r};
